var is=Object.defineProperty;var ss=(e,t,n)=>t in e?is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rt=(e,t,n)=>(ss(e,typeof t!="symbol"?t+"":t,n),n);import{x as ls,a as as}from"./xterm-dbff885b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const rs="imgs/icons/Apps/";function Be(e){return rs+e}const Y={settings:{name:"settings",productName:"Settings",icon:Be("settings.png")},notepad:{name:"notepad",productName:"NotePad",icon:Be("notepad.png")},explorer:{name:"explorer",productName:"File Explorer",icon:Be("explorer.png")},word:{name:"word",productName:"Word",icon:Be("word.png")},powerpoint:{name:"powerpoint",productName:"PowerPoint",icon:Be("powerpoint.png")},onenote:{name:"onenote",productName:"OneNote",icon:Be("onenote.png")},mail:{name:"mail",productName:"Mail",icon:Be("mail.png")},todo:{name:"todo",productName:"To Do",icon:Be("todo.png")},store:{name:"store",productName:"Store",icon:Be("store.png")},photos:{name:"photos",productName:"Photos (Demo)",icon:Be("photos.png")},yourphone:{name:"yourphone",productName:"Your Phone",icon:Be("yourphone.png")},whiteboard:{name:"whiteboard",productName:"White Board",icon:Be("whiteboard.png")},calculator:{name:"calculator",productName:"Calculator",icon:Be("calculator.png")},spotify:{name:"spotify",productName:"Spotify",icon:Be("spotify.png")},twitter:{name:"twitter",productName:"Twitter",icon:Be("twitter.png")},vscode:{name:"vscode",productName:"VS Code",icon:Be("vscode.png")},terminal:{name:"terminal",productName:"Terminal",icon:Be("terminal.png")},cmd:{name:"cmd",productName:"Command Promt",icon:Be("terminal.png")},github:{name:"github",productName:"GitHub",icon:Be("github.png")},discord:{name:"discord",productName:"Discord",icon:Be("discord.png")}},cs=Object.keys(Y).map(e=>Y[e]);function ds(e,t){return e.name>t.name?1:e.name<t.name?-1:0}function us(){const e=cs.sort(ds),t={},n=e.length;for(let i=0;i<n;i++){const s=e[i];let l=s.name.substring(0,1).toUpperCase();/[A-Z]/.test(l)||(/[0-9]/.test(l)?l="#":l="&"),t[l]||(t[l]=[]),t[l].push(s)}return t}const bt={photoViewer:{name:"photoViewer",productName:"Photos Viewer",icon:Be("photos.png")},mediaPlayer:{name:"mediaPlayer",productName:"Media Player",icon:Be("media-player.png")}},Mt={};function Me(e,t,n){typeof Mt[e]>"u"&&(Mt[e]=Object.create(null)),Mt[e][t]=n}function Ce(e,t){if(!(typeof Mt[e]>"u"))for(let n in Mt[e])Mt[e][n](t)}function an(e,t){delete Mt[e][t]}const G={backgroundImageChange:"background-image-change",backgroundImageStyleChange:"background-image-style-change",themeChange:"theme-change",blurChange:"blur-change",nightLightChange:"night-light-change",closePopup:"close-popup",showPopup:"show-popup",hidePopup:"hide-popup",createWindow:"create-window",startProcess:"start-process",viewWindow:"view-window",restoreView:"restore-view",showDesktopHover:"show-desktop-hover",showDesktopOut:"show-desktop-out",showDesktop:"show-desktop",blurAllWindow:"blur-all-window",brightnessChange:"brightness-change",volumeChange:"volume-change",transparentChange:"transparency-change",customThemeChange:"custom-theme-change",thumbnailReady:"thumbnail-ready"};function lt(e,t){typeof t>"u"||t===null||(t instanceof HTMLElement?e.appendChild(t):t instanceof Array?Dt(e,t):e.appendChild(document.createTextNode(t.toString())))}function Dt(e,t){t instanceof Array?t.forEach(n=>{lt(e,n)}):lt(e,t)}function re(e,t){for(let n in t)n.indexOf("-")>-1?e.style.setProperty(n,t[n]):n==="myBackgroundImage"?jn(t[n],i=>{e.style.backgroundImage=`url(${i})`}):e.style[n]=t[n]}function Ko(e){for(let t of e){if(t.children.length>0){const n=Array.from(t.children);Ko(n)}se(t.onBeforeRemove)&&t.onBeforeRemove()}}Element.prototype.remove=function(){var n;const e=Array.from(this.children);Ko(e);const t=this;se(t.onBeforeRemove)&&t.onBeforeRemove(),(n=this.parentElement)==null||n.removeChild(this)};function o(e,t,n){let i=document.createElement(e);function s(l){jn(l,a=>{i.src=a})}if((e==="img"||e==="audio"||e==="video")&&Object.defineProperty(i,"mySrc",{set:function(l){s(l)}}),t){const l=t;for(let a in l)if(a==="style"){const m=l[a];re(i,m)}else if(a==="mySrc"){const m=l[a];s(m)}else if(a.indexOf("-")>-1||a.indexOf(":")>-1){const m=l[a];i.setAttribute(a,m)}else i[a]=l[a]}return n&&Dt(i,n),Object.defineProperty(i.style,"myBackgroundImage",{set:function(l){jn(l,a=>{i.style.backgroundImage=`url(${a})`})}}),i}function rt(e){let t=e.firstChild;for(;t;)t.remove(),t=e.firstChild}function jn(e,t){Ke(e)?ho(e,(n,i)=>{if(n)t(null);else{const s=URL.createObjectURL(i);t(s)}}):t(e)}function ms(e){let t;const n=Object.create(null);n.width=0,e.color&&(n.backgroundColor=e.color);let i=o("div",{className:"progress"},t=o("div",{className:"progress-value",style:n}));function s(l){t.style.width=l/e.maxValue*100+"%"}return{element:i,setValue:s}}const Yo=`
<svg aria-hidden="true" version="1.1" viewbox="0 0 10 10" width="10" height="10" class="svg-fill">
<path d="M 0,5 10,5 10,6 0,6 Z"></path>
</svg>
`,Xn=`
<svg aria-hidden="true" version="1.1" viewbox="0 0 10 10" width="10" height="10" class="svg-fill">
<path d="m 2,1e-5 0,2 -2,0 0,8 8,0 0,-2 2,0 0,-8 z m 1,1 6,0 0,6 -1,0 0,-5 -5,0 z m -2,2 6,0 0,6 -6,0 z"></path>
</svg>
`,qn=`
<svg aria-hidden="true" version="1.1" viewbox="0 0 10 10" width="10" height="10" class="svg-fill">
<path d="M 0,0 0,10 10,10 10,0 Z M 1,1 9,1 9,9 1,9 Z"></path>
</svg>
`,Zo=`
<svg aria-hidden="true" version="1.1" viewbox="0 0 10 10" width="10" height="10" class="svg-fill">
<path d="M 0,0 0,0.7 4.3,5 0,9.3 0,10 0.7,10 5,5.7 9.3,10 10,10 10,9.3 5.7,5 10,0.7 10,0 9.3,0 5,4.3 0.7,0 Z"></path>
</svg>
`;function fs(e){const t={};e&&(t.backgroundImage=`url("${e}")`);let n=o("div",{className:"window-titlebar-icon flex content-center items-center flex-shrink-0",style:t});function i(s){F(s)&&(n.style.backgroundImage=`url("${s}")`)}return{element:n,setWindowIcon:i}}const hs={window:{titlebar:{buttons:{minimize:"Minimize",maximize:"Restore Down",maximizeDown:"Maximize",close:"Close"}}}},ps={window:{titlebar:{buttons:{minimize:"Thu gọn",maximize:"Thu nhỏ",maximizeDown:"Phóng to",close:"Đóng"}}}},gs={"en-us":hs,"vi-vn":ps};function vs(e){return gs[e]}function ws(e,t){const n=vs("en-us");let i=m(e.isMaximized),s=o("div",{title:i.title,className:"window-titlebar-button window-titlebar-maximize-button flex items-center content-center"+(e.disableMaximize?" disabled":""),innerHTML:i.icon,onclick:t.onMaximizeButtonClick}),l=o("div",{className:"window-titlebar-buttons flex"},[o("div",{title:n.window.titlebar.buttons.minimize,className:"window-titlebar-button window-titlebar-minimize-button flex items-center content-center",innerHTML:Yo,onclick:t.onMinimizeButtonClick}),s,o("div",{title:n.window.titlebar.buttons.close,className:"window-titlebar-button window-titlebar-close-button flex items-center content-center",innerHTML:Zo,onclick:t.onCloseButtonClick})]);function a(r){let c=m(r);s.title=c.title,s.innerHTML=r?Xn:qn}function m(r){return{title:r?n.window.titlebar.buttons.maximize:n.window.titlebar.buttons.maximizeDown,icon:r?Xn:qn}}return{element:l,setMaximize:a}}function xs(e,t,n,i){let s,l,a=o("div",{tabIndex:-1,className:"window-title h-full flex items-center"+(e.stretchTitlebarContent?" stretch":""),onfocus:i,oncontextmenu:n,ondblclick:e.disableMaximize?null:t},[o("div",{["drag-region"]:"drag",className:"absolute w-full h-full top left-0"}),e.hideTitle?null:o("div",{className:"window-title-text h-full flex items-center"},s=o("div",{title:e.title,className:"text-ellipsis"},e.title)),l=o("div",{className:"window-titlebar-content flex-1 h-full flex items-center relative"+(F(e.content)?"":" hide")},F(e.content)&&se(e.content)?e.content():e.content)]);function m(c){F(s)&&(s.title=c,s.textContent=c)}function r(c){rt(l),l.classList.remove("hide"),l.appendChild(se(c)?c():c)}return{element:a,setTitle:m,setContent:r}}function ys(e,t){let n=fs(e.icon),i=xs({title:e.title,hideTitle:e.hideTitle,disableMaximize:e.disableMaximize,content:e.content,stretchTitlebarContent:e.stretchTitlebarContent},t.onDoubleClick,t.onContextMenu,t.onTitleFocus),s=ws({isMaximized:e.maximized,disableMaximize:e.disableMaximize},{onMinimizeButtonClick:t.onMinimizeButtonClick,onMaximizeButtonClick:t.onMaximizeButtonClick,onCloseButtonClick:t.onCloseButtonClick}),l,a=!1;l=o("div",{className:"window-titlebar flex items-center"+(e.hideIcon?" no-icon":"")+(e.hideTitle?" no-title":"")},[n.element,i.element,s.element]),e.autoHide&&(l.addEventListener("mouseover",()=>{a=!0},!1),l.addEventListener("mouseout",()=>{a=!1},!1));function m(h){h?(l.classList.remove("titlebar-fade-in"),a||(l.classList.add("titlebar-fade-out"),t.onHidden&&t.onHidden())):(l.classList.add("titlebar-fade-in"),l.classList.remove("titlebar-fade-out"),t.onVisible&&t.onVisible())}function r(h){a=h}function c(h){h?l.classList.remove("hidden"):l.classList.add("hidden")}return{element:l,titleElem:i.element,setIcon:n.setWindowIcon,setTitle:i.setTitle,setTitlebarContent:i.setContent,setMaximize:s.setMaximize,setVisible:c,setAutoHide:m,setPreventHide:r}}function Go(e,t,n){var i=0,s=0,l=0,a=0;t?(t.onmousedown=r,t.ontouchstart=c):(e.onmousedown=r,e.ontouchstart=c);let m=!1;function r(v){v.button===0&&(v.preventDefault(),l=v.clientX,a=v.clientY,document.onmouseup=p,document.onmousemove=h,F(n)&&se(n.onDragStart)&&n.onDragStart())}function c(v){v.preventDefault();const x=v.targetTouches[0];l=x.clientX,a=x.clientY,window.ontouchmove=f,window.ontouchend=d,F(n)&&se(n.onTouch)&&n.onTouch()}function h(v){i=l-v.clientX,s=a-v.clientY,l=v.clientX,a=v.clientY,u(v.clientX,v.clientY)}function f(v){const x=v.touches[0];i=l-x.clientX,s=a-x.clientY,l=x.clientX,a=x.clientY,u(x.clientX,x.clientY)}function u(v,x){let w=e.offsetTop-s,y=e.offsetLeft-i;m=Math.abs(y)>0||Math.abs(w)>0,e.style.top=w+"px",e.style.left=y+"px",F(n)&&se(n.onDrag)&&n.onDrag({x:v,y:x},{top:w,left:y})}function p(){m&&F(n)&&se(n.onDragEnd)&&n.onDragEnd(e),m=!1,document.onmouseup=null,document.onmousemove=null}function d(){m&&F(n)&&se(n.onDragEnd)&&n.onDragEnd(e),m=!1,window.ontouchmove=null,window.ontouchend=null}}function Qe(e,t,n,i,s){let l=n,a=i,m="default",r="";t.onmousedown=O,t.ontouchstart=V;let c=0,h=0,f=0,u=0,p=0,d=0,v=0,x=0,w=0,y=0,L,B,M,R;function O(k){c=k.clientX,h=k.clientY,r=k.currentTarget.dataset.resize,window.addEventListener("mousemove",T,!1),window.addEventListener("mouseup",N,!1),H()}function V(k){k.preventDefault(),c=k.touches[0].clientX,h=k.touches[0].clientY,e.style.outline="12px solid var(--blue-color)",r=k.currentTarget.dataset.resize,window.addEventListener("touchmove",b,!1),window.addEventListener("touchend",I,!1),H()}function H(){let k=window.getComputedStyle(e);f=parseInt(k.left),u=parseInt(k.top),p=e.offsetWidth,d=e.offsetHeight,w=parseInt(k.minHeight),y=parseInt(k.minWidth),F(s)&&se(s.onResizeStart)&&s.onResizeStart()}function T(k){let D=k.clientX-c+v,S=k.clientY-h+x;c=k.clientX,h=k.clientY,g(D,S)}function b(k){const D=k.touches[0];let S=D.clientX-c+v,$=D.clientY-h+x;c=D.clientX,h=D.clientY,g(S,$)}function g(k,D){v=0,x=0;var S=D,$=k;r==="t"?(m="ns-resize",d-S<w?x=S-(D=d-w):u+S<M&&(x=S-(D=M-u)),u+=D,d-=D,l&&(p=Math.round(d*a))):r==="l"?(m="ew-resize",p-$<y?v=$-(k=p-y):f+$<L&&(v=$-(k=L-f)),f+=k,p-=k,l&&(d=Math.round(p/a))):r==="tl"?(m="nw-resize",p-$<y?v=$-(k=p-y):f+$<L&&(v=$-(k=L-f)),f+=k,p-=k,d-S<w?x=S-(D=d-w):u+S<M&&(x=S-(D=M-u)),u+=D,l?Math.abs(k)>Math.abs(D)?d=Math.round(p/a):p=Math.round(d*a):d-=D):r==="b"?(m="ns-resize",d+S<w?x=S-(D=w-d):u+d+S>R&&(x=S-(D=R-u-d)),d+=D,l&&(p=Math.round(d*a))):r==="bl"?(m="ne-resize",p-$<y?v=$-(k=p-y):f+$<L&&(v=$-(k=L-f)),f+=k,p-=k,l?d=Math.round(p/a):(d+S<w?x=S-(D=w-d):u+d+S>R&&(x=S-(D=R-u-d)),d+=D)):r==="r"?(m="ew-resize",p+$<y?v=$-(k=y-p):f+p+$>B&&(v=$-(k=B-f-p)),p+=k,l&&(d=Math.round(p/a))):r==="tr"?(m="ne-resize",p+$<y?v=$-(k=y-p):f+p+$>B&&(v=$-(k=B-f-p)),p+=k,d-S<w?x=S-(D=d-w):u+S<M&&(x=S-(D=M-u)),u+=D,d-=D,l&&(p=Math.round(d*a))):r==="br"&&(m="nw-resize",p+$<y?v=$-(k=y-p):f+p+$>B&&(v=$-(k=B-f-p)),p+=k,d+S<w?x=S-(D=w-d):u+d+S>R&&(x=S-(D=R-u-d)),d+=D,l&&(p=Math.round(d*a))),e.style.top=u+"px",e.style.left=f+"px",e.style.width=p+"px",e.style.height=d+"px",document.body.style.pointerEvents="none",document.documentElement.style.cursor=m,F(s)&&se(s.onResize)&&s.onResize({top:u,left:f,width:p,height:d})}function N(){F(s)&&se(s.onResizeEnd)&&s.onResizeEnd(),document.body.style.pointerEvents="initial",document.documentElement.style.cursor="default",window.removeEventListener("mousemove",T,!1),window.removeEventListener("mouseup",N,!1)}function I(){e.style.outline="none",F(s)&&se(s.onResizeEnd)&&s.onResizeEnd(),document.body.style.pointerEvents="initial",window.removeEventListener("touchmove",b,!1),window.removeEventListener("touchend",I,!1)}function E(k){a=k}function C(k){l=k}return{setAspectRatio:E,setKeepAspectRatio:C}}const no=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Kn=["January","February","March","April","May","June","July","August","September","October","November","December"],Bt=30,yt=38,We=46,ks="imgs/user.gif",Ne={top:"top",left:"left",right:"right",topLeft:"topLeft",bottomLeft:"bottomLeft",bottomRight:"bottomRight",topRight:"topRight"},Le=()=>"var(--window-icon-color)",Ns=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
<path
  d="M 3 3 L 11 3 L 11 11 L 3 11 L 3 3 z M 11 13 L 11 21 L 3 21 V 13 L 11 13 z M 13 3 L 21 3 V 11 L 13 11 V 3 z M 21 13 L 21 21 L 13 21 L 13 13 L 21 13 z" />
</svg>
`,oo=`
<svg xmlns="http://www.w3.org/2000/svg" class="svg-stroke" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" />
  <circle cx="12" cy="12" r="3" />
</svg>
`,Cs=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="${Le()}"><path d="M20 5h-9.586L8.707 3.293A.997.997 0 0 0 8 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2z"></path></svg>
`,Jo=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="${Le()}" fill="none" stroke-linecap="round">
  <circle cx="12" cy="17" r="1" style="fill: ${Le()}" />
  <path d="M9.172 14a4 4 0 0 1 5.656 0" />
  <path d="M6.343 12a8 8 0 0 1 11.314 0" />
  <path d="M3.515 9.5c4.686 -4.687 12.284 -4.687 17 0" />
</svg>
`,Ls=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="${Le()}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
`,To=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="${Le()}"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
`,Ts=`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="${Le()}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
`,Qo=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linejoin="round">
<rect x="5.5" y="7.5" width="14" height="9" stroke="${Le()}"/>
<rect x="7" y="9" width="11" height="6" fill="${Le()}"/>
<rect x="19.5" y="10" width="1.5" height="4" fill="${Le()}"/>
</svg>
`,ei=`
<svg aria-hidden="true" version="1.1" width="10" height="10">
<path d="M 0,0 0,0.7 4.3,5 0,9.3 0,10 0.7,10 5,5.7 9.3,10 10,10 10,9.3 5.7,5 10,0.7 10,0 9.3,0 5,4.3 0.7,0 Z"></path>
</svg>
`,ti=`
<svg class="svg-stroke" width="14" height="14" viewBox="0 0 24 24" stroke-width="2" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
</svg>
`,Is=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke="${Le()}" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<path d="M7 6a7.75 7.75 0 1 0 10 0" />
<line x1="12" y1="4" x2="12" y2="12" />
</svg>
`,Ss=`
 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"  stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
 <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
 <path d="M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5" />
</svg>
`,ni=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<polyline points="6 15 12 9 18 15" />
</svg>
`,Xt=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="${Le()}" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="svg-stroke">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<polyline points="9 6 15 12 9 18" />
</svg>
 `,Es=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<polyline points="7 8 17 16 12 20 12 4 17 8 7 16" />
</svg>
`,Ms=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<path d="M16 10h4a2 2 0 0 1 0 4h-4l-4 7h-3l2 -7h-4l-2 2h-3l2 -4l-2 -4h3l2 2h4l-2 -7h3z" />
</svg>
`,Ds=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
</svg>
`,Bs=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<path d="M5 12l5 5l10 -10" />
</svg>
`,oi=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<circle cx="10" cy="10" r="7" />
<line x1="21" y1="21" x2="15" y2="15" />
</svg>
`,zs=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="${Le()}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<circle cx="12" cy="12" r="4" style="fill: ${Le()}"/>
<circle cx="12" cy="12" r="9"/>
</svg>
`,Hs=`
<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" class="no-stroke">
  <circle cx="12" cy="12" r="9" fill="#000" />
  <circle cx="12" cy="12" r="8" fill="#fff" />
  <path d="M12 21A2 2 1 0 1 12 3" fill="#000" />
</svg>
`,As=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${Le()}"
  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
  <circle cx="12" cy="12" r="3"></circle>
  <line x1="12" y1="1" x2="12" y2="5"></line>
  <line x1="12" y1="19" x2="12" y2="23"></line>
  <line x1="4" y1="4" x2="7" y2="7"></line>
  <line x1="17" y1="17" x2="20" y2="20"></line>
  <line x1="1" y1="12" x2="5" y2="12"></line>
  <line x1="19" y1="12" x2="23" y2="12"></line>
  <line x1="4" y1="20" x2="7" y2="17"></line>
  <line x1="17" y1="7" x2="20" y2="4"></line>
</svg>
`,Ps=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${Le()}"
stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
<circle cx="12" cy="12" r="5"></circle>
<circle cx="10" cy="11" r="2" fill="${Le()}"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
`,Rs=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
stroke="${Le()}" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6">
</path>
<line x1="2" y1="20" x2="2.01" y2="20"></line>
</svg>
`,Fs=`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" stroke="${Le()}">
<rect x="3" y="3" width="18" height="18" />
<line x1="6" x2="10" y1="10" y2="6" />
<line x1="6" x2="18" y1="18" y2="6" />
<line x1="14" x2="18" y1="18" y2="14" />
</svg>
`;function io(e=24,t=1.5,n=Le()){return`
<svg xmlns="http://www.w3.org/2000/svg" class="svg-stroke" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="${n}" fill="none" stroke-linecap="round" stroke-linejoin="round">
<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
<line x1="12" y1="5" x2="12" y2="19" />
<line x1="5" y1="12" x2="19" y2="12" />
</svg>
`}function $s(e=20,t="var(--window-icon-color)"){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="${t}"
"><rect x="1" y="1" width="22" height="14" style="" stroke-width="2"></rect><path d="M8.5 1L8.5 15.5M11.5 15.5L11.5 20.5L2.5 20.5M11.5 20.5L21.5 20.5"></path></svg>`}function Ws(e=24,t="var(--window-icon-color)"){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="1.5" stroke="${t}" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72" transform="rotate(60 12 12)"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72" transform="rotate(120 12 12)"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72" transform="rotate(180 12 12)"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72" transform="rotate(240 12 12)"></path>
  <path d="M10 4l2 1l2 -1m-2 -2v6.5l3 1.72" transform="rotate(300 12 12)"></path>
</svg>`}function Os(e=24){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M5 12l14 0" />
  <path d="M5 12l6 6" />
  <path d="M5 12l6 -6" />
</svg>`}function Vs(e=24){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M5 12l14 0" />
  <path d="M13 18l6 -6" />
  <path d="M13 6l6 6" />
</svg>`}function Us(e=24){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M12 5l0 14" />
  <path d="M18 11l-6 -6" />
  <path d="M6 11l6 -6" />
</svg>`}function _s(e=24){return`<svg xmlns="http://www.w3.org/2000/svg"width="${e}" height="${e} "viewBox="0 0 24 24" stroke-width="1" stroke="var(--window-icon-color)" fill="none">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M3.5 5.5l1.5 1.5l2.5 -2.5" />
  <path d="M3.5 11.5l1.5 1.5l2.5 -2.5" />
  <path d="M3.5 17.5l1.5 1.5l2.5 -2.5" />
  <path d="M11.5 6.5l9.5 0" />
  <path d="M11.5 12.5l9.5 0" />
  <path d="M11.5 18.5l9.5 0" />
</svg>`}function js(e=24){return`<svg xmlns="http://www.w3.org/2000/svg"width="${e}" height="${e} "viewBox="0 0 24 24" stroke-width="1" stroke="var(--window-icon-color)" fill="none">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M15 8h.01" />
  <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5" />
  <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4" />
  <path d="M14 14l1 -1c.653 -.629 1.413 -.815 2.13 -.559" />
  <path d="M19 16v6" />
  <path d="M22 19l-3 3l-3 -3" />
</svg>`}function Xs(e=24){return`<svg xmlns="http://www.w3.org/2000/svg"width="${e}" height="${e} "viewBox="0 0 24 24" stroke-width="1" stroke="var(--window-icon-color)" fill="none">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M15 8h.01" />
  <path d="M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5" />
  <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4" />
  <path d="M14 14l1 -1c.67 -.644 1.45 -.824 2.182 -.54" />
  <path d="M16 19h6" />
  <path d="M19 16v6" />
</svg>`}function qs(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e} " viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747"></path>
   <path d="M20 4v5h-5"></path>
</svg>`}function ii(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
  <path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
  <path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
</svg>`}function si(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path d="M15 8h.01" />
  <path d="M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z" />
  <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5" />
  <path d="M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3" />
</svg>`}function Ks(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M15 8h.01" />
  <path d="M11 20h-4a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v4" />
  <path d="M4 15l4 -4c.928 -.893 2.072 -.893 3 0l3 3" />
  <path d="M14 14l1 -1c.31 -.298 .644 -.497 .987 -.596" />
  <path d="M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z" />
</svg>`}function Ys(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <rect x="1" y="3" width="4" height="4"/>
  <path d="M10 5h10" />
  <rect x="1" y="10" width="4" height="4"/>
  <path d="M10 12h10" />
  <rect x="1" y="17" width="4" height="4"/>
  <path d="M10 19h10" />
</svg>`}function Zs(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
  <path d="M7 10l6 0" />
  <path d="M10 7l0 6" />
  <path d="M21 21l-6 -6" />
</svg>`}function Gs(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
  <path d="M7 10l6 0" />
  <path d="M21 21l-6 -6" />
</svg>`}function Js(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 16" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path d="M.5.5h23v15H.5z" />
  <path d="M3.5 6.5v-3h3m14 3v-3h-3m3 6v3h-3m-11 0h-3v-3" />
</svg>`}function Qs(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 16" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path d="M.5.5h23v15H.5zM6.5 4.5v7m11-7v7" />
  <circle cx="12" cy="5.5" r=".5" />
  <circle cx="12" cy="10.5" r=".5" />
</svg>`}function el(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path d="M15 1h8v8m0-8L1 23v-8m0 8h8" />
</svg>`}function tl(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 7l16 0" />
  <path d="M10 11l0 6" />
  <path d="M14 11l0 6" />
  <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
  <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
</svg>`}function nl(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
</svg>`}function ol(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2" />
  <path d="M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4" />
  <path d="M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z" />
</svg>`}function il(e=24,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M13 4v4c-6.575 1.028 -9.02 6.788 -10 12c-.037 .206 5.384 -5.962 10 -6v4l8 -7l-8 -7z" />
</svg>`}function Fe(e,t){Ce(G.createWindow,{appName:e,args:t})}function rn(e){Ce(G.startProcess,e)}let _e,on;function sl(){return _e}function ll(e,t){if(_e instanceof HTMLDivElement){_e.innerHTML="",r();return}function n(){return e.map(c=>{const h=parseInt(c.element.style.width),f=parseInt(c.element.style.height),u=Array.from(c.element.getElementsByTagName("video")),p=c.element.cloneNode(!0),d=Array.from(p.getElementsByTagName("video")),v=Array.from(p.getElementsByTagName("audio"));for(let w=0;w<d.length;w++){const y=d[w];y.muted=!0,y.pause(),y.controls=!1,y.currentTime=u[w].currentTime}for(let w of v)w.muted=!0,w.pause(),w.controls=!1;p.style.pointerEvents="none",p.classList.add("taskbar-app-thumbnail-content");let x=120/f;return x*h>200&&(x=200/h),p.className.indexOf("fluid")===-1&&(p.style.height=f-Bt+"px"),p.style.transform=`scale(${x})`,{container:o("div",{title:c.getTitle(),className:"taskbar-app-thumbnail"+(c.isFocused()?" active":""),onmouseover:i.bind(null,c.id),onmouseout:s.bind(null,c.id)},[o("div",{className:"taskbar-app-thumbnail-inner relative w-full h-full fade-in",onclick:a.bind(null,c)},[o("div",{className:"taskbar-app-thumbnail-heading flex items-center"},[o("div",{className:"taskbar-app-thumbnail-icon image-cover flex-shrink-0",style:{backgroundImage:`url("${c.icon}")`}}),o("div",{className:"taskbar-app-thumbnail-title"},o("div",{className:"text-ellipsis"},c.getTitle())),o("div",{title:"Close",className:"taskbar-app-thumbnail-close-button flex content-center items-center flex-shrink-0",innerHTML:ei,onclick:()=>{c.close(),Tn(),l()}})]),o("div",{className:"taskbar-app-thumbnail-container"},p)])]),thumbnail:p}})}function i(c){Ce(G.viewWindow,{id:c}),Ce(G.hidePopup)}function s(c){l(c),Ce(G.showPopup)}function l(c){Ce(G.restoreView,{id:c})}function a(c){c.show(),c.focus(),Tn(),l()}function m(c){if(_e){const h=_e.getBoundingClientRect(),f=Math.round(t.left+t.width/2-h.width/2);_e.style.left=f+"px",_e.style.height=c+62+"px"}}function r(){const c=n();_e&&Dt(_e,c.map(f=>f.container));let h=0;c.forEach(f=>{const u=f.thumbnail.getBoundingClientRect();f.container.style.width=u.width+"px",f.container.style.height=u.height+32+"px",u.height>h&&(h=u.height)}),m(h),setTimeout(()=>{re(_e,{visibility:"visible"})},50)}_e=o("div",{className:"taskbar-app-thumbnails flex",style:{visibility:"hidden"},onmouseover:li,onmouseleave:ai}),document.body.appendChild(_e),r()}function li(){on&&clearTimeout(on)}function ai(){on&&clearTimeout(on),on=setTimeout(()=>{Tn()},500)}function Tn(){_e==null||_e.remove(),_e=void 0}function ri(e,t){const n=Object.create(null);return n.className="taskbar-app-item-icon w-full h-full flex items-center content-center",t==="svg"?n.innerHTML=e:(n.className+=" image-icon",n.style||(n.style=Object.create(null)),n.style.backgroundImage=`url("${e}")`,n.style.pointerEvents="none"),n}function al(e,t,n){let i;const s=Object.create(null);s.title=e.productName,s.className="taskbar-item taskbar-app-item";const l=ri(e.icon,e.iconType);return s.onmousedown=a=>a.stopImmediatePropagation(),s.ontouchstart=a=>a.stopPropagation(),s.onclick=t==null?void 0:t.onclick,s.oncontextmenu=t==null?void 0:t.oncontextmenu,i=o("div",s,o("div",l)),F(n)&&i.style.setProperty("--window-icon-color",n),{element:i}}function xt(e,t){let n;const i=[],s=Object.create(null);s.className="taskbar-item taskbar-app-item";const l=ri(e.icon,e.iconType);let a;s.onmousedown=L=>{ct(),L.stopPropagation(),Ce(G.closePopup),a&&clearTimeout(a)},s.ontouchstart=L=>{ct(),L.stopPropagation(),Ce(G.closePopup),a&&clearTimeout(a)},s.oncontextmenu=L=>{L.stopPropagation(),L.preventDefault(),ct(),typeof t.oncontextmenu=="function"&&t.oncontextmenu(L)};function m(){const L=i.map(B=>B.app);ll(L,n.getBoundingClientRect())}s.onmouseover=()=>{i.length&&(li(),a&&clearTimeout(a),sl()?m():a=setTimeout(()=>{m()},500))},s.onmouseleave=()=>{a&&clearTimeout(a),i.length&&ai()},s.onclick=r;function r(){if(i.length===0)Fe(e.name);else if(i.length===1){Tn();const L=i[0];L.app.isVisible()?L.app.isFocused()?L.app.hide():L.app.focus():(L.app.show(),L.app.focus())}else i.length>1&&m()}let c;n=o("div",s,[o("div",l),c=o("div",{className:"taskbar-app-item-status"})]),n.addEventListener("customdragover",h,!1),n.addEventListener("customdrop",f,!1);function h(L){}function f(L){}function u(){i.length?c.classList.add("active"):c.classList.remove("active")}function p(L,B){i.push({name:L,active:!0,app:B}),u()}function d(L){const B=i.findIndex(M=>M.name===L);B>-1&&(i.splice(B,1),i.length===0&&t!=null&&t.onRemove&&t.onRemove()),u()}function v(L){setTimeout(()=>{n.classList.add("active")},10)}function x(L){setTimeout(()=>{n.classList.remove("active")},0)}function w(){return i}function y(){n.remove()}return{element:n,addInstance:p,removeInstance:d,getInstances:w,setActive:v,removeActive:x,remove:y}}function Ht(e,t,n){const i="popup"+pn(32);let s="popup dropdown-box"+(e.noBorder?" no-border":""),l=!1,a={};e.className&&(s+=" "+e.className),F(e.top)&&(a.top=e.top+"px"),F(e.left)&&(a.left=e.left+"px"),F(e.width)&&(a.width=e.width+"px"),F(e.height)&&(a.height=e.height+"px");let m=o("div");function r(y){m=o("div",{tabIndex:-1,className:s,style:a},o("div",{className:"popup-inner relative w-full h-full"},y)),lt(document.body,m),Ce(G.blurAllWindow),m.focus(),document.addEventListener("mousedown",d,!1),window.addEventListener("touchstart",v,!1)}function c(y){re(m,y)}function h(y){r(t),F(y)&&(F(y.top)&&(m.style.top=y.top+"px"),F(y.left)&&(m.style.left=y.left+"px"),F(y.width)&&(m.style.width=y.width+"px"),F(y.height)&&(m.style.height=y.height+"px")),l=!0,n&&n.onShow&&n.onShow()}function f(){m.remove(),document.removeEventListener("mousedown",d,!1),window.removeEventListener("touchstart",v,!1),l=!1,n&&n.onHide&&n.onHide()}function u(y){l?f():h(y)}function p(y){m.contains(y)||f()}function d(y){p(y.target)}function v(y){p(y.target)}function x(){m&&m.classList.add("hidden")}function w(){m&&m.classList.remove("hidden")}return Me(G.closePopup,i,y=>{l&&i!==y&&f()}),Me(G.showPopup,i,()=>{w()}),Me(G.hidePopup,i,()=>{x()}),{element:m,id:i,show:h,close:f,visible:w,hide:x,toggleShow:u,setStyle:c}}let Qt=class{constructor({startDate:t=null,endDate:n=null,siblingMonths:i=!1,weekNumbers:s=!1,weekStart:l=0}={}){Rt(this,"startDate");Rt(this,"endDate");Rt(this,"siblingMonths");Rt(this,"weekNumbers");Rt(this,"weekStart");this.startDate=t,this.endDate=n,this.siblingMonths=i,this.weekNumbers=s,this.weekStart=l}getCalendar(t,n){const i=new Date(Date.UTC(t,n,1,0,0,0,0));t=i.getUTCFullYear(),n=i.getUTCMonth();const s=[],l=i.getUTCDay(),a=-((7-this.weekStart+l)%7),m=Qt.daysInMonth(t,n),r=(m-a)%7,c=Qt.daysInMonth(t,n-1);let h=a,f,u,p=!1,d=null,v,x;const w=m-h+(r!==0?7-r:0)+a;for(;h<w;)u=h+1,f=((h<1?7+h:h)+l)%7,u<1||u>m?this.siblingMonths?(u<1?(v=n-1,x=t,v<0&&(v=11,x--),u=c+u):u>m&&(v=n+1,x=t,v>11&&(v=0,x++),u=h-m+1),v!==void 0&&x!==void 0&&(p={day:u,weekDay:f,month:v,year:x,siblingMonth:!0})):p=!1:p={day:u,weekDay:f,month:n,year:t},p&&this.weekNumbers&&(d===null?d=Qt.calculateWeekNumber(p):f===1&&d===52?d=1:f===1&&d++,p.weekNumber=d),p&&this.startDate&&(p.selected=this.isDateSelected(p)),s.push(p),h++;return s}isDateSelected(t){return this.startDate?t.year===this.startDate.year&&t.month===this.startDate.month&&t.day===this.startDate.day?!0:!(!this.endDate||t.year===this.startDate.year&&t.month===this.startDate.month&&t.day<this.startDate.day||t.year===this.endDate.year&&t.month===this.endDate.month&&t.day>this.endDate.day||t.year===this.startDate.year&&t.month<this.startDate.month||t.year===this.endDate.year&&t.month>this.endDate.month||t.year<this.startDate.year||t.year>this.endDate.year):!1}setStartDate(t){this.startDate=t}setEndDate(t){this.endDate=t}setDate(t){return this.setStartDate(t)}static diff(t,n){const i=new Date(Date.UTC(t.year,t.month,t.day,0,0,0,0)),s=new Date(Date.UTC(n.year,n.month,n.day,0,0,0,0));return Math.ceil((i.getTime()-s.getTime())/864e5)}static interval(t,n){return Math.abs(Qt.diff(t,n))+1}static compare(t,n){if(typeof t!="object"||typeof n!="object"||t===null||n===null)throw new TypeError("dates must be objects");return t.year<n.year?-1:t.year>n.year?1:t.month<n.month?-1:t.month>n.month?1:t.day<n.day?-1:t.day>n.day?1:0}static daysInMonth(t,n){return new Date(t,n+1,0).getDate()}static isLeapYear(t){return t%4===0&&t%100!==0||t%400===0}static calculateWeekNumber(t){const n=new Date(Date.UTC(t.year,t.month,t.day,0,0,0,0)),i=new Date(n.valueOf()),s=(n.getUTCDay()+6)%7;i.setUTCDate(i.getUTCDate()-s+3);const l=i.valueOf();return i.setUTCMonth(0,1),i.getUTCDay()!==4&&i.setUTCMonth(0,1+(4-i.getUTCDay()+7)%7),1+Math.ceil((l-i.getTime())/6048e5)}};function rl(){let e,t,n=new Date().getDate(),i;const s=new Qt({siblingMonths:!0});function l(){t.innerHTML="";const c=new Date;e.innerHTML=Kn[c.getUTCMonth()];const h=no.map(f=>f.substring(0,2));for(let f=0;f<h.length;f++){const u=h[f];t.appendChild(o("div",{className:"calendar-day -weekday"},o("div",{className:"w-full h-full flex items-center content-center"},u)))}s.getCalendar(c.getUTCFullYear(),c.getUTCMonth()).forEach(f=>{const u=o("div",{className:"calendar-day"+(f&&f.siblingMonth?" -sibling-month":"")},o("div",{"data-date":f?f.day:"",className:"calendar-day-inner w-full h-full flex items-center content-center"+(f&&c.getDate()===f.day&&!f.siblingMonth?" active":"")},f?f.day.toString():""));t.appendChild(u)})}function a(){const c=new Date,h=c.getDate();if(n!==h){const f=t.querySelector(`[data-date="${n}"`);f instanceof HTMLDivElement&&f.classList.remove("active");const u=t.querySelector(`[data-date="${h}"`);u instanceof HTMLDivElement&&u.classList.add("active"),n=h,e.innerHTML=Kn[c.getUTCMonth()]}}function m(){l(),i=setInterval(()=>{a()},1e3)}function r(){clearInterval(i)}return Ht({className:"calendar-popup"},o("div",{className:"calendar-content"},[e=o("div",{className:"calendar-month"}),t=o("div",{className:"calendar-items"})]),{onShow:m,onHide:r})}const Io=rl();function cl(){function e(){ct(),Ce(G.closePopup,Io.id),Io.toggleShow()}const t=o("div",{className:"taskbar-item taskbar-date-time taskbar-date h-full flex items-center flex-shrink-0",onclick:e,onmousedown:n=>n.stopPropagation(),ontouchstart(n){n.stopPropagation()}},Yn(new Date));return setInterval(()=>{t.textContent=Yn(new Date)},500),{element:t}}function dl(){let e,t,n,i,s;function l(){const r=new Date,c=r.getSeconds(),h=c/60*360+90;e.style.transform=`rotate(${h}deg)`;const f=r.getMinutes(),u=f/60*360+c/60*6+90;t.style.transform=`rotate(${u}deg)`;const d=r.getHours()/12*360+f/60*30+90;n.style.transform=`rotate(${d}deg)`,i.textContent=zt(r,!0)}function a(){l(),setInterval(l,500)}function m(){clearInterval(s)}return Ht({className:"clock-popup"},o("div",{className:"clock-container flex"},[o("div",{className:"clock-inner"},[o("div",{className:"clock"},[o("div",{className:"outer-clock-face"},[o("div",{className:"clock-marking clock-marking-one"}),o("div",{className:"clock-marking clock-marking-two"}),o("div",{className:"clock-marking clock-marking-three"}),o("div",{className:"clock-marking clock-marking-four"}),o("div",{className:"inner-clock-face"},[n=o("div",{className:"clock-hand clock-hour-hand"}),t=o("div",{className:"clock-hand clock-min-hand"}),e=o("div",{className:"clock-hand clock-second-hand"})])])]),i=o("div",{className:"clock-time"})]),o("div",{className:"clock-divider"}),o("div",{className:"alarm-container flex flex-col flex-1 w-full"},[o("div",{className:"alarm-heading"},"Alarms"),o("div",{className:"alarm-items flex items-center content-center flex-1"},"No alarms")])]),{onShow:a,onHide:m})}const So=dl();function ul(){const e=o("div",{className:"taskbar-item taskbar-date-time taskbar-time h-full flex items-center",onclick:()=>{ct(),Ce(G.closePopup,So.id),So.toggleShow({left:Math.round(e.getBoundingClientRect().left)})},style:{whiteSpace:"nowrap"},onmousedown:t=>t.stopPropagation(),ontouchstart(t){t.stopPropagation()}},zt(new Date));return setInterval(()=>{e.textContent=zt(new Date)},500),{element:e}}function ml(){let e,t;function n(){t=setInterval(()=>{e.textContent=zt(new Date)},500)}function i(){clearInterval(t)}function s(a,m){return o("div",{},[o("div",{},a),o("div",{style:{fontSize:"16px"}},m)])}return Ht({className:"weather-popup"},o("div",{className:"weather-container w-full h-full p-20"},[o("div",{className:"flex"},[e=o("div",{className:"weather-popup-time flex items-center"},zt(new Date)),o("div",{className:"flex items-center",style:{fontWeight:"bold",marginLeft:"auto"}},[o("div",{style:{marginRight:"10px"}},"Somewhere"),o("div",{className:"flex items-center",innerHTML:oo})])]),o("div",{className:"flex items-center",style:{paddingBlock:"20px"}},[o("div",{style:{width:"80px",height:"80px",backgroundImage:'url("imgs/icons/Weather/sunny snow.png")',backgroundRepeat:"no-repeat",backgroundSize:"contain"}}),o("div",{className:"weather-popup-temperature",style:{marginLeft:"20px",fontSize:"32px"}},"-37°C"),o("div",{style:{marginLeft:"20px"}},[o("div",{style:{fontWeight:"bold",fontSize:"14px"}},"Snow"),o("div",{className:"flex",style:{marginTop:"10px"}},[o("div",{},"Feel like"),o("div",{style:{marginLeft:"10px",fontWeight:"bold",fontSize:"14px"}},"-37°C")])])]),o("div",{className:"weather-popup-index"},[s("Air quality","60"),s("Winds","4 km/h"),s("Humidity","50 %"),s("Visibility","10 km"),s("Pressure","1021 mb"),s("Dew point","10°")])]),{onShow:n,onHide:i})}function fl(){const e=ml(),t=o("div",{title:"Somewhere, -37°C, Snow",className:"taskbar-item taskbar-weather h-full flex items-center",onclick:()=>{ct(),Ce(G.closePopup,e.id),e.toggleShow({left:Math.round(t.getBoundingClientRect().left)})},onmousedown:n=>n.stopPropagation(),ontouchstart(n){n.stopPropagation()}},[o("div",{style:{height:"20px"},innerHTML:Ws(20,"var(--accent-color)")}),o("div",{style:{marginLeft:"5px"}},"-37°C")]);return{element:t}}const Ue=[];for(let e=0;e<6;e++){const t="IMG"+e+".jpg";Ue.push({name:t,path:"imgs/Wallpapers/"+t,thumbnailPath:"imgs/Wallpapers/Thumbnails/"+t})}const $t={useTitleBarAccentColor:!1,useTaskbarAndStartMenuAccentColor:!1,useWindowBorderAccentColor:!1},hl={name:"Default Light",background:Ue[0],accentColor:{h:200,s:100,l:50},dark:!1,transparency:!0,backgroundImageStyle:"Fill",...$t},pl={name:"Default Dark",background:Ue[1],backgroundImageStyle:"Fill",accentColor:{h:200,s:100,l:50},dark:!0,transparency:!0,...$t},gl=[{name:"Spring",background:Ue[2],backgroundImageStyle:"Fill",accentColor:{h:120,s:100,l:40},dark:!1,transparency:!0,...$t},{name:"Autumn",background:Ue[3],backgroundImageStyle:"Fill",accentColor:{h:48,s:100,l:49},dark:!1,transparency:!0,...$t},{name:"Abstract",background:Ue[4],backgroundImageStyle:"Fill",accentColor:{h:356,s:98,l:69},dark:!1,transparency:!0,...$t},{name:"Moody",background:Ue[5],backgroundImageStyle:"Fill",accentColor:{h:215,s:50,l:40},dark:!0,transparency:!1,...$t}],vl=[hl,pl].concat(gl),ci={scale:"0.5",showDesktopIcons:!0,volume:100,brightness:100,nightlight:!1,themes:vl,themeIndex:0,recentImages:[Ue[0],Ue[2],Ue[3],Ue[4],Ue[5]],roundedCorner:!0,useBorder:!1},fe=so("preferences",ci);function so(e,t={}){let n={};try{const a=localStorage.getItem(e);a?n=Ni(JSON.parse(a),t):n=t}catch{}function i(a){if(typeof a=="string")return{[a]:n[a]};if(a instanceof Array){const m={};for(let r=0;r<a.length;r++){const c=a[r];m[c]=n[c]}return m}return n}function s(a){n={...n,...a},localStorage.setItem(e,JSON.stringify(n))}function l(){n=ci,localStorage.setItem(e,JSON.stringify(n))}return{getState:i,setState:s,reset:l}}function wl(){const e=[];function t(s){const l=pn(32),{volume:a}=fe.getState("volume"),m=new AudioContext,r=m.createGain();return r.connect(m.destination),m.createMediaElementSource(s).connect(r),r.gain.value=a/100,e.push({id:l,gainNode:r,context:m}),l}function n(s){const l=e.findIndex(a=>a.id===s);if(l>-1){const a=e[l];a.gainNode.disconnect(),a.context.close(),e.splice(l,1)}}function i(s){for(const l of e)l.gainNode.gain.value=s}return{addController:t,removeController:n,changeVolume:i}}const en=wl();function xl(){let{nightlight:e}=fe.getState("nightlight"),t,n,i=o("div",{className:"screen"},[t=o("div",{className:"screen-bright-overlay w-full h-full"}),n=o("div",{className:"screen-nightlight w-full h-full"+(e?" active":"")})]);lt(document.body,i);function s(m){let r=Ot(.7-m/100*.7,2);t.style.opacity=r.toString(),Ce(G.brightnessChange,m)}function l(m,r=!0){e=m,n.classList[e?"add":"remove"]("active"),r&&fe.setState({nightlight:e}),Ce(G.nightLightChange,e)}function a(){l(!e)}return{setBrightness:s,setNightLight:l,toogleNightLight:a}}const cn=xl();function Eo(e){let t,n,i,s,l,a,m,r=e.min||0,c=e.max||100,h=!1,f={top:0,left:0,width:0,height:0};function u(){f=s.getBoundingClientRect()}function p(T,b){let g=T-f.left;g<0?g=0:g>f.width&&(g=f.width);let N=g/f.width*100;b(N)}function d(T){typeof T=="number"&&p(T,b=>{t=b,l.style.width=b+"%",a.style.width=b+"%";const g=b*(c-r)/100+r;n=g,se(e.onChange)?e.onChange(b,N=>{e.showBagde&&(m.textContent=N.toString())}):e.showBagde&&(m.textContent=Math.round(b).toString()),se(e.onValueChange)&&(e.showBagde&&(m.textContent=Ot(g,2).toString()),e.onValueChange(g))})}function v(T){h=!0,i.classList.add("hoding"),u(),d(T.x),se(e.onHoding)&&e.onHoding(),document.addEventListener("mousemove",w,!1),document.addEventListener("mouseup",L,!1)}function x(T){T.preventDefault(),h=!0,i.classList.add("hoding"),u(),d(T.touches[0].clientX),se(e.onHoding)&&e.onHoding(),window.addEventListener("touchmove",y,!1),window.addEventListener("touchend",B,!1)}function w(T){h&&d(T.x)}function y(T){d(T.touches[0].clientX)}function L(){h=!1,i.classList.remove("hoding"),typeof e.onRelease=="function"&&e.onRelease(t,n),document.removeEventListener("mousemove",w,!1),document.removeEventListener("mouseup",L,!1)}function B(){h=!1,i.classList.remove("hoding"),typeof e.onRelease=="function"&&e.onRelease(t,n),window.removeEventListener("touchmove",y,!1),window.removeEventListener("touchend",B,!1)}function M(){u()}function R(T){h||p(T.x,b=>{b||(b=0),a.style.width=b+"%",typeof e.onHoverMove=="function"?e.onHoverMove(b,g=>{e.showBagde&&(m.textContent=g.toString())}):e.showBagde&&(m.textContent=Math.round(b).toString())})}function O(){a.style.width="0%"}i=o("div",{className:"slider",onmousedown:v,ontouchstart:x,onmouseover:M,onmousemove:R,onmouseleave:O},s=o("div",{className:"slider-inner"},[l=o("div",{className:"slider-thumb-primary"},o("div",{className:"slider-thumb-primary-inner"})),a=o("div",{className:"slider-thumb-secondary"},o("div",{className:"slider-thumb-secondary-inner"},e.showBagde?m=o("div",{className:"slider-thumb-secondary-text"}):null))]));function V(T){T>100&&(T=100),h||(l.style.width=T+"%")}function H(T){const b=(T-r)/(c-r)*100;V(b)}return{element:i,update:V,updateValue:H}}function di(e){let t=o("div",{className:"flex items-center content-center"+(e!=null&&e.className?" "+e.className:""),innerHTML:To}),n=!1,i=1,s=i;function l(m){let r=To;m>=.4?i=1:m>0?(r=Ls,i=0):(r=Ts,i=-1),s!==i&&(n=!1),s=i,n||(n=!0,t.innerHTML=r)}const{volume:a}=fe.getState("volume");return l(a/100),Me(G.volumeChange,e.id,m=>{l(m)}),{element:t,updateVolume:l}}function mt(e){let t=e.active,n=o("div",{className:"action-center-button"+(t?" active":"")},[o("div",{className:"action-center-button-icon",innerHTML:e.icon,onclick:i}),o("div",{className:"action-center-button-text"},e.text)]);function i(){e.disableActiveOnClick||(t=!t,typeof e.onclick=="function"&&e.onclick(t))}function s(a){n.classList[a?"add":"remove"]("active")}function l(a){t=a,s(a)}return{element:n,setActive:l}}function yl(){const{themes:e,themeIndex:t,customTheme:n,nightlight:i,brightness:s,volume:l}=fe.getState(["themes","themeIndex","customTheme","nightlight","brightness","volume"]),a=t>-1?e[t]:n,m=a.dark,r=a.transparency,c=mt({icon:Jo,text:"Wifi"}),h=mt({icon:Es,text:"Bluetooth"}),f=mt({icon:Ms,text:"Airplan Mode"}),u=mt({active:m,icon:Hs,text:"Dark Theme",onclick:M=>{mo(M)}}),p=mt({icon:Ds,text:"Focus Assist"}),d=mt({icon:zs,text:"Location"}),v=mt({active:i,icon:Ps,text:"Night Light",onclick:()=>{cn.toogleNightLight()}}),x=mt({icon:Rs,text:"Connect"}),w=mt({active:r,icon:Fs,text:"Transparency",onclick:M=>{fo(M)}});Me(G.themeChange,"actionCenter",M=>{u.setActive(M)});let y=!1;const L=Eo({showBagde:!0,onHoding:()=>{y=!0},onChange:(M,R)=>{cn.setBrightness(M),R(Math.round(M))},onRelease:M=>{y=!1,fe.setState({brightness:Math.round(M)})}});L.update(s);const B=Eo({showBagde:!0,onChange(M,R){R(Math.round(M)),en.changeVolume(M/100),Ce(G.volumeChange,M/100)},onRelease:M=>{fe.setState({volume:Math.round(M)})}});return B.update(l),Me(G.nightLightChange,"actionCenter",M=>{v.setActive(M)}),Me(G.brightnessChange,"actionCenter",M=>{y||L.update(M)}),Me(G.transparentChange,"actionCenter",M=>{w.setActive(M)}),Ht({className:"action-center"},[o("div",{className:"action-center-top"},[o("div",{className:"action-center-buttons"},[c.element,h.element,f.element,u.element,p.element,d.element,v.element,x.element,w.element]),o("div",{className:"action-center-sliders"},[o("div",{className:"action-center-slider w-full flex items-center"},[o("div",{className:"action-center-slider-icon",innerHTML:As}),L.element]),o("div",{className:"action-center-slider w-full flex items-center"},[di({id:"action-center-volume-button",className:"action-center-slider-icon"}).element,B.element])])]),o("div",{className:"action-center-footer flex items-center"},[o("div",{className:"action-center-footer-item action-center-batery flex items-center"},[o("div",{className:"action-center-batery-icon flex items-center",innerHTML:Qo}),o("div",{className:"action-center-batery-text"},"100%")]),o("div",{title:"Open Settings",className:"action-center-footer-item action-center-config",innerHTML:oo,onclick:()=>{Ce(G.closePopup),Fe("settings")}})])])}const Mo=yl(),Ee={Tab:"Tab",Enter:"Enter",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Escape:"Escape",Space:" ",BackSpace:"Backspace",Delete:"Delete",Home:"Home",End:"End",Insert:"Insert"};function ui(e=16,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <polyline points="6 15 12 9 18 15" />
</svg>`}function Hn(e=16,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <polyline points="6 9 12 15 18 9" />
</svg>`}function mi(e=16,t=1.5){return`<svg xmlns="http://www.w3.org/2000/svg" width="${e}" height="${e}" viewBox="0 0 24 24" stroke-width="${t}" stroke="var(--window-icon-color)" fill="none" stroke-linecap="round" stroke-linejoin="round" class="svg-stroke">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M5 12l5 5l10 -10" />
</svg>`}function fi(e,t,n){const i=typeof e.children<"u"&&e.children!==null&&e.children instanceof Array&&e.children.length>0;let s=o("div",{onBeforeRemove(){s=null}});s.className="menu-item",s.tabIndex=-1,e.disabled?s.classList.add("disabled"):(s.onclick=f,s.onkeydown=c),s.onfocus=h,s.onmouseenter=m;let l=document.createElement("div");l.className="menu-item-icon",e.checked?(s.classList.add("checked"),l.innerHTML=mi()):e.icon&&(!e.iconType&&!(e.icon instanceof Node)||e.iconType==="svg"?l.innerHTML=e.icon:e.iconType==="image"?l.style.backgroundImage=`url("${e.icon}")`:(e.icon instanceof Node||e.iconType==="element")&&l.appendChild(e.icon)),e.emphasis&&s.classList.add("emphasis"),s.appendChild(l);let a=document.createElement("div");if(a.className="menu-item-text",a.textContent=e.text||"",s.appendChild(a),e.shortcut){let p=document.createElement("div");p.className="menu-item-shortcut",p.textContent=e.shortcut,s.appendChild(p)}if(i){let p=document.createElement("div");p.className="menu-item-arrow flex items-center",p.innerHTML=Xt,s.appendChild(p)}function m(p){p.stopPropagation(),p.currentTarget.focus(),n.onHover(t)}function r(){i||n.onEnter(e),typeof e.onClick=="function"&&e.onClick()}function c(p){p.key===Ee.Enter&&(p.stopPropagation(),r())}function h(p){p.stopPropagation(),n.onFocus(t)}function f(p){p.stopPropagation(),r()}function u(p){s.classList[p?"add":"remove"]("active")}return{element:s,setActive:u}}function In(e,t){let n;e.addEventListener("mouseenter",i,!1);function i(){n=requestAnimationFrame(l),e.addEventListener("mouseleave",s,!1)}function s(){cancelAnimationFrame(n),setTimeout(()=>{cancelAnimationFrame(n)},50),e.removeEventListener("mouseleave",s,!1)}function l(){n=requestAnimationFrame(l),typeof t=="function"&&t()}}const Et=6;function hi(e,t,n,i,s){const l=n.length;let a=0,m=[],r=-1,c,h={close:T},f=!1,u=document.createElement("div");u.className="sub-menu";let p=document.createElement("div");p.className="context-menu-scroll-button top",p.innerHTML=ui(),u.appendChild(p);let d=document.createElement("div");d.className="context-menu-scroll-button bottom",d.innerHTML=Hn(),u.appendChild(d);let v=document.createElement("div");v.tabIndex=-1,v.className="context-menu-inner",v.onkeydown=M,v.addEventListener("scroll",()=>{x()},!1);function x(){v.scrollTop<=10?p.classList.remove("show"):p.classList.add("show"),v.scrollTop+v.getBoundingClientRect().height>=v.scrollHeight-10?d.classList.remove("show"):d.classList.add("show")}function w(){v.scrollTop+=4}function y(){v.scrollTop-=4}In(p,y),In(d,w),u.appendChild(v),t.element.appendChild(u);for(let b=0;b<l;b++){const g=n[b];if(!f&&F(g.shortcut)&&(f=!0),g.divider){let N=document.createElement("div");N.className="menu-item-divider",v.appendChild(N)}else{let N=fi(g,a,{onEnter:i,onFocus:R,onHover:B});v.appendChild(N.element),typeof g.children<"u"&&g.children!==null&&g.children instanceof Array&&g.children.length>0&&!g.disabled&&hi(u,N,g.children,i,L),m.push(N),a+=1}}f&&u.classList.add("has-shortcut");function L(b){c=b}function B(){H()}t.element.addEventListener("keydown",b=>{(b.key===Ee.ArrowRight||b.key===Ee.Enter)&&(b.stopPropagation(),V(!0))},!1),t.element.addEventListener("mouseenter",b=>{b.stopPropagation(),V(!1)},!1);function M(b){if(b.key===Ee.ArrowLeft&&(b.stopPropagation(),u.classList.remove("show"),t.setActive(!1),t.element.focus()),b.key===Ee.ArrowRight)b.stopPropagation(),r===-1&&(r=0,m[r].element.focus());else if(b.key===Ee.ArrowUp){if(b.stopPropagation(),b.preventDefault(),r===-1)r=m.length-1,m[r].element.focus();else{let g=m[r-1];g?g.element.focus():m[m.length-1].element.focus()}H()}else if(b.key===Ee.ArrowDown){if(b.stopPropagation(),b.preventDefault(),r===-1)r=0,m[r].element.focus();else{let g=m[r+1];g?g.element.focus():m[0].element.focus()}H()}}function R(b){r=b}let O;function V(b){const g=window.innerWidth,N=window.innerHeight;t.setActive(!0),u.classList.add("show");const I=e.getBoundingClientRect(),E=t.element.getBoundingClientRect();let C=I.left+I.width-Et,k=E.top+2,D=u.getBoundingClientRect();O||(O=D);let S=v.getBoundingClientRect();I.left+I.width+D.width>g&&(C=I.left-D.width+Et),k+D.height>=N?k=N-D.height-Et/2:k-=Et,S.height>=N&&(k=Et,u.style.height=N-20+"px"),S=v.getBoundingClientRect(),v.scrollHeight>S.height&&(u.style.width=O.width+"px",v.style.width=O.width+20+"px"),u.style.top=k+"px",u.style.left=C+"px",x(),b&&m[0].element.focus(),s(h)}function H(){c&&c.close()}function T(){t.setActive(!1),u.classList.remove("show"),H()}return h}function qt(e,t,n=[],i=!1,s,l=!0,a){window.lastContextMenu&&window.lastContextMenu.close(),window.contextMenuDirectionLTR=!0;const m=window.innerWidth,r=window.innerHeight;let c=!1,h,f=[],u=-1,p,d=0;const v=n.length;function x(S){if(S.key===Ee.ArrowRight)u===-1&&(u=0,f[u].element.focus());else if(S.key===Ee.ArrowUp){if(S.preventDefault(),u===-1)u=f.length-1,f[u].element.focus();else{let $=f[u-1];$?$.element.focus():f[f.length-1].element.focus()}y()}else if(S.key===Ee.ArrowDown){if(S.preventDefault(),u===-1)u=0,f[u].element.focus();else{let $=f[u+1];$?$.element.focus():f[0].element.focus()}y()}else S.key===Ee.Escape&&k()}function w(S){u=S}function y(){p&&p.close()}function L(){y()}let B=o("div",{className:"context-menu-scroll-button top",innerHTML:ui()}),M=o("div",{className:"context-menu-scroll-button bottom",innerHTML:Hn()});h=o("div",{tabIndex:-1,className:"context-menu"+(F(a)?" "+a:"")},[B,M]);let R=o("div",{tabIndex:-1,className:"context-menu-inner",onkeydown:x,onscroll:()=>{O()}});function O(){R.scrollTop<=10?B.classList.remove("show"):B.classList.add("show");let S=R.getBoundingClientRect();R.scrollTop+S.height>=R.scrollHeight-10?M.classList.remove("show"):M.classList.add("show")}function V(){R.scrollTop+=4}function H(){R.scrollTop-=4}In(B,H),In(M,V),h.appendChild(R),document.body.appendChild(h),h.focus();for(let S=0;S<v;S++){const $=n[S];if(!c&&F($.shortcut)&&(c=!0),$.divider){let P=o("div",{className:"menu-item-divider"});R.appendChild(P)}else{let P=fi($,d,{onEnter:N,onFocus:w,onHover:L});R.appendChild(P.element),typeof $.children<"u"&&$.children!==null&&$.children instanceof Array&&$.children.length>0&&!$.disabled&&hi(h,P,$.children,N,D),f.push(P),d+=1}}c&&h.classList.add("has-shortcut"),setTimeout(()=>{i?f[0].element.focus():R.focus()},0);let T={top:e.top,left:e.left};const b=h.getBoundingClientRect();let g=R.getBoundingClientRect();T.left+b.width>m&&(T.left=T.left-b.width),T.top+b.height>r&&(T.top=r-b.height-Et/2),g.height>r&&(T.top=Et,h.style.height=r-20+"px"),g=R.getBoundingClientRect(),R.scrollHeight>g.height&&(h.style.width=b.width+"px",R.style.width=b.width+20+"px"),h.style.left=T.left+"px",h.style.top=T.top+"px",O();function N(){k()}function I(){k()}window.addEventListener("resize",I,!1),document.addEventListener("mousedown",E,!1),window.addEventListener("touchstart",C,!1);function E(S){h.contains(S.target)||k()}function C(S){h.contains(S.target)||k()}function k(){window.removeEventListener("scroll",I,!1),document.removeEventListener("mousedown",E,!1),window.removeEventListener("touchstart",C,!1),h.remove(),l&&t.focus(),window.lastContextMenu=null,s&&s()}function D(S){p=S}window.lastContextMenu={close:k}}const at=so("env",{USER_NAME:"User 1",USER_HOME:"c:/Users/User 1",VERSION:"10.0.23711.1466"}),ft="imgs/icons/",ze={thisPC:ft+"Computer.png",driverC:ft+"Drives/Hardrive%20Windows.png",user:ft+"User.png",desktop:ft+"Desktop.png",document:ft+"Folder%20Documents.png",download:ft+"Folder%20Downloads.png",pictures:ft+"Folder%20Pictures.png",music:ft+"Folder%20Music.png",videos:ft+"Folder%20Videos.png"},vt="imgs/icons/Folder.png",{USER_HOME:Yt}=at.getState("USER_HOME"),bl=[{text:"Documents",icon:"imgs/icons/Folder%20Documents.png",iconType:"image",onclick:()=>{Fe("explorer",`${Yt}/Documents`)}},{text:"Downloads",icon:"imgs/icons/Folder%20Downloads.png",iconType:"image",onclick:()=>{Fe("explorer",`${Yt}/Downloads`)}},{text:"Music",icon:"imgs/icons/Library%20Music.png",iconType:"image",onclick:()=>{Fe("explorer",`${Yt}/Music`)}},{text:"Pictures",icon:"imgs/icons/Libray%20Pictures.png",iconType:"image",onclick:()=>{Fe("explorer",`${Yt}/Pictures`)}},{text:"Videos",icon:"imgs/icons/Library%20Videos.png",iconType:"image",onclick:()=>{Fe("explorer",`${Yt}/Videos`)}}],kl=[{text:"Accounts",icon:"imgs/user.gif",iconType:"image",onclick:()=>{rn({type:"app",...Y.settings,args:"accounts"})}},{text:"Settings",icon:oo,onclick:()=>{Fe("settings")}},{text:"Power",icon:Is,preventClose:!0,onclick:e=>{qt({top:e.y,left:e.x},e.currentTarget,[{text:"Sleep"},{text:"Restart"},{text:"Shutdown"}])}}];function Nl(e){return o("div",{className:"start-menu-column start-menu-actions h-full flex flex-col scrollable scroll-y"},[o("div",{className:"start-menu-action-list start-menu-actions-top"},bl.map(t=>{const n={className:"start-menu-action-item-icon",style:{},innerHTML:""};return t.iconType==="image"?n.style.backgroundImage=`url(${t.icon})`:n.innerHTML=t.icon,o("div",{className:"start-menu-action-item flex items-center",onclick:()=>{t.onclick(),F(e)&&e(t)}},[o("div",n),o("div",null,t.text)])})),o("div",{className:"start-menu-action-list start-menu-actions-bottom"},kl.map(t=>{const n={className:"start-menu-action-item-icon",style:{},innerHTML:""};return t.iconType==="image"?n.style.backgroundImage=`url(${t.icon})`:n.innerHTML=t.icon,o("div",{className:"start-menu-action-item flex items-center",onclick:i=>{t.onclick(i),F(e)&&e(t)}},[o("div",n),o("div",null,t.text)])}))])}function Cl(e){const t=us();return o("div",{className:"start-menu-column  start-menu-apps-list-container w-full h-full flex flex-col flex-1"},[o("div",{className:"start-menu-apps-list w-full h-full scrollable scroll-y"},Object.keys(t).map((i,s)=>o("div",{key:"app-item"+s,className:"start-menu-apps-list-section"},[o("div",{className:"start-menu-apps-list-label flex items-center"},i),o("div",{className:"start-menu-apps-list-items"},t[i].map((l,a)=>o("div",{key:"app-item"+a,className:"start-menu-apps-list-item flex items-center",onclick:e.bind(null,l)},[o("div",{className:"start-menu-apps-list-item-icon flex-shrink-0",style:{backgroundImage:`url(${l.icon})`}}),o("div",{className:"start-menu-apps-list-item-name"},o("div",{className:"text-ellipsis"},l.productName))])))])))])}function Ll(e){let t;function n(l){t.toggleShow(),Fe(l.name)}function i(){}function s(l){F(l)&&!l.preventClose&&t.toggleShow()}return t=Ht({noBorder:!0,width:524,height:(e==null?void 0:e.height)||540,className:"start-menu"},o("div",{className:"w-full h-full flex"},[Nl(s),Cl(n)]),{onHide:i}),t}const Do=Ll();function Tl(){let e=o("div",{className:"window-container",style:{position:"fixed",top:0,left:0}});document.body.appendChild(e);function t(l){e.appendChild(l)}function n(){e.style.display="none"}function i(){e.style.removeProperty("display")}function s(l){e.classList[l?"add":"remove"]("fullscreen")}return{addWindow:t,show:i,hide:n,toogleFullScreen:s}}const Sn=Tl();function Il(e){let t;function n(l){const a=l.target;t!=null&&t.contains(a)||(s(),e.onClose&&e.onClose())}function i(){Sn.hide(),Ve.showDesktopIcons(!1);const l=Pl().toReversed();t=o("div",{className:"taskview flex flex-col",style:{transform:"scale(1.2)"},onclick(){s()}},[o("div",{className:"taskview-header flex-shrink-0 flex items-center",style:{paddingInline:"40px"}},[o("div",{className:"taskview-header-button flex items-center",onclick(a){a.stopPropagation()}},[o("div",{className:"taskview-header-button-icon flex items-center content-center",innerHTML:io(),style:{width:"24px",height:"24px"}}),o("div",{className:"taskview-header-button-text",style:{marginLeft:"10px"}},"New windows group")])]),o("div",{className:"taskview-app-items flex-1"},l.map(a=>{const m=parseInt(a.element.style.width),r=parseInt(a.element.style.height),c=a.element.cloneNode(!0);c.classList.add("taskbar-app-item-window"),c.style.pointerEvents="none";const h=Array.from(a.element.getElementsByTagName("video")),f=Array.from(c.getElementsByTagName("video")),u=Array.from(c.getElementsByTagName("audio"));for(let w=0;w<f.length;w++){const y=f[w];y.muted=!0,y.pause(),y.controls=!1,y.currentTime=h[w].currentTime}for(let w of u)w.muted=!0,w.pause(),w.controls=!1;let p=160/r,d=!1;p*m>=400&&(d=!0,p=400/m);const v=Math.round(p*m);c.style.transform=`scale(${p})`;const x={width:v+"px"};return d&&(x.height=Math.round(p*r)+"px"),o("div",{className:"taskview-app-item",onclick(w){w.stopPropagation(),a.show(),a.focus(),s()}},[o("div",{className:"taskview-app-item-header flex",style:{marginBottom:"5px",width:v+"px"}},[o("div",{className:"taskview-app-item-icon flex-shrink-0",style:{width:"32px",height:"32px",backgroundImage:`url(${a.icon})`,backgroundRepeat:"no-repeat",backgroundSize:"24px",backgroundPosition:"center"}}),o("div",{className:"taskview-app-item-text flex items-center"},o("div",{title:a.title,className:"text-ellipsis line-clamp-1"},a.title)),o("div",{title:"Close",className:"taskview-app-item-close flex items-center content-center flex-shrink-0",style:{width:"32px",height:"32px",marginLeft:"auto"},innerHTML:ti,onclick(w){w.stopPropagation(),a.close(),s()}})]),o("div",{className:"taskview-app-thumbnail",style:x},c)])}))]),document.body.appendChild(t),document.addEventListener("click",n,!1),setTimeout(()=>{t.style.transform="scale(1)"},0),e.onShow&&e.onShow()}function s(){document.removeEventListener("click",n,!1),F(t)&&re(t,{transform:"scale(1.5)",opacity:"0"}),Sn.show(),fe.getState("showDesktopIcons").showDesktopIcons&&Ve.showDesktopIcons(!0),setTimeout(()=>{t==null||t.remove(),t=null,e.onClose&&e.onClose()},150)}return{element:t,show:i,close:s}}function Sl(){let e=!1,t=Il({onClose:n});function n(){e=!1}return{element:o("div",{title:"Task View",className:"taskbar-item h-full flex-shrink-0",onclick:s=>{s.stopPropagation(),ct(),Ce(G.closePopup),e?(e=!1,t.close()):(e=!0,t.show())},onmousedown:s=>s.stopPropagation(),ontouchstart(s){s.stopPropagation()}},o("div",{className:"taskbar-item-button flex items-center content-center h-full",style:{width:"40px"},innerHTML:$s(20)}))}}function pi(e){let t=e.inputMode||"text",n,i;const s={};e.width&&(s.width=Zn(e.width)?e.width+"px":e.width.toString());function l(u){u.preventDefault(),i.classList.add("focus"),se(e.onFocus)&&e.onFocus()}function a(){i.classList.remove("focus"),se(e.onBlur)&&e.onBlur()}i=o("div",{className:"textbox flex items-center",style:s},[n=o("input",{name:"search-input",autocomplete:"off",autofill:"none",autofocus:e.autofocus,inputMode:t,type:e.type||"text",className:"textbox-input",placeholder:e.placeholder,oninput:m,onfocus:l,onblur:a,onkeydown(u){u.key==="Enter"&&(u.preventDefault(),se(e.onEnter)&&e.onEnter(n.value))}}),typeof e.optional=="function"?e.optional(e):e.optional]);function m(u){u.preventDefault(),typeof e.onChange=="function"&&e.onChange(n.value)}function r(u){n.value=u}function c(u){n.placeholder=u}function h(){n.focus()}function f(){n.value=""}return{element:i,setValue:r,setPlaceHolder:c,focus:h,clear:f}}function An(e){const t=pi({placeholder:e.placeholder,inputMode:"text",value:e.value,onChange:e.onChange,optional:()=>o("div",{className:"search-box-icon flex items-center content-center",innerHTML:oi}),...e});return{element:t.element,setPlaceHolder:t.setPlaceHolder,focus:t.focus,clear:t.clear}}function El(){let e=An({placeholder:"Type here to search"});const t=[Y.settings,Y.notepad,Y.explorer,Y.photos,Y.calculator];function n(){e.focus()}function i(){e.clear()}let s=Ht({className:"search-popup"},o("div",{className:"search-container flex flex-col p-20"},[o("div",{className:"search-popup-top flex-1"},[o("div",{style:{fontWeight:"bold"}},"Top Apps"),o("div",{className:"search-popup-apps"},[t.map(l=>o("div",{className:"search-popup-app-item",onclick(){s.close(),rn({...l,type:"app"})}},[o("div",{className:"search-popup-app-item-icon",style:{backgroundImage:`url(${l.icon})`}}),o("div",{className:"search-popup-app-item-text"},l.productName)]))])]),o("div",{className:"search-popup-bottom"},[o("div",{className:"search-popup-filter flex"},[o("div",{className:"search-popup-filter-item selected"},"All"),o("div",{className:"search-popup-filter-item"},"Apps"),o("div",{className:"search-popup-filter-item"},"Settings"),o("div",{className:"search-popup-filter-item"},"Folders"),o("div",{className:"search-popup-filter-item"},"Documents"),o("div",{className:"search-popup-filter-item"},"Web"),o("div",{className:"search-popup-filter-item"},"Photos"),o("div",{className:"search-popup-filter-item"},"Music"),o("div",{className:"search-popup-filter-item"},"Videos")]),o("div",{className:"search-popup-input"},e.element)])]),{onShow:n,onHide:i});return s}function Ml(){let e=El();const t=o("div",{title:"Search",className:"taskbar-item h-full flex-shrink-0",onclick:()=>{ct(),Ce(G.closePopup,e.id),e.toggleShow({left:Math.round(t.getBoundingClientRect().left)})},onmousedown:n=>n.stopPropagation(),ontouchstart(n){n.stopPropagation()}},o("div",{className:"taskbar-item-button taskbar-item-button-search flex items-center content-center h-full",style:{width:"40px"},innerHTML:oi}));return{element:t}}function Dl(){Ce(G.showDesktopHover)}function Bl(){Ce(G.showDesktopOut)}function gi(){Ce(G.showDesktop)}function zl(){function e(){ct(),Ce(G.closePopup,Do.id),Do.toggleShow()}function t(s){s.stopPropagation(),s.preventDefault(),qt({top:s.y,left:s.x},s.currentTarget,[{text:"Apps and Features",onClick:()=>{Fe(Y.settings.name,"apps")}},{text:"Mobility Center"},{text:"Power Options"},{text:"Event Viewer"},{text:"System"},{text:"Device Manager"},{text:"Network Connection"},{text:"Disk Management"},{text:"Computer Management"},{text:"Command Prompt(Admin)",onClick:()=>{Fe(Y.terminal.name)}},{divider:!0},{text:"Task Manager"},{text:"Settings",onClick:()=>{Fe(Y.settings.name)}},{text:"File Explorer",onClick:()=>{Fe(Y.explorer.name)}},{text:"Search"},{text:"Run"},{divider:!0},{text:"Shutdown or signout",children:[{text:"Sign out"},{text:"Sleep"},{text:"Shut down"},{text:"Restart"}]},{text:"Desktop",onClick:()=>{gi()}}])}const i=[{name:"startMenu",item:al({isSystemApp:!0,name:"start-menu",productName:"Start",icon:Ns,iconType:"svg"},{onclick:e,oncontextmenu:t})}].map(s=>s.item.element);return o("div",{className:"taskbar-app-items h-full flex flex-shrink-0 items-center content-center"},i)}function Hl(){let e=[],t=localStorage.getItem("taskbarItems");if(typeof t>"u"||t===null)e=[{name:"explorer",item:xt(Y.explorer,{onRemove:s}),pinned:!0},{name:"settings",item:xt(Y.settings,{onRemove:s}),pinned:!0},{name:"notepad",item:xt(Y.notepad,{onRemove:s}),pinned:!0},{name:"calculator",item:xt(Y.calculator,{onRemove:s}),pinned:!0},{name:"photos",item:xt(Y.photos,{onRemove:s}),pinned:!0},{name:"cmd",item:xt(Y.cmd,{onRemove:s}),pinned:!0}];else try{t&&(t=JSON.parse(t),t instanceof Array&&(e=t.map(d=>({name:d,item:xt(Y[d],{onRemove:s}),pinned:!0}))))}catch{}let n;const i=o("div",{className:"w-full h-full flex content-center"},[n=o("div",{className:"taskbar-app-items h-full flex items-center content-center"},e.map(d=>d.item.element))]);function s(){}function l(d){return e.find(v=>v.name===d)}function a(d,v){const x={name:d,item:v};return e.push(x),n.appendChild(v.element),x}function m(d){e=e.filter(v=>v.name!==d)}function r(d,v,x){d.item.addInstance&&d.item.addInstance(v,x)}function c(d,v,x){const w=l(d);if(w)r(w,v,x);else{let y=xt({name:x.name,productName:x.productName,icon:x.icon});const L=a(d,y);r(L,v,x),e.push({name:d,item:y})}}function h(d,v){const x=l(d);x&&(x.item.removeInstance(v),x.item.getInstances().length||(x.pinned?x.item.removeActive(v):(x.item.remove(),m(d))))}function f(d,v){const x=l(d);x&&x.item.setActive(v)}function u(d,v){const x=l(d);x&&x.item.removeActive(v)}function p(d){return l(d).item.element.getBoundingClientRect()}return{element:i,addInstance:c,removeAppItem:m,removeInstance:h,setActiveWindow:f,removeActiveWindow:u,getAppItemBounds:p}}function Al(){const e=Hl(),t=o("div",{className:"taskbar fixed bottom w-full",style:{height:We+"px"}},o("div",{className:"taskbar-inner flex h-full",oncontextmenu:n},[o("div",{className:"taskbar-left h-full flex-1 flex-shrink-0 flex items-center"},[zl(),ul().element,fl().element,Sl().element,Ml().element]),o("div",{className:"taskbar-center flex-2 h-full"},e.element),o("div",{className:"taskbar-right h-full flex-1 flex-shrink-0 relative flex items-center content-end",style:{paddingRight:"6px"}},[o("div",{title:"Show hidden icons",className:"taskbar-item flex items-center content-center flex-shrink-0 taskbar-item-more",innerHTML:ni}),o("div",{className:"taskbar-item flex items-center content-center flex-shrink-0",onmousedown:i=>i.stopPropagation(),ontouchstart(i){i.stopPropagation()},onclick:()=>{ct(),Ce(G.closePopup,Mo.id),Mo.toggleShow()}},[di({id:"taskbar-volume-button",className:"taskbar-item-button taskbar-item-button-volume flex items-center content-center h-full flex-shrink-0"}).element,o("div",{className:"taskbar-item-button flex items-center content-center h-full flex-shrink-0",style:{width:We+"px"},innerHTML:Jo}),o("div",{className:"taskbar-item-button flex items-center content-center h-full flex-shrink-0",style:{width:We+"px"},innerHTML:Qo})]),cl().element,o("div",{className:"show-desktop flex-shrink-0",onmouseover:Dl,onmouseout:Bl,onclick:gi})])]));function n(i){qt({top:i.y,left:i.x},i.currentTarget,[{text:"Taskbar Settings",onClick:()=>{Fe("settings","personalization/taskbar")}},{text:"Lock the taskbar",checked:!0,onClick:()=>{console.log("Lock taskbar")}}])}return lt(document.body,t),e}const Wt=Al(),$e=[],st=[];let sn=[],kn=!1;function Pl(){return st}function Rl(e){const t=sn.findIndex(n=>n.window.id===e);t>-1&&sn.splice(t,1)}function Fl(e){const t=st.findIndex(n=>n.id===e.id);t>-1&&st.splice(t,1),st.push(e)}function $l(e){const t=st.findIndex(n=>n.id===e);if(t>-1&&(st.splice(t,1),st.length>0)){const n=st[st.length-1];n.isVisible()&&n.focus()}}function lo(e){const t=$e.length;for(let n=0;n<t;n++)e($e[n])}function ao(e){return $e.find(t=>t.appName===e)}function Wl(e,t,n){kn=!1;const i=$e.length;for(let s=0;s<i;s++){const l=$e[s];l.window.decrementZIndex(),l.window.blur()}$e.push({appName:e,id:t,window:n}),Wt.addInstance(e,t,n)}function Ol(e,t){const n=$e.findIndex(i=>i.id===t);n>-1&&($e.splice(n,1),Wt.removeInstance(e,t)),$l(t),Rl(t)}function Vl(e,t,n){n.restoreZIndex(),Fl(n);const i=$e.length;for(let s=0;s<i;s++){const l=$e[s];l.id!==t&&(l.window.decrementZIndex(),l.window.blur())}}function Ul(e){const t=$e.length;for(let n=0;n<t;n++){const i=$e[n];i.id!==e?i.window.isVisible()&&i.window.makeTransparent():i.window.element.classList.add("top-view")}}function _l(e){if(e){const t=$e.length;for(let n=0;n<t;n++){const i=$e[n];i.id!==e?i.window.isVisible()&&i.window.removeTransparent():i.window.element.classList.remove("top-view")}}else{const t=$e.length;for(let n=0;n<t;n++){const i=$e[n];i.window.isVisible()&&i.window.removeTransparent()}}}function jl(){lo(e=>{e.window.blur()})}function Xl(){const e=$e.some(t=>t.window.isFullScreen);Sn.toogleFullScreen(e)}window.addEventListener("resize",()=>{const e=$e.length;for(let t=0;t<e;t++){const n=$e[t];n.window.isMaximized()&&n.window.maximize()}},!1);function ql(){if(!kn)sn=$e.filter(e=>e.window.isVisible()),sn.forEach(e=>{e.window.removeTransparent(),e.window.hide()});else{sn.forEach(t=>{t.window.removeTransparent(),t.window.show()});const e=st[st.length-1];e&&e.isVisible()&&e.focus()}kn=!kn}Me(G.viewWindow,"window-manager",e=>{Ul(e.id)});Me(G.restoreView,"window-manager",e=>{_l(e.id)});Me(G.showDesktopHover,"window-manager",()=>{lo(e=>{e.window.isVisible()&&e.window.makeTransparent()})});Me(G.showDesktopOut,"window-manager",()=>{lo(e=>{e.window.isVisible()&&e.window.removeTransparent()})});Me(G.showDesktop,"window-manager",()=>{ql()});Me(G.blurAllWindow,"window-manager",()=>{jl()});function Kl(){let e=0,t=0;function n(){e=window.innerWidth,t=window.innerHeight}return n(),window.addEventListener("resize",n,!1),{get width(){return e},get height(){return t}}}let ke=Kl();const Bo=1e6,Xe=30;function ut(e){let t={...e};const n={};if(e.singleInstance){let z=ao(e.name);if(z)return z.window.executeListeners("secondInstance",e.args),z.window}let i,s=Bo;const l=pn(32);let a,m=!1,r=!1,c=!1,h=!1,f=!1,u=!1,p="",d=!1,v=!1,x=!1,w,y=!1;function L(z,Q){n[z]||(n[z]=[]),n[z].push(Q)}function B(z,Q){const Se=n[z];if(Se)for(let Je=0;Je<Se.length;Je++)Se[Je](Q)}function M(z,Q){if(F(n[z])){const Se=n[z].findIndex(Je=>Je.name===Q.name);Se>-1&&n[z].splice(Se,1)}}let R=e.title||"",O=ys({icon:e.icon,hideIcon:e.hideIcon,title:e.title,hideTitle:e.hideTitle,disableMaximize:e.disableMaximize,maximized:e.maximized,autoHide:e.autoHideTitleBar,content:e.titlebarContent,stretchTitlebarContent:e.stretchTitlebarContent},{onMinimizeButtonClick:be,onMaximizeButtonClick:gn,onCloseButtonClick:Yi,onVisible:()=>B("ontitlebarshow"),onHidden:()=>B("ontitlebarhide")}),V={top:0,left:0,width:0,height:0};const H={zIndex:s.toString()};let T=0,b=0,g=300,N=200,I=300,E=200,C=!1,k=0;e.keepAspectRatio&&(C=e.keepAspectRatio),e.minWidth&&(I=e.minWidth),e.minHeight&&(E=e.minHeight),e.top&&(T=Number(e.top)),e.left&&(b=Number(e.left)),e.width&&(g=Number(e.width),g<I&&(g=I)),e.height&&(N=Number(e.height),N<E&&(N=E)),e.center&&(T=Math.round((window.innerHeight-N-We)/2),b=Math.round((window.innerWidth-g)/2)),C&&(k=g/N),H.top=T+"px",H.left=b+"px",H.minWidth=I+"px",H.width=g+"px",H.height=N+"px",H.minHeight=E+"px",V={top:T,left:b,width:g,height:N};let D="";e.noBorder&&(D+=" no-border"),e.className&&(D+=" "+e.className);let S="window-content";e.fluidContent&&(S+=" fluid"),e.transprencyContent||(S+=" theme-background");let $,P,A,_,U,j,K,ce,xe,De,q,J,W,de={top:!1,left:!1,right:!1,topLeft:!1,topRight:!1,bottomLeft:!1,bottomRight:!1},He=!0;const Z=()=>{let Q=[{text:"Restore",icon:o("i",{className:"window-titlebar-context-icon",innerHTML:Xn}),disabled:!r,onClick:()=>{Pt()},emphasis:r},{text:"Move",disabled:!0},{text:"Size",disabled:!0},{text:"Minimize",icon:o("i",{className:"window-titlebar-context-icon",innerHTML:Yo}),onClick:()=>{vn()}},{text:"Maximize",icon:o("i",{className:"window-titlebar-context-icon",innerHTML:qn}),onClick:()=>{Pt()},disabled:e.disableMaximize||r},{divider:!0},{text:"Close",icon:o("i",{className:"window-titlebar-context-icon",innerHTML:Zo}),onClick:()=>{On()},shortcut:"Alt+X"}];return F(e.extendContextMenu)&&(Q=Q.concat(e.extendContextMenu)),Q},ee=e.disableResize?" disabled":"";W=o("div",{tabIndex:-1,className:"window"+D,style:H,id:l},[o("div",{className:"window-background absolute w-full h-full"}),o("div",{className:"window-inner relative w-full h-full"},[O.element,a=o("div",{className:S})]),$=o("div",{"data-resize":"t",className:"window-resize-handle window-resize-horizontal window-resize-top"+ee}),A=o("div",{"data-resize":"b",className:"window-resize-handle window-resize-horizontal window-resize-bottom"+ee}),P=o("div",{"data-resize":"l",className:"window-resize-handle window-resize-vertical window-resize-left"+ee}),_=o("div",{"data-resize":"r",className:"window-resize-handle window-resize-vertical window-resize-right"+ee}),U=o("div",{"data-resize":"tl",className:"window-resize-handle window-resize-conner window-resize-nw window-resize-tl window-resize-tl-v"+ee}),j=o("div",{"data-resize":"tl",className:"window-resize-handle window-resize-conner window-resize-nw window-resize-tl window-resize-tl-h"+ee}),xe=o("div",{"data-resize":"br",className:"window-resize-handle window-resize-conner window-resize-nw window-resize-br window-resize-br-v"+ee}),De=o("div",{"data-resize":"br",className:"window-resize-handle window-resize-conner window-resize-nw window-resize-br window-resize-br-h"+ee}),K=o("div",{"data-resize":"bl",className:"window-resize-handle window-resize-conner window-resize-ne window-resize-bl window-resize-bl-v"+ee}),ce=o("div",{"data-resize":"bl",className:"window-resize-handle window-resize-conner window-resize-ne window-resize-bl window-resize-bl-h"+ee}),q=o("div",{"data-resize":"tr",className:"window-resize-handle window-resize-conner window-resize-ne window-resize-tr window-resize-tr-v"+ee}),J=o("div",{"data-resize":"tr",className:"window-resize-handle window-resize-conner window-resize-ne window-resize-tr window-resize-tr-h"+ee})]),W.addEventListener("customdrop",z=>{B("customdrop",z.detail)},!1),typeof e.titlebarHeight=="number"&&e.titlebarHeight>0&&ge(e.titlebarHeight);function ge(z){W.style.setProperty("--titlebar-height",z+"px")}Sn.addWindow(W);let le=!1;W.addEventListener("animationend",()=>{le||(B("ready"),le=!0),B("animationend")});let ve=new ResizeObserver(z=>{if(!y&&!v){if(r||u){const Q=z[0].contentRect;T=Q.top,b=Q.left,g=Q.width,N=Q.height}c||B("passiveResize")}});ve.observe(W);let ye;e.autoHideTitleBar&&(W.addEventListener("mouseover",X,!1),W.addEventListener("mouseout",oe,!1),W.addEventListener("mousemove",ne,!1)),W.addEventListener("mousedown",Ae,!1),W.addEventListener("touchstart",Ae,{passive:!1});function X(){ye&&clearTimeout(ye),O.setAutoHide(!1),x&&O.setAutoHide(!0)}function ne(){ye&&clearTimeout(ye),O.setAutoHide(!1),ye=setTimeout(()=>{x&&O.setAutoHide(!0)},100)}function oe(){ye&&clearTimeout(ye),x&&O.setAutoHide(!0)}function Te(z){x=z,O.setAutoHide(z)}function ue(z){rt(a),lt(a,z),Rn()}function je(z,Q){let Se=[Qe(z,$,C,k,Q),Qe(z,A,C,k,Q),Qe(z,P,C,k,Q),Qe(z,_,C,k,Q),Qe(z,U,C,k,Q),Qe(z,j,C,k,Q),Qe(z,K,C,k,Q),Qe(z,ce,C,k,Q),Qe(z,xe,C,k,Q),Qe(z,De,C,k,Q),Qe(z,q,C,k,Q),Qe(z,J,C,k,Q)];function Je(Un){for(let It=0;It<Se.length;It++)Se[It].setAspectRatio(Un)}function Vn(Un){for(let It=0;It<Se.length;It++)Se[It].setKeepAspectRatio(Un)}return{setAspectRatio:Je,setKeepAspectRatio:Vn}}function we(){y=!1,V=Tt(),B("resizeend"),vo()}e.disableResize||(w=je(W,{onResizeStart:()=>B("resizestart"),onResize:z=>{y=!0,T=z.top,b=z.left,g=z.width,N=z.height,B("resize",{width:g,height:N})},onResizeEnd:we})),document.addEventListener("mousedown",me,!1),window.addEventListener("touchstart",he,!1);function te(z){W.contains(z)||ko()}function me(z){te(z.target)}function he(z){te(z.target)}function Ae(){Kt()}function be(){vn()}function ae(){B("minimize")}function pe(){B("maximize")}function Ct(){W.offsetWidth,r||W.classList.remove("window-maximized"),B("restore")}function gn(){Pt()}function Rn(){Array.from(W.querySelectorAll("[drag-region=drag]")).forEach(Q=>{Q.oncontextmenu=Vi,Q.ondblclick=xo,Go(W,Q,{onDragStart:()=>B("dragstart"),onDrag:Ri,onDragEnd:vo,onTouch:la(xo)})})}Rn();function Lt(z,Q){de[z]||(de[z]=!0,W.classList.add("max-z-index"),Object.keys(de).forEach(Se=>{Se!==z&&(de[Se]=!1)}),He=!1,Q())}function Pi(z){He||(He=!0,W.classList.remove("max-z-index"),Object.keys(de).forEach(Q=>{de[Q]=!1}),z())}function Ri(z,Q){T=Q.top,b=Q.left,go(z),B("drag",z)}function go(z){setTimeout(()=>{if(r||d){const Q=Tt(),Se=Math.round((z.x-Q.left)/Q.width*V.width),Je=z.x-Se;let Vn=z.y-Q.top;ot({...V,top:r?0:z.y-Vn,left:Je}),d&&(d=!1,Wi()),r&&(r=!1,O.setMaximize(r),W.classList.remove("window-maximized"),B("unmaximize"))}},0),e.disableResize||(z.y<=0&&z.x<=Xe||z.x<=0&&z.y<=Xe?Lt(Ne.topLeft,()=>{p=Ne.topLeft,Ve.showShape(Ne.topLeft,V)}):z.y<=0&&z.x>=ke.width-Xe||z.x>=ke.width-1&&z.y<=Xe?Lt(Ne.topRight,()=>{p=Ne.topRight,Ve.showShape(Ne.topRight,V)}):z.y>=ke.height-We&&z.x<=Xe||z.x<=0&&z.y>=ke.height-We-Xe?Lt(Ne.bottomLeft,()=>{p=Ne.bottomLeft,Ve.showShape(Ne.bottomLeft,V)}):z.y>=ke.height-We&&z.x>=ke.width-Xe||z.x>=ke.width-1&&z.y>=ke.height-We-Xe?Lt(Ne.bottomRight,()=>{p=Ne.bottomRight,Ve.showShape(Ne.bottomRight,V)}):z.y<=0&&z.x>Xe&&z.x<ke.width-Xe?Lt(Ne.top,()=>{p=Ne.top,Ve.showShape(Ne.top,V)}):z.x<=0&&z.y>Xe&&z.y<ke.height-We-Xe?Lt(Ne.left,()=>{p=Ne.left,Ve.showShape(Ne.left,V)}):z.x>=ke.width-1&&z.y>Xe&&z.y<ke.height-We-Xe?Lt(Ne.right,()=>{p=Ne.right,Ve.showShape(Ne.right,V)}):Pi(()=>{p="",Ve.removeShape()}))}function Fi(){W.classList.add("window-restore-down"),setTimeout(()=>{W.classList.remove("window-restore-down")},100),B("unmaximize")}function $i(){W.offsetTop<0&&(W.style.top=0+"px"),window.innerHeight-W.offsetTop<We+Bt&&(W.style.top=window.innerHeight-(We+Bt)+"px"),W.offsetLeft+W.offsetWidth<30&&(W.style.left=-100+"px"),window.innerWidth-W.offsetLeft<30&&(W.style.left=window.innerWidth-100+"px")}function At(){W.classList.add("win-snap")}function Wi(){W.classList.remove("win-snap"),B("unSnap")}function vo(){wo(),B("dragend",V)}function wo(){if(!r&&!t.disableMaximize&&!t.disableResize){if(p!==""&&!e.disableMaximize){d=!0;let z=Math.floor(ke.width/2),Q=ke.height-We,Se=Math.floor(Q/2),Je=Q-Se;z=Math.max(z,I),Se=Math.max(Se,E),p===Ne.top?Pt(!0):p===Ne.left?(ot({top:0,left:0,width:z,height:Q}),At()):p===Ne.right?(ot({top:0,left:ke.width-z,width:z,height:Q}),At()):p===Ne.topLeft?(ot({top:0,left:0,width:z,height:Se}),At()):p===Ne.bottomLeft?(ot({top:Se,left:0,width:z,height:Je}),At()):p===Ne.bottomRight?(ot({top:Se,left:ke.width-z,width:z,height:Je}),At()):p===Ne.topRight&&(ot({top:0,left:ke.width-z,width:z,height:Se}),At()),B("snap")}else V=Tt(),$i();for(let z in de)if(de[z]){Ve.removeShape();break}}}function Fn(){p="",r=!0,e.disableMaximize||(ot({top:0,left:0,width:window.innerWidth,height:window.innerHeight-We}),W.classList.add("window-maximized"),pe())}function Oi(){r=!1,e.disableMaximize||(ot(V),W.classList.remove("window-maximized"),Fi())}function Pt(z){e.disableMaximize||(r=!r,r?(!z&&!d&&(V=Tt()),V.top<0&&(V.top=0),Fn()):Oi(),O.setMaximize(r),W.focus())}function xo(){Pt()}function Vi(z){z.preventDefault(),Kt(),qt({top:z.y,left:z.x},z.currentTarget,Z(),!1,()=>{setTimeout(()=>{W&&!c&&Kt()},10)},!1)}function ot(z){F(z.top)&&(T=z.top,W.style.top=z.top+"px"),F(z.left)&&(b=z.left,W.style.left=z.left+"px"),F(z.width)&&(g=z.width,W.style.width=z.width+"px"),F(z.height)&&(N=z.height,W.style.height=z.height+"px"),e.disableResize||w.setAspectRatio(g/N)}function Tt(){const z=W.getBoundingClientRect();return{top:z.top,left:z.left,width:z.width,height:z.height}}function Ui(z){g=z.width,N=z.height,W.style.width=z.width+"px",W.style.height=z.height+"px",e.disableResize||w.setAspectRatio(g/N)}function yo(){W.style.zIndex=s.toString()}function _i(){s-=1,yo()}function bo(){s=Bo,yo()}function $n(){W.classList.remove("top-view")}function Kt(){h||(W.focus(),W.classList.add("focus"),$n(),Vl(i.name,l,i),Wt.setActiveWindow(i.name,l),h=!0),setTimeout(()=>{B("focus",h)},0)}function ko(){h=!1,W.classList.remove("focus"),Wt.removeActiveWindow(i.name,l),B("blur")}function No(){W.classList.add("transparent"),m=!0}function Co(){W.classList.remove("transparent"),m=!1}function ji(){m?Co():No()}function Xi(){u=!u,u?(!r&&!d&&(V=Tt()),W.classList.add("fullscreen"),O.setVisible(!1)):(r||ot(V),O.setVisible(!0),W.classList.remove("fullscreen")),Xl(),B("fullscreen",u)}function qi(){return r}function Lo(){v=!1,W.classList.remove("show"),W.removeEventListener("animationend",Lo,!1)}function Wn(){W.classList.remove("minimized"),$n(),c?(W.classList.add("window-restored"),W.style.transform="translate3d(0px,0px,0px)",setTimeout(()=>{Ct(),W.classList.remove("window-restored"),W.style.removeProperty("transform")},300)):f||(v=!0,W.classList.add("show"),W.addEventListener("animationend",Lo,!1)),f=!0,c=!1,bo(),r&&Fn()}function vn(){$n();const z=Wt.getAppItemBounds(e.name);W.classList.remove("window-restored"),W.classList.remove("show"),W.classList.remove("focus"),W.classList.add("minimized");const Q=Tt();setTimeout(()=>{W.style.transform=`translate3d(${z.left-Q.left}px, ${z.top}px, 0) scale(0.2)`},0),f=!1,h=!1,c=!0,e.name,Wt.removeActiveWindow(e.name,l),ae()}function Ki(){f?vn():Wn()}function Yi(){On()}function On(){ve.disconnect(),document.removeEventListener("mousedown",me,!1),window.removeEventListener("touchstart",he,!1),F(W)&&(W.className="window closing",B("close"),v=!0,W.addEventListener("animationend",()=>{v=!1,O.element.remove(),W.remove(),W=void 0,Ol(e.name,l)}))}function Zi(){return f}function Gi(){return h}function Ji(z){t.icon=z,O.setIcon(z)}function Qi(z){R=z,O.setTitle(z)}function es(){return R}function ts(z){W.style.top=z.top+"px",W.style.left=z.left+"px"}function ns(){let z=Math.round((window.innerHeight-N-We)/2),Q=Math.round((window.innerWidth-g)/2);ts({top:z,left:Q})}function os(z){a.classList[z?"add":"remove"]("fluid")}return i={id:l,get icon(){return t.icon},get name(){return t.name},get productName(){return t.productName},get title(){return R},get isFullScreen(){return u},element:W,setContent:ue,show:Wn,hide:vn,titlebar:O,setAutoHideTitleBar:Te,setIcon:Ji,setTitle:Qi,getTitle:es,setMaximize:O.setMaximize,toggleMaximize:Pt,maximize:Fn,decrementZIndex:_i,restoreZIndex:bo,focus:Kt,blur:ko,makeTransparent:No,removeTransparent:Co,toggleTransprent:ji,toggleFullscreen:Xi,isMaximized:qi,close:On,toggleShow:Ki,isVisible:Zi,isFocused:Gi,getBounds:Tt,setBounds:ot,setSize:Ui,makeCenter:ns,addEventListener:L,executeListeners:B,removeListeners:M,updateDragHandle:Rn,setTitlebarHeight:ge,checkWindowSnap:go,setWindowSnap:wo,setFluidContent:os},se(e.content)&&ue(e.content(i)),Wl(e.name,l,i),Wn(),setTimeout(()=>{Kt()},0),i}function ro(e){let t;const n=ms({maxValue:e.maxValue,color:"#00b521"}),i=ut({name:"explorer-transfer",title:"Copying...",icon:Y.explorer.icon,width:500,height:120,minHeight:100,center:!0,disableMaximize:!0,disableResize:!0,content:()=>o("div",{className:"p-20 w-full h-full"},[t=o("div",{style:{marginBottom:"10px"},innerHTML:e.description}),o("div",{className:"w-full"},n.element)])});function s(r){n.setValue(r)}function l(r){i.setTitle(r)}function a(r){t.innerHTML=r}function m(){i.close()}return{setTitle:l,setDescription:a,setValue:s,close:m}}function co(e){let t,n,i,s,l,a=!0;function m(){const w={maxWidth:e.width+"px",maxHeight:e.height+"px",width:"100%",height:"100%"};if(F(e.parent)){const y=e.parent.getBoundingClientRect();w.top=Math.round((y.height-e.height)/2)+"px",w.left=Math.round((y.width-e.width)/2)+"px"}else w.top=Math.round((ke.height-Bt)/2-Math.round(e.height/2))+"px",w.left=ke.width/2-Math.round(e.width/2)+"px";t=o("div",{className:"dialog-content zoom-in focus relative flex flex-col",style:w},[o("div",{className:"dialog-titlebar flex"},[l=o("div",{className:"dialog-titlebar-text w-full flex items-center"},o("div",{className:"text-ellipsis line-clamp-1"},e.title)),o("div",{className:"dialog-titlebar-buttons flex-shrink-0 flex items-center",style:{marginLeft:"auto"}},[o("div",{title:"Close",className:"window-titlebar-button window-titlebar-close-button flex items-center content-center",innerHTML:ei,onclick:d})])]),o("div",{className:"w-full flex-1"},e.content),e.hideButtons?null:o("div",{className:"dialog-footer flex"},[n=o("button",{className:"dialog-footer-button button",onclick(){se(e.onOK)&&e.onOK(),x()}},"OK"),i=o("button",{className:"dialog-footer-button button",onclick:()=>{x()}},"Cancel")])]),s={ok:n,cancel:i},lt(F(e.parent)?e.parent:document.body,t),Go(t,l),document.addEventListener("mousedown",c,!1),window.addEventListener("touchstart",h,!1)}m();function r(w){t.contains(w)?a||(a=!0,f()):u()}function c(w){r(w.target)}function h(w){r(w.target)}function f(){t.classList.add("focus")}function u(){a=!1,t.classList.remove("focus")}function p(w){e.hideButtons||s[w].focus()}function d(){x()}function v(){t.remove()}function x(){t.classList.add("closing"),document.removeEventListener("mousedown",c,!1),a=!1,t.addEventListener("animationend",v,!1)}return{element:t,focusToButton:p,close:x}}function Yl(e){return co({title:e.title,width:e.width||300,height:e.height||160,content:e.content,onOK:e.onOK})}function Yn(e){let t=e.getDate().toString();return e.getDate()<10&&(t="0"+t),`${no[e.getDay()]}, ${bs[e.getMonth()]} ${t}, ${e.getFullYear()}`}function zt(e,t=!1){let n=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),l=n>=12?"PM":"AM";return n=n%12,n=n||12,i=i<10?"0"+i:i,s=s<10?"0"+s:s,n+":"+i+(t?":"+s:"")+" "+l}function ct(){window.lastContextMenu&&window.lastContextMenu.close()}function Zl(e,t){const n=o("img");n.onload=()=>{const i=n.naturalWidth,s=n.naturalHeight,l=i/s;t({width:i,height:s,ratio:l})},n.onerror=()=>{t()},Ke(e)?n.mySrc=e:n.src=e}function Pn(e){switch(e){case".jpg":case".png":case".webp":case".jfif":case".jpeg":return!0;default:return!1}}function zo(e){switch(e){case".mp3":case".aac":case".m4a":case".ogg":case".flac":case".wav":case".opus":return!0;default:return!1}}function dn(e){switch(e){case".mp4":case".mkv":case".webm":case".ogv":return!0;default:return!1}}function uo(e,t,n=200){const i=document.createElement("canvas"),s=i.getContext("2d"),l=new Image,a=n;l.height=a,l.src=e,l.onload=()=>{const m=l.naturalWidth/l.naturalHeight,r=Math.round(a*m);i.width=r,i.height=a,s.drawImage(l,0,0,r,a);const c=i.toDataURL("image/png");fetch(c).then(h=>h.blob()).then(h=>{const f=URL.createObjectURL(h);t(f,h,c,m)})}}function Gl(e,t,n=200){let i=o("video");i.onloadedmetadata=function(){i.currentTime=i.duration*.2},i.onseeked=()=>{const s=i.videoWidth,l=i.videoHeight,a=l>0&&s>0?s/l:16/9,m=Math.round(n*a),r=document.createElement("canvas");r.width=m,r.height=n,r.getContext("2d").drawImage(i,0,0,m,n);const h=r.toDataURL("image/jpeg");fetch(h).then(f=>f.blob()).then(f=>{const u=URL.createObjectURL(f);t(u,f,h,a)}),i=void 0},i.onerror=()=>{t(null,null,null,null),i=void 0},i.src=e}function mo(e,t=!0){document.documentElement.classList[e?"add":"remove"]("dark"),t&&wt({dark:e}),Ce(G.themeChange,e)}function fo(e,t=!0){document.documentElement.classList[e?"add":"remove"]("glass"),t&&wt({transparency:e}),Ce(G.transparentChange,e)}function F(e){return e!=null}function Zn(e){return typeof e=="number"}function se(e){return typeof e=="function"}function Gn(e,t){switch(e.style.backgroundColor="var(--theme-background)",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",t){case"fill":e.style.backgroundSize="cover";break;case"fit":e.style.backgroundSize="contain";break;case"stretch":e.style.backgroundSize="100% 100%";break;case"center":e.style.backgroundSize="cover";break;case"tile":e.style.backgroundSize="contain",e.style.backgroundRepeat="repeat";break;case"span":e.style.backgroundSize="cover",e.style.backgroundPosition="left top";break;default:e.style.backgroundSize="cover";break}}function vi(e){const t=document.querySelector('meta[name="viewport"]');t==null||t.setAttribute("content",`width=device-width, initial-scale=${e}, user-scalable=no`)}function Jn(e){document.documentElement.classList.toggle("no-border-radius",!e),document.documentElement.classList.toggle("rounded-corner",e)}function Ut(e,t){document.documentElement.classList.toggle(e,t)}function wi(e){document.documentElement.classList.toggle("use-border",e)}function Nn(e,t){e.addEventListener("mousedown",r,!1);let n,i,s=0,l=0,a={x:0,y:0},m=!1;function r(f){f.button===0&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",h,!1),a.x=f.x,a.y=f.y)}function c(f){if(document.documentElement.style.cursor=f.ctrlKey?"copy":"default",(Math.abs(f.x-a.x)>1||Math.abs(f.y-a.y)>1)&&!m){m=!0;const p=e.getBoundingClientRect();s=f.x-p.left,l=f.y-p.top,n=e.cloneNode(!0),n.classList.add("drag-item"),re(n,{width:p.width+"px",height:p.height+"px"}),document.body.appendChild(n),e.dispatchEvent(new CustomEvent("customdragstart",{bubbles:!0,detail:t}))}F(n)&&re(n,{top:f.y-l+"px",left:f.x-s+"px"});const u=document.elementFromPoint(f.x,f.y);u instanceof Element&&(i!==u?(i=u,i.dispatchEvent(new CustomEvent("customdragover",{bubbles:!0,detail:t}))):i.dispatchEvent(new CustomEvent("customdrag",{bubbles:!0,detail:t})))}function h(f){document.documentElement.style.cursor="default",m&&(i.dispatchEvent(new CustomEvent("customdrop",{bubbles:!0,detail:t})),document.body.removeChild(n),m=!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",h,!1)}}function wn(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function xi(e,t=!0){document.documentElement.style.setProperty("--accent-color",`hsl(${e.h}, ${e.s}%, ${e.l}%)`),document.documentElement.style.setProperty("--accent-color-value",e.h.toString()),t&&wt({accentColor:e})}function Ke(e){let n=/[a-z]:[\\/](?:[^\\/:*?"<>|\r\n]+[\\/])*[^\\/:*?"<>|\r\n]*/.exec(e);return F(n)&&n[0]===n.input}function kt(e){const n=/^[a-zA-Z]:[\\/]?/.exec(e);return F(n)&&n[0]===n.input}function Zt(e){const n=/(?:[\\/]?[^\\/:*?"<>|\r\n]+[\\/]?)*/.exec(e);return F(n)&&n[0]===n.input}function Ho(e,t){return e.reduce((n,i)=>((n[t(i)]=n[t(i)]||[]).push(i),n),{})}function Jl(e,t){var n=5,i={r:0,g:0,b:0},s=document.createElement("canvas"),l=s.getContext("2d"),a,m,r=-4,c,h={r:0,g:0,b:0},f=0;const u=new Image;u.height=200,u.src=e,u.onload=()=>{const p=u.naturalWidth/u.naturalHeight;m=Math.round(200*p),l.drawImage(u,0,0,m,200);try{a=l.getImageData(0,0,m,200)}catch{t(i)}for(c=a.data.length;(r+=n*4)<c;)++f,h.r+=a.data[r],h.g+=a.data[r+1],h.b+=a.data[r+2];h.r=Math.floor(h.r/f),h.g=Math.floor(h.g/f),h.b=Math.floor(h.b/f),l.clearRect(0,0,m,200),t(h)}}function Ql({r:e,g:t,b:n}){return e*.299+t*.587+n*.114>140?"#000":"#fff"}function Ao(e){Jl(e,t=>{const n=Ql(t);document.documentElement.style.setProperty("--contrast-text-color",n)})}function yi(e){Ke(e)?ho(e,(t,n)=>{if(!t)try{const i=URL.createObjectURL(n);Ao(i)}catch{}}):Ao(e)}function bi(e){Ut("use-titlebar-accent-color",e.useTitleBarAccentColor),Ut("use-startmenu-and-taskbar-accent-color",e.useTaskbarAndStartMenuAccentColor),Ut("use-window-border-accent-color",e.useWindowBorderAccentColor),xi(e.accentColor,!1),mo(e.dark,!1),fo(e.transparency,!1),Ve.setBackgroundImage(e.background,!1),Ve.setBackgroundStyle(e.backgroundImageStyle)}function wt(e){let{themes:t,themeIndex:n,customTheme:i}=fe.getState(["themes","themeIndex","customTheme"]);n>-1?i={...t[n],...e}:i={...i,...e},fe.setState({customTheme:i,themeIndex:-1}),Ce(G.customThemeChange)}function ea(e){const t=fe.getState("recentImages").recentImages;if(F(t)){const n=t.find(i=>i.path===e.path);n?(t.splice(t.indexOf(n),1),t.unshift(e),fe.setState({recentImages:t})):(t.pop(),t.unshift(e)),fe.setState({recentImages:t})}}function xn(){window.location.reload()}function ta(){Yl({title:"Reset This PC",text:"Reset",content:o("div",{},[o("div",{style:{paddingInline:"10px",fontWeight:"bold"}},"Reseting will:"),o("ul",{},[o("li",null,"Change settings back to their defaults"),o("li",null,"Remove personal files")])]),onOK(){fe.reset();const e=indexedDB.deleteDatabase("Local Disk C");e.onsuccess=()=>{xn()},e.onerror=()=>{xn()},e.onblocked=()=>{xn()},e.onupgradeneeded=()=>{xn()}}}).focusToButton("cancel")}function na(e){Fe("cmd",e)}function tn(e,t=0,n,i,s=[],l){const a=e.length-1,m=e[t];if(l=l||"",t>a){i(s);return}if(m.isFile)m.file(r=>{s.push({type:"file",path:n+l+"/"+r.name,file:r}),tn(e,t+1,n,i,s,l)});else if(m.isDirectory){let r=function(){h.readEntries(function(u){u.length>0?(f=f.concat(u),r()):f.length===0?tn(e,t+1,n,i,s,l):tn(f,0,n,p=>{const d=p.length;for(let v=0;v<d;v++)s.push(p[v]);tn(e,t+1,n,i,s,l)},[],c)})},c=l;c+="/"+m.name,s.push({type:"dir",path:n+c});let h=m.createReader(),f=[];r()}}function Cn(e,t){const n=Array.from(t).map(i=>i.webkitGetAsEntry());tn(n,0,e,i=>{const s=i.length;let l=0;for(let c=0;c<s;c++)i[c].type==="file"&&(l+=i[c].file.size);let a=0;const m=ro({maxValue:l,title:"Copying...",description:`Copying ${n.length} items from <span style="color: var(--blue-color)">Local machine</span> to <span style="color: var(--blue-color)">${nt(e)}</span>`});function r(c=0){if(c>=s){setTimeout(()=>{m.close()},1e3);return}const h=i[c];h.type==="file"?(a+=h.file.size,ie.writeFile(h.path,h.file,f=>{f&&console.log(f),m.setValue(a),r(c+1)})):h.type==="dir"&&ie.createFolder(h.path,f=>{r(c+1)})}r()})}function oa(e,t){let n=0,i=0;const s=t.length;for(let m of t)n+=m.size;const l=ro({maxValue:n,title:"Copying...",description:`Copying ${s} items from <span style="color: var(--blue-color)">Local machine</span> to <span style="color: var(--blue-color)">${nt(e)}</span>`});function a(m=0){if(m>=s){setTimeout(()=>{l.close()},1e3);return}const r=t[m];i+=r.size,ie.writeFile(e+"/"+r.name,r,c=>{c&&console.log(c),l.setValue(i),a(m+1)})}a()}function ia(e,t){n((i,s)=>{if(!i){let l=function(h=0){if(h>=a){setTimeout(()=>{c.close()},1e3);return}const f=s[h];ie.unlink(f.location,u=>{u&&console.log(u),f.type==="file"&&(r+=f.size,c.setValue(r)),l(h+1)})};const a=s.length;let m=0;for(let h=0;h<a;h++)s[h].type==="file"&&(m+=s[h].size);if(m<10485760&&a<10){e.forEach(h=>{ie.unlink(h.location,f=>{f&&console.log(f)})});return}let r=0;const c=ro({maxValue:m,title:"Removing...",description:`Removing ${a} items from <span style="color: var(--blue-color)">${nt(t)}</span>`});l()}});function n(i){let s=0,l=[];a();function a(){if(s===e.length){const r=l.concat(e);i(null,r);return}const m=e[s];m.type==="folder"?ie.readFolderRecursive(m.location,(r,c)=>{if(r){i(r);return}const h=c.map(f=>{const u={type:f.type,location:f.location};return f.type==="file"&&(u.size=f.size),u}).toReversed();l=l.concat(h),s++,a()}):(s++,a())}}}function sa(e){Ht({width:300,height:400,className:"openWith-popup"},o("div",{className:"w-full h-full p-20"},"How do you want to open this file?")).show()}function la(e){let t;return function n(){let i=n;const s=arguments;F(t)?(Date.now()-t<650&&e.apply(i,s),t=void 0):(t=Date.now(),setTimeout(()=>{F(t)&&(t=void 0)},650))}}function Po(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function pn(e=8){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}const aa=/webkit/.test(navigator.userAgent.toLowerCase()),ki=()=>[/Android/i,/webOS/i,/iPhone/i,/iPad/i].some(t=>navigator.userAgent.match(t));function ra(e){return e.lastIndexOf(".")>-1?e.substring(e.lastIndexOf("."),e.length):null}function Qn(e,t){Ke(e)?ie.readFile(e,(n,i)=>{n?t(n):F(i)?i.text().then(s=>{t(null,s)}):t(new Error("File not exists"))}):fetch(e).then(n=>n.text()).then(n=>t(null,n)).catch(n=>t(n))}function nt(e){return e.substring(e.lastIndexOf("/")+1,e.length)}function dt(e){const t=e.lastIndexOf(".");return t>-1?e.substring(t,e.length):""}function ho(e,t){const n=indexedDB.open("Local Disk C");n.onsuccess=()=>{const l=n.result.transaction("files","readwrite").objectStore("files").get(e);l.onsuccess=()=>{F(l.result)?t(null,l.result):t(new Error("Item has removed!"))},l.onerror=()=>{t(new Error("Invalid path"))}},n.onerror=()=>{t(new Error("Can not access"))}}function ca(e,t){let n;return function i(){const s=i,l=arguments;clearTimeout(n),n=setTimeout(()=>e.apply(s,l),t)}}function Ze(e,t=100){let n,i;return function s(){const l=s,a=arguments;i?(clearTimeout(n),n=setTimeout(function(){Date.now()-i>=t&&(e.apply(l,a),i=Date.now())},t-(Date.now()-i))):(e.apply(l,a),i=Date.now())}}function _t(e,t){let n,i,s,l,a=t.limit||100,m=t.debounceDelay||200;return function r(){const c=r,h=arguments;se(t.onFrame)&&(cancelAnimationFrame(l),l=requestAnimationFrame(()=>{t.onFrame.apply(c,h)})),se(t.onDebounce)&&(clearTimeout(s),s=setTimeout(()=>{t.onDebounce.apply(c,h)},m)),se(t.onFunction)&&t.onFunction.apply(c,h),i?(clearTimeout(n),n=setTimeout(function(){Date.now()-i>=a&&(e.apply(c,h),i=Date.now())},a-(Date.now()-i))):(e.apply(c,h),i=Date.now())}}function Ot(e,t=0){return Number(Math.round(parseFloat(e+"e"+t))+"e-"+t)}function Ni(e,t){if(typeof e=="object")for(let n in t)typeof e[n]!=typeof t[n]?e[n]=t[n]:typeof e[n]=="object"&&Ni(e[n],t[n]);return e}function nn(e){return e>=1099511627776?{value:Ot(e/1099511627776,1),unit:"TB"}:e>=1073741824?{value:Ot(e/1073741824,1),unit:"GB"}:e>=1048576?{value:Ot(e/1048576,1),unit:"MB"}:e>=1024?{value:Ot(e/1024),unit:"KB"}:e>0?{value:1,unit:"KB"}:{value:0,unit:"B"}}const Ro=new Date(2023,0,1).getTime(),Ft={type:"mediumIcons",sortBy:"text",orderBy:"asc"};function Ie(e){const t={...e,name:e.name,type:e.type||"folder",children:e.children||[],cdate:Ro,mdate:Ro};return F(e.text)&&(t.text=e.text),F(e.type)&&(e.type==="file"||e.type==="shortcut")&&(t.size=0),F(e.icon)&&(t.icon=e.icon),t}const{USER_NAME:da,USER_HOME:Gt}=at.getState(["USER_NAME","USER_HOME"]),Ci=Ie({name:"c:",text:"Local Disk C",icon:"imgs/icons/Drives/Hardrive%20Windows.png",children:[Ie({name:"windows",children:[Ie({name:"system32",children:[]})]}),Ie({name:"Program Data",children:[Ie({name:"Explorer",children:[]})]}),Ie({name:"Code",children:[Ie({name:"App1"}),Ie({name:"App2"}),Ie({name:"App3"}),Ie({name:"App4"})],view:{type:"mediumIcons",sortBy:"text",orderBy:"asc"}}),Ie({name:"Users",children:[Ie({name:da,icon:ze.user,children:[Ie({name:"Desktop",icon:ze.desktop}),Ie({name:"Documents",icon:ze.document,children:[Ie({name:"Google"}),Ie({name:"Microsoft"})]}),Ie({name:"Downloads",icon:ze.download}),Ie({name:"Pictures",icon:ze.pictures,children:[Ie({name:"Natures",view:Ft}),Ie({name:"Screenshots",view:Ft}),Ie({name:"Art",view:Ft}),Ie({name:"Abstract",view:Ft}),Ie({name:"Wallpapers",view:Ft})],view:Ft}),Ie({name:"Music",icon:ze.music}),Ie({name:"Videos",icon:ze.videos})]})]})]});function ua(e){const t=e.transaction("tree","readwrite").objectStore("tree");let n=[];function i(s,l="",a=0){const m=s[a];let r=l===""?m.name:l+"/"+m.name;if(m.type==="folder"){const c={...m},h=m.children.map(f=>{const u={...f};return delete u.children,u});c.children=h,n.push({location:r,data:c})}m.children.length&&i(m.children,r),a<s.length-1&&i(s,l,a+1)}i([Ci]);for(let s of n)t.put(s.data,s.location)}window.createDefaultFolderTree=ua;function ma(){let e,t,n,i={};const s=indexedDB.open("Local Disk C");let l=Ci,a,m,r=!1,c=!1,h=0,f=0;s.onupgradeneeded=function(){e=s.result,e.createObjectStore("tree").put(l,"c"),e.createObjectStore("files",{autoIncrement:!0});const b=indexedDB.open("Local Disk C");b.onsuccess=()=>{e=b.result;for(let g=1;g<=5;g++)fetch(`imgs/Pictures/IMG ${g}.jpg`).then(N=>N.blob()).then(N=>{y(`${Gt}/Pictures/Wallpapers/IMG ${g}.jpg`,N)});fetch("videos/VID 1.mp4").then(g=>g.blob()).then(g=>{y(`${Gt}/Videos/VID 1.mp4`,g),y(`${Gt}/Desktop/VID 1.mp4`,g)}),fetch("videos/VID 2.mp4").then(g=>g.blob()).then(g=>{y(`${Gt}/Videos/VID 2.mp4`,g),y(`${Gt}/Desktop/VID 2.mp4`,g)}),setTimeout(()=>{V("ready",e)},1e3)}},s.onsuccess=function(){e=s.result,window.db=e,u(),p();const b=t.get("c");b.onsuccess=function(){b.result&&(l=b.result)},V("ready",e)},s.onerror=function(b){V("error",b)};function u(){t=e.transaction("tree","readwrite").objectStore("tree")}function p(){n=e.transaction("files","readwrite").objectStore("files")}function d(b,g,N){const I=b.replace(/\\+/g,"/");u(),p();const E=I.split("/").filter(P=>P!=="");if(E.length===1){N(new Error("Invalid Path"));return}const C=Date.now(),k=E.length-1;let D=1,S=l;$();function $(){let P=S.children.findIndex(_=>_.name===E[D]),A;if(P===-1){const _=S.children.push({name:E[D],type:g.type,children:[],cdate:C,mdate:C})-1;if(A=S.children[_],D<k&&(A.type="folder"),D===k){t.put(l,"c"),g.type==="file"||g.type==="shortcut"?(A.type,g.type,delete A.children,n.put(null,I)):A.type,N(),V("added",I);return}else S=A,D+=1,$()}else if(A=S.children[P],D===k){N(new Error(g.type+" already exists"));return}else A.type==="folder"&&!F(A.children)&&(A.children=[]),S=A,D+=1,$()}}function v(b,g){d(b,{type:"folder"},g)}function x(b,g){const N=b.replace(/\\+/g,"/");u();const I=t.get("c");I.onsuccess=()=>{let E=I.result;const C=N.split("/").filter(k=>k!=="");if(C.length===0)g(new Error("Invalid path"));else if(C.length===1){if(kt(C[0])){const k=E.children.map(D=>(delete D.children,D));g(null,k);return}g(new Error("Invalid path"))}else{C.shift();let k;for(let S of C){const $=E.children.findIndex(P=>P.name===S);if($>-1)E=E.children[$];else{k=new Error("Path is no longer exists");break}}if(E.type!=="folder"&&(k=new Error("Path is no longer exists")),k){g(k);return}const D=E.children.map(S=>(delete S.children,S));g(null,D)}}}function w(b,g){const N=b.replace(/\\+/g,"/").replace(/\/+/g,"/");p();const I=n.get(N);I.onsuccess=()=>{g(null,I.result)},I.onerror=()=>{g(I.error)}}function y(b,g,N){const I=b.replace(/\\+/g,"/"),E=I.split("/").filter(A=>A!=="");if(E.length===1){se(N)&&N(new Error("Invalid Path"));return}const C=E.length-1;let k=1,D=l;const S=Date.now();$();function $(){let A=D.children.findIndex(U=>U.name===E[k]),_;if(A===-1){const U=D.children.push({name:E[k],type:"folder",children:[],cdate:S,mdate:S})-1;if(_=D.children[U],k===C){_.type="file",delete _.children,_.size=g.size,p();const j=new File([g],nt(I)),K=n.put(j,I);K.onsuccess=()=>{se(N)&&N(),P(),V("added",I)},K.onerror=()=>{N(K.error)};return}else D=_,k+=1,$()}else if(_=D.children[A],k===C){delete _.children,_.type="file",_.size=g.size,_.mdate=Date.now(),p();const U=n.put(g,I);U.onsuccess=()=>{se(N)&&N(),P(),V("modified",I)},U.onerror=()=>{N(U.error)};return}else D=_,k+=1,$()}function P(){h+=1,r||(r=!0,u(),t.put(l,"c")),a&&clearTimeout(a),a=setTimeout(()=>{if(h>1){u();const A=t.put(l,"c");A.onerror=()=>{N(A.error)}}h=0,r=!1},200)}}function L(b,g){const N=b.replace(/\\+/g,"/");u();const I=t.get("c");I.onsuccess=()=>{let E=I.result,C;const k=N.split("/").filter(S=>S!=="");if(k.length===0){g(new Error("Invalid path",{cause:1}));return}if(k.length===1){const S=k[0],$=S.split(":")[0];kt(S)&&$==="c"?(delete E.children,g(null,E)):g(new Error("Invalid path",{cause:1}));return}k.shift();let D;for(let S of k){const $=E.children.findIndex(P=>P.name===S);if($>-1)C=E.children[$],E=C;else{D=new Error("Path is no longer exists",{cause:2});break}}F(C)&&delete C.children,g(D,C)},I.onerror=()=>{g(new Error("Unknown error",{cause:0}))}}function B(b,g){const N=b.replace(/\\+/g,"/"),I=N.split("/").filter(S=>S!=="");if(I.length===1){g(new Error("Invalid Path"));return}const E=I.length-1;let C=1,k=l;D();function D(){const S=k.children.findIndex(P=>P.name===I[C]);if(S===-1){g(new Error("Item not exsist"));return}else if(C===E){const P=k.children[S];if(P.type==="file"||P.type==="shortcut"){k.children.splice(S,1),p();const A=n.delete(N);A.onsuccess=()=>{g(),$(),V("removed",N)},A.onerror=()=>g(A.error)}else P.type==="folder"?M(N,(A,_)=>{if(F(A))g(A);else{const U=_.filter(ce=>ce.type==="file"),j=U.length;p();for(let ce=0;ce<j;ce++){const xe=U[ce];n.delete(xe.location),V("removed",xe.location)}const K=k.children.findIndex(ce=>ce.name===P.name);K>-1?(k.children.splice(K,1),$(),g(),V("removed",N)):g(new Error("Invalid Path"))}}):g(new Error("Unknown error"))}else k=k.children[S],C+=1,D();function $(){f+=1,c||(c=!0,u(),t.put(l,"c")),m&&clearTimeout(m),m=setTimeout(()=>{if(f>1){u();const P=t.put(l,"c");P.onerror=()=>{g(P.error)}}f=0,c=!1},200)}}}function M(b,g,N=[]){x(b,(I,E)=>{if(I)return g(I,N);let C=0;(function k(){var D=E[C++];if(!D)return g(null,N);let S=b+"/"+D.name;D.location=S,N.push(D),D.type==="folder"?M(S,($,P)=>{if(I)return g(I,N);N=N.concat(P),k()}):k()})()})}function R(b,g,N){const I=b.replace(/\\+/g,"/");u();const E=I.split("/").filter($=>$!=="");if(E.length===1){kt(E[0])?(l.view=g,t.put(l,"c"),se(N)&&N()):se(N)&&N(new Error("InValid Path"));return}const C=E.length-1;let k=1,D=l;S();function S(){let $=D.children.findIndex(A=>A.name===E[k]),P;if($>-1)if(P=D.children[$],k===C){P.view=g,t.put(l,"c"),se(N)&&N();return}else D=P,k+=1,S()}}function O(b,g,N){i[b]||(i[b]=Object.create(null)),i[b][g]=N}function V(b,g){if(!(typeof i[b]>"u"))for(let N in i[b])i[b][N](g)}function H(b,g){delete i[b][g]}function T(){return l}return{addEventListener:O,removeListeners:H,createItem:d,createFolder:v,readFolder:x,readFolderRecursive:M,readFile:w,writeFile:y,unlink:B,stats:L,check:T,setView:R}}const ie=ma();function fa(){const t="c:/Program Data/Explorer/"+"thumbnails";let n=[],i=0;const s=[];ie.addEventListener("ready","explorer-thumbnails",()=>{l()});function l(){Qn(t,(d,v)=>{if(d)m();else try{n=JSON.parse(v),Ce(G.thumbnailReady)}catch(x){console.error(x)}})}let a;function m(){a&&clearTimeout(a),a=setTimeout(()=>{ie.writeFile(t,new Blob([JSON.stringify(n)],{type:"text/plain"}))},1e3)}function r(){const d=s.shift();F(d)&&h(d.location,d.fileExt)}const c=[];function h(d,v){i+=1,ie.readFile(d,(x,w)=>{if(x||!F(w)){const B=c.findIndex(M=>M.location===d);if(B>-1){const M=c[B];for(let R of M.callbacks)R("");c.splice(B,1)}i-=1,r();return}const y=URL.createObjectURL(w);Pn(v)&&uo(y,L,160),dn(v)&&Gl(y,L,160);function L(B,M,R,O){const V=c.findIndex(H=>H.location===d);if(V>-1){const H=c[V];for(let T of H.callbacks)T(B,O);c.splice(V,1),n.push({location:d,data:R,ratio:O})}m(),i-=1,r()}}),i+1<=2&&r()}function f(d,v,x){const w=n.find(y=>y.location===d);if(F(w))fetch(w.data).then(y=>y.blob()).then(y=>{const L=URL.createObjectURL(y);x(L,w.ratio)});else{const y=c.findIndex(L=>L.location===d);if(y>-1){c[y].callbacks.push(x);return}if(c.push({location:d,callbacks:[x]}),i>2){s.push({location:d,fileExt:v});return}h(d,v)}}let u;function p(d){const v=n.findIndex(x=>x.location===d);v>-1&&(n.splice(v,1),u&&clearTimeout(u),u=setTimeout(()=>{m()},100),p(d))}return{getThumbnail:f,removeThumbnail:p}}const un=fa();function it(e){return`imgs/icons/${encodeURIComponent(e)}`}const Oe={blank:it("Blank.png"),image:it("Pictures file.png"),videos:it("Videos file.png"),audio:it("Audio file.png")},ha={"":{icon:Oe.blank,appName:"",description:"File"},".jpg":{icon:Oe.image,appName:"photoViewer",description:"Picture file"},".png":{icon:Oe.image,appName:"photoViewer",description:"Picture file"},".jfif":{icon:Oe.image,appName:"photoViewer",description:"Picture file"},".webp":{icon:Oe.image,appName:"photoViewer",description:"Picture file"},".jpeg":{icon:Oe.image,appName:"photoViewer",description:"Picture file"},".mp3":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".aac":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".ogg":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".m4a":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".flac":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".wav":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".opus":{icon:Oe.audio,appName:"mediaPlayer",description:"Audio file"},".mp4":{icon:Oe.videos,appName:"mediaPlayer",description:"Video file"},".mkv":{icon:Oe.videos,appName:"mediaPlayer",description:"Video file"},".webm":{icon:Oe.videos,appName:"mediaPlayer",description:"Video file"},".txt":{icon:it("Notes.png"),appName:"notepad",description:"Text Document File"},".exe":{icon:it("Notes.png"),appName:"",description:"Application"},".html":{icon:it("Notes.png"),appName:"notepad",description:"HTML Document"},".js":{icon:it("Notes.png"),appName:"notepad",description:"Javascript Source File"},".json":{icon:it("Notes.png"),appName:"notepad",description:"JSON File"},".css":{icon:it("Notes.png"),appName:"notepad",description:"CSS Source File"},".md":{icon:it("Notes.png"),appName:"notepad",description:"Markdown File"}},jt=e=>{let t=ha[e];return F(t)||(t={appName:"",description:e.substring(1,e.length).toUpperCase()+" file",icon:Oe.blank,iconType:"image"}),t};function pa(e){const{showDesktopIcons:t}=fe.getState("showDesktopIcons");return[{text:"View",children:[{text:"Large Icons",value:"large-icons"},{text:"Medium Icons",value:"medium-icons",checked:!0},{text:"Small Icons",value:"small-icons"},{divider:!0},{text:"Auto arrange icons"},{text:"Align icons to grid",checked:!0},{divider:!0},{text:"Show desktop icons",checked:t,onClick:e.onShowDesktopIconsClick}]},{text:"Sort by",children:[{text:"Name"},{text:"Size"},{text:"Item type"},{text:"Date Modified"}]},{text:"Refresh"},{divider:!0},{text:"Paste",disabled:!0},{text:"Paste shortcut",disabled:!0},{text:"Open command window here",icon:"imgs/icons/Apps/terminal.png",iconType:"image",onClick(){na(at.getState("USER_HOME").USER_HOME+"/Desktop")}},{divider:!0},{text:"New",children:[{text:"Folder",icon:"imgs/icons/Folder.png",iconType:"image"},{text:"Shortcut",iconType:"image",icon:"imgs/icons/Emblems/1010.png"},{divider:!0},{text:"Bitmap Image"},{text:"Rich Text Document"},{text:"Text Document",icon:"imgs/icons/Notes.png",iconType:"image",onClick:()=>{Fe(Y.notepad.name)}}],emphasis:!0},{divider:!0},{icon:"imgs/icons/Desktop.png",iconType:"image",text:"Display settings",onClick:()=>{rn({...Y.settings,type:"app",args:"system/display"})}},{icon:"imgs/icons/Personalization.png",iconType:"image",text:"Personalize",onClick:()=>{rn({...Y.settings,type:"app",args:"personalization"})}}]}const St=at.getState("USER_HOME").USER_HOME+"/Desktop";function ga(){let e=[],t=[],n=!1;const i=[{icon:"imgs/icons/Trash Empty.png",name:"explorer",productName:"Recycle Bin",args:"Recycle Bin",type:"app"},{...Y.settings,type:"app"},{...Y.notepad,type:"app"},{...Y.explorer,type:"app"},{...Y.photos,type:"app"},{...Y.github,type:"link",args:"https://github.com/chrishtu/windows11"}];function s(w){d(),rn(w)}const l=o("div",{className:"desktop-app-items absolute top flex flex-col flex-wrap"});a();function a(){for(let w of i)l.appendChild(f(w))}function m(){rt(l),a(),ie.readFolder(St,(w,y)=>{w||y.forEach(L=>{const B={type:L.type,args:St+"/"+L.name,name:L.name,productName:L.name,icon:L.icon||(L.type==="folder"?vt:null),iconType:"image"},M=f(B);l.appendChild(M)})})}function r(w){return w.substring(St.length+1,w.length).split("/")}ie.addEventListener("ready","desktop",()=>{Me(G.thumbnailReady,"desktop",()=>{m()})});function c(){n&&(m(),n=!1)}ie.addEventListener("added","desktop",_t(()=>{c()},{limit:1e3,onFunction(w){w.includes(St)&&r(w).length===1&&(n||(n=!0))}})),ie.addEventListener("modified","desktop",_t(()=>{c()},{limit:1e3,onFunction(w){w.includes(St)&&r(w).length===1&&(n||(n=!0))}})),ie.addEventListener("removed","desktop",_t(()=>{c()},{limit:2e3,onFunction(w){w.includes(St)&&r(w).length===1&&(n||(n=!0))}}));function h(w){let y=o("div",{className:"app-association"}),L=o("div",{className:"pannel-item-icon-bg"},y);const B=o("div",{className:"desktop-app-item-icon flex items-center content-center",style:{backgroundImage:`url(${w.icon})`}},L);function M(R,O,V){const H=O||1;B.style.backgroundImage="none",L.style.aspectRatio=H.toString(),H>=1?L.style.width="100%":L.style.height="100%",L.style.backgroundImage=`url(${R})`,V&&(y.style.backgroundImage=`url(${bt.mediaPlayer.icon})`)}if(w.icon&&(w.iconType==="svg"?B.innerHTML=w.icon:B.style.backgroundImage=`url("${w.icon}")`),w.type==="file"){const R=dt(w.args),O=jt(R);O.icon?O.iconType==="svg"?B.innerHTML=O.icon:B.style.backgroundImage=`url("${O.icon}")`:B.style.backgroundImage='url("imgs/icons/Blank.png")',Ke(w.args)&&(Pn(R)?un.getThumbnail(w.args,R,(V,H)=>M(V,H)):dn(R)&&un.getThumbnail(w.args,R,(V,H)=>M(V,H,!0)))}return B}function f(w){let y=w.productName;w.type==="file"&&(y=nt(w.args));const L=o("div",{className:"desktop-app-item",ondblclick:s.bind(null,w),onclick:B=>{const M=B.currentTarget;B.shiftKey||d(),M.classList.add("desktop-app-item-selected"),e.push(M)}},[o("div",{className:"flex items-center content-center",style:{padding:"3px 0"}},h(w)),o("div",{title:y,className:"desktop-app-item-label"},o("div",{className:"text-ellipsis line-clamp-2"},y))]);return Nn(L,{type:w.type,location:w.args}),L}function u(w,y=!1){Array.from(l.children).forEach(B=>{const M=B.getBoundingClientRect();M.left+M.width<w.x1||M.left>w.x2||M.top+M.height<w.y1||M.top>w.y2?y||B.classList.remove("desktop-app-item-selected"):B.classList.add("desktop-app-item-selected")})}function p(){const w=Array.from(l.children);return e=w.filter(y=>y.classList.contains("desktop-app-item-selected")),t=w.filter(y=>!y.classList.contains("desktop-app-item-selected")),{items:w,selectedItems:e,notSelectedItems:t}}function d(){e.forEach(w=>{w.classList.remove("desktop-app-item-selected")}),e=[]}function v(w){l.classList.toggle("hidden",!w)}function x(){const{showDesktopIcons:w}=fe.getState("showDesktopIcons");v(!w),fe.setState({showDesktopIcons:!w})}return{element:l,selectItems:u,getItems:p,removeSelection:d,setShowDesktopIcons:v,toggleDesktopIcons:x}}function va(){const{backgroundImageStyle:e,showDesktopIcons:t}=fe.getState(["backgroundImageStyle","showDesktopIcons"]),n=ga();function i(L){L.preventDefault(),qt({top:L.y,left:L.x},L.currentTarget,pa({onShowDesktopIconsClick:n.toggleDesktopIcons}),!1,null,!1,"desktop-context-menu")}function s(L){L.preventDefault(),Cn(St,L.dataTransfer.items)}let l=o("div",{className:"desktop-shape-presentation"}),a=o("div",{className:"desktop-selection-presentation"}),m=o("div",{className:"desktop fade-in",ondrop:s},[o("div",{className:"desktop-selection-handler",onmousedown:h,oncontextmenu:i}),a]),r=!1,c=null;function h(L){fe.getState("showDesktopIcons").showDesktopIcons&&(L.shiftKey||n.removeSelection(),L.button===0&&(r=!0,c={x:L.x,y:L.y},document.onmousemove=f,document.onmouseup=u))}function f(L){if(!r||Math.abs(L.x-c.x)<2&&Math.abs(L.y-c.y)<2)return;let B=0,M=0,R=0,O=0;L.x>c.x?(M=c.x,R=L.x-c.x):(M=L.x,R=c.x-L.x),L.y>c.y?(B=c.y,O=L.y-c.y):(B=L.y,O=c.y-L.y),re(a,{visibility:"visible",top:B+"px",left:M+"px",width:R+"px",height:O+"px"}),n.selectItems({x1:M,x2:M+R,y1:B,y2:B+O},L.shiftKey)}function u(){r=!1,re(a,{visibility:"hidden",width:"0px",height:"0px"}),n.getItems()}let p,d=!1;y(e),lt(document.body,m),lt(document.body,l),setTimeout(()=>{lt(m,n.element),n.setShowDesktopIcons(t)},500);function v(L,B=!0){m.style.myBackgroundImage=L.path,B&&(wt({background:L}),ea(L)),Ce(G.backgroundImageChange,L)}function x(L,B){p&&clearTimeout(p);const M=Math.floor(ke.width/2),R=ke.height-We,O=Math.floor(R/2);d||(L==="top"?re(l,{top:"10px",left:M+"px"}):L==="left"?re(l,{top:O+"px",left:"10px"}):L==="right"?re(l,{top:O+"px",left:ke.width+"px"}):L==="topLeft"?re(l,{top:"10px",left:"10px"}):L==="topRight"?re(l,{top:"10px",left:ke.width+"px"}):L==="bottomLeft"?re(l,{top:R+"px",left:"10px"}):L==="bottomRight"&&re(l,{top:R+"px",left:ke.width+"px"}),d=!0),p=setTimeout(()=>{L==="top"?re(l,{top:"10px",left:"10px",height:R-20+"px",width:ke.width-20+"px",transformOrigin:"top"}):L==="left"?re(l,{top:"10px",left:"10px",height:R-20+"px",width:M-10+"px",transformOrigin:"left"}):L==="right"?re(l,{top:"10px",left:M+"px",height:R-20+"px",width:M-10+"px",transformOrigin:"center right"}):L==="topLeft"?re(l,{top:"10px",left:"10px",height:O-10+"px",width:M-10+"px",transformOrigin:"left top"}):L==="topRight"?re(l,{top:"10px",left:M+"px",height:O-10+"px",width:M-10+"px",transformOrigin:"right top"}):L==="bottomLeft"?re(l,{top:O+"px",left:"10px",height:O-10+"px",width:M-10+"px",transformOrigin:"left bottom"}):L==="bottomRight"&&re(l,{top:O+"px",left:M+"px",height:O-10+"px",width:M-10+"px",transformOrigin:"right bottom"}),l.classList.add("show")},150)}function w(){d=!1,p&&clearTimeout(p),l.classList.remove("show"),l.style.top="0",l.style.left="0",l.style.width="0",l.style.height="0"}function y(L){Gn(m,L)}return{element:m,setBackgroundImage:v,setBackgroundStyle:y,showShape:x,removeShape:w,showDesktopIcons:n.setShowDesktopIcons}}const Ve=va();function wa(e,t,n){let i,s,l,a=pn(32);const m={...e},r=20;F(m.id)?a=e.id:m.id=a;const c={};F(m.icon)&&(c.backgroundImage=`url(${m.icon})`);function h(){E(!0),t.onTabChange(m),t.onDragOver(m)}const f={};F(n)&&(f.position="absolute",f.left=n+"px"),i=o("div",{className:"tab",style:f},[o("div",{className:"tab-inner w-full h-full flex items-center",onmousedown:T,oncontextmenu:t.onContextMenu},[s=o("div",{className:"tab-icon h-full flex-shrink-0 background-icon",style:c}),o("div",{className:"tab-text h-full flex-1"},l=o("div",{className:"w-full h-full flex items-center"},m.text))]),o("div",{className:"tab-close-button h-full flex-shrink-0 flex items-center content center",innerHTML:ti,onclick:()=>{D()}})]),i.addEventListener("customdragover",h,!1);let u,p,d,v=0,x=0,w=0,y=0,L=0,B=0,M=!1,R=!1,O=!1,V=0,H=!1;function T(S){S.button===0&&(se(t.onTabChange)&&t.onTabChange(m),u=i.getBoundingClientRect(),d=i.parentElement.parentElement.getBoundingClientRect(),L=u.x,B=u.y,v=S.x-d.x,w=S.x,x=S.y-d.y,y=S.y,t.getTabCount()===1&&(H=!0),document.addEventListener("mousemove",b,!1),document.addEventListener("mouseup",g,!1))}function b(S){if(!M&&(Math.abs(S.x-w)>10||Math.abs(S.y-y)>10))H?(t.moveWindow({...m,element:i},{left:u.left,top:u.top,dl:S.x-u.left,width:u.width,height:u.height,deltaLeft:S.x-d.x,deltaTop:S.y-u.top+8}),g()):(M=!0,i.style.position="relative",i.style.removeProperty("left"),p=i.cloneNode(!0),p.classList.add("active"),p.classList.add("tab-clone"),re(p,{position:"absolute",top:u.top+"px",left:u.left+"px",width:u.width+"px",height:u.height+"px",pointerEvents:"none",zIndex:"10000000"}),document.body.appendChild(p),i.style.visibility="hidden",se(t.onDragStart)&&t.onDragStart());else if(!H){if(M){let $=O?S.x-V:S.x-d.left-v+L;if($<d.left&&($=d.left),$+u.width>d.left+d.width&&($=d.left+d.width-u.width),p.style.left=$+"px",$>=0){let P=document.elementFromPoint(S.x,S.y);if(F(P)){let A=P.closest(".tab");F(A)&&(S.x-w>0?wn(i,A):S.x-w<0&&wn(A,i)),w=S.x}}}if(S.x<d.left-r||S.x>d.left+d.width+r||S.y<d.top-r||S.y>d.top+d.height+r){let $=S.y-d.top-x+B;if(p.style.top=$+"px",!R){R=!0;const P=p.getBoundingClientRect();t.onDragOut({...m,element:i},{left:P.left,top:P.top,dl:S.x-P.left,width:u.width,height:u.height,deltaLeft:S.x-d.x,deltaTop:S.y-P.top+8}),g(),D(R)}}}}function g(){F(p)&&p.remove(),i.style.removeProperty("visibility"),document.removeEventListener("mousemove",b,!1),document.removeEventListener("mouseup",g,!1),se(t.onDragEnd)&&t.onDragEnd(m,O),H=!1,O=!1,M=!1}function N(S){m.text=S,l.innerText=S}function I(S){m.icon=S,s.style.backgroundImage=`url(${S})`}function E(S){var $;i.classList[S?"add":"remove"]("active"),($=i.previousElementSibling)==null||$.classList[S?"add":"remove"]("no-divider")}function C(S){O=!0,u=i.getBoundingClientRect(),d=i.parentElement.parentElement.getBoundingClientRect(),L=u.x,B=u.y,v=S.detail.x-d.x,w=S.detail.x,x=S.detail.y-d.y,y=S.detail.y;let $=S.detail.x-S.detail.dx;if(V=S.detail.dx,M=!0,p=i.cloneNode(!0),p.classList.add("active"),p.classList.add("tab-clone"),re(p,{position:"fixed",top:u.top+"px",left:$+"px",width:u.width+"px",height:u.height+"px",pointerEvents:"none",zIndex:"10000000"}),document.body.appendChild(p),i.style.visibility="hidden",se(t.onDragStart)&&t.onDragStart(),$>=0){let P=document.elementFromPoint(S.detail.x,S.detail.y);if(F(P)){let A=P.closest(".tab");F(A)&&(S.detail.x-w>0?wn(i,A):S.detail.x-w<0&&wn(A,i)),w=S.detail.x}}document.addEventListener("mousemove",b,!1),document.addEventListener("mouseup",g,!1)}function k(S){m.content=S}function D(S){se(t.onClose)&&t.onClose(m,S),i.remove()}return{id:m.id,element:i,setTitle:N,setIcon:I,setActive:E,triggerMouseMove:C,setContent:k,close:D}}function Li(e){let t,n;const i=[];function s(p){i.forEach(v=>v.setActive(!1));const d=i.find(v=>v.id===p);F(d)&&d.setActive(!0)}function l(p){return i.find(v=>v.id===p)}function a(p){return s(p.id),e.onTabChange(p),i.length}function m(p){const d=wa(p,{onTabChange:a,onClose:e.onTabClose,onContextMenu:e.onContextMenu,updateDragHandle:e.updateDragHandle,onDrag:e.onDrag,onDragStart:e.onTabDragStart,onDragOver:e.onDragOver,onDragOut:e.onDragOut,onDragEnd:e.onDragEnd,getTabCount:e.getTabCount,moveWindow:e.moveWindow});return i.push(d),t.insertBefore(d.element,n),n.scrollIntoView(),s(d.id),d}function r(p){i.splice(i.findIndex(d=>d.id===p),1)}t=o("div",{className:"tabs w-full h-full flex"},[n=o("div",{className:"tabs-action-new flex items-center content-center"},o("div",{title:"New Tab",className:"tabs-action-new-button flex items-center content-center",onclick:e.onNewTabActionClick,innerHTML:io(18,2)})),o("div",{["drag-region"]:"drag",className:"h-full flex-1"})]);function c(){n.style.visibility="hidden"}function h(){n.style.visibility="visible"}function f(){t.classList.remove("no-scrollbar")}function u(){t.classList.add("no-scrollbar")}return{element:t,add:m,remove:r,getTab:l,setActiveTab:s,showNewButton:h,hideNewButton:c,enabledScrollbar:f,disabledScrollbar:u}}function Fo(e,t){let n,i=[];n=o("div",{className:"tree-view"+(t.className?" "+t.className:"")});function l(r,c,h=0,f=0,u=""){const p=c[h];let d,v;function x(y,L,B){var M;(M=B.children)!=null&&M.length?y.isShow===!1&&(l(d,B.children,0,f+10,u+=B.text+"/"),y.isShow=!0):typeof t.requestChildren=="function"&&t.requestChildren(B.location,R=>{B.children=R,l(d,R,0,f+10,u+=B.text+"/"),y.isShow=!0}),y.classList.toggle("show"),L.classList.toggle("show")}function w(y){t==null||t.onChange(y)}if(F(p)){const y={backgroundImage:`url(${p.icon})`};d=o("div",{isShow:!1,className:"tree-node"},o("div",{className:"tree-node-inner",style:{paddingLeft:f+"px"}},[o("div",{className:"tree-display flex items-center",ondblclick:L=>{L.stopPropagation(),!p.noToggle&&F(p.children)&&p.children.length>0&&x(d,v,p)},onclick:w.bind(null,p)},[p.noToggle?o("div",{className:"tree-node-action flex-shrink-0 flex items-center"}):v=o("div",{className:"tree-node-action flex-shrink-0 flex items-center",innerHTML:Xt,onclick:L=>{L.stopPropagation(),x(d,v,p)}}),o("div",{className:"tree-node-icon",style:y}),o("div",{className:"tree-node-text"},p.text)])])),r.appendChild(d),l(r,c,h+1,f,u),i.push({path:u+p.text,target:d,actionElement:v,currentData:p,toggleShow:x})}}l(n,[e]);function a(r){l(n,[r])}function m(r){return i.find(c=>c.path===r)}return{element:n,appendChild:a,getItem:m}}function xa(e){let t;const{USER_HOME:n}=at.getState("USER_HOME");let i;function s(m){e==null||e.onChange({location:m.location,text:m.text,icon:m.icon,children:m.children,type:m.type})}function l(m,r){ie.readFolder(m,(c,h)=>{const f=h.filter(u=>u.type==="folder").map(u=>({text:u.name,icon:u.icon||vt,location:m+"/"+u.name,properties:u,type:"folder"}));r(f)})}const a=Fo({text:"Favourites",icon:"imgs/icons/Quick%20Access.png",location:"",type:"root",children:[{icon:"imgs/icons/Folder%20Documents.png",text:"Documents",location:n+"/Documents",children:[],type:"folder",noToggle:!0},{icon:"imgs/icons/Folder%20Downloads.png",text:"Downloads",location:n+"/Downloads",children:[],type:"folder",noToggle:!0}]},{onChange:s,className:"explorer-sidebar-item",requestChildren:l});return t=o("div",{tabIndex:-1,className:"explorer-sidebar scrollable flex-shrink-0"},a.element),indexedDB.databases().then(m=>{i=Fo({text:"This PC",icon:"imgs/icons/Computer.png",location:"",type:"root",children:[{text:"Code",icon:vt,location:"c:/Code",children:[],type:"folder"},{text:"Desktop",icon:ze.desktop,location:n+"/Desktop",children:[],type:"folder"},{icon:ze.document,text:"Documents",location:n+"/Documents",children:[],type:"folder"},{icon:ze.download,text:"Downloads",location:n+"/Downloads",children:[],type:"folder"},{icon:ze.pictures,text:"Pictures",location:n+"/Pictures",children:[],type:"folder"},{icon:ze.music,text:"Music",location:n+"/Music",children:[],type:"folder"},{icon:ze.videos,text:"Videos",location:n+"/Videos",children:[],type:"folder"}].concat(m.map(c=>{const h=c.name.split(" ");let f=h[h.length-1].toLowerCase()+":";return{text:c.name,location:f,icon:"imgs/icons/Drives/Hardrive%20Windows.png",children:[],type:"driver"}}))},{className:"explorer-sidebar-item",onChange:s,requestChildren:l});const r=i.getItem("This PC");F(r)&&r.toggleShow(r.target,r.actionElement,r.currentData),t.appendChild(i.element),setTimeout(()=>{t.focus()},200)}),{element:t}}function ya(e){let t="",n=pi({placeholder:e.placholder,type:"text",value:e.text,onChange:s,onEnter:l}),i=co({title:e.title,width:e.width||300,height:e.height||160,parent:e.parent,content:o("div",{className:"text-dialog flex items-center content-center h-full"},n.element),onOK:l});n.focus();function s(a){t=a}function l(){se(e.onSubmit)&&e.onSubmit(t),i.close()}return i}function ba(e){let t;const n=e.options.map(c=>{let h={style:{}};return F(c.icon)&&(c.iconType==="svg"?h.innerHTML=c.icon:h.style.backgroundImage=`url(${c.icon})`),o("div",{className:"dropdown-option"+(c.disabled?" disabled":""),onclick:c.disabled?null:c.onClick},[o("div",{className:"dropdown-option-icon image-icon",...h}),o("div",{className:"dropdown-option-label"},c.text)])}),{offsetLeft:i,offsetTop:s,offsetHeight:l}=e.triggerElement;t=o("div",{className:"dropdown",style:{top:s+l+"px",left:i+"px"},onclick:c=>c.stopPropagation()},n),e.triggerElement.appendChild(t);function a(c){const h=c.target;t.contains(h)||r()}function m(c){t.contains(c.target)||r()}setTimeout(()=>{document.onmousedown=a,window.ontouchstart=m,document.onkeydown=c=>{c.key===Ee.Escape&&r()}},10);function r(){t.remove(),document.onmousedown=null,window.ontouchstart=null,F(e.triggerElement)&&e.triggerElement.focus()}return{element:t,close:r}}function ka(e){let t=o("div",{style:{width:"100%",height:"100%",backgroundImage:`url(${e.url})`,backgroundSize:e.imageSize||"100% 100%",backgroundPosition:"center center",backgroundRepeat:"no-repeat"}});function n(i){t.style.backgroundImage=`url(${i})`}return{element:t,setImage:n}}function eo(){const{USER_HOME:e}=at.getState("USER_HOME"),t=[{name:"Code",icon:vt,path:"This PC/Code",location:"c:/Code",type:"folder"},{name:"Desktop",icon:ze.desktop,path:"Desktop",location:e+"/Desktop",type:"folder"},{name:"Documents",icon:ze.document,path:"Documents",location:e+"/Documents",type:"folder"},{name:"Downloads",icon:ze.download,path:"Downloads",location:e+"/Downloads",type:"folder"},{name:"Pictures",icon:ze.pictures,path:"Pictures",location:e+"/Pictures",type:"folder"},{name:"Music",icon:ze.music,path:"Music",location:e+"/Music",type:"folder"},{name:"Videos",icon:ze.videos,path:"Videos",location:e+"/Videos",type:"folder"},{name:"Local Disk (C:)",icon:ze.driverC,path:"c:/",location:"c:",type:"driver"}],{USER_NAME:n}=at.getState("USER_HOME");return[...[{name:"Favourites",icon:"imgs/icons/Quick%20Access.png",path:"Favourites",location:"Favourites",type:"root",children:[t[2],t[3]],view:"mediumIcons",sortBy:"text",orderBy:"asc"},{name:"Recycle Bin",icon:"imgs/icons/Trash Empty.png",path:"Recycle Bin",location:"Recycle Bin",type:"root",children:[]},{name:"This PC",icon:ze.thisPC,path:"This PC",location:"This PC",type:"root",children:t,group:{by:"type",orderBy:"desc"},view:"tiles",sortBy:"text",orderBy:"asc"},{name:n,icon:ze.user,path:n,location:e,type:"folder"}],...t]}function Vt(e){return e==="This PC"||e==="Favourites"||e==="Recycle Bin"}function Na(e){let t,n=f(e.actionEvents),i=r(e.history),s,l;t=o("div",{className:"explorer-toolbar flex-shrink-0"},[o("div",{className:"explorer-toolbar-drag w-full h-full",["drag-region"]:"drag"}),n.element,i.element]);let a=new ResizeObserver(()=>{i.toolbarPath.checkOverflow(),n.checkOverflow()});n.disableButtons(["undo","redo","paste"]),a.observe(t);function m(){let d,v,x,w,y,L=!1;function B(){L||(L=!0,d.value=w.path,d.select(),d.focus(),v.style.borderColor="var(--blue-color)",x.style.display="none")}function M(g=!1){L=!1,d.value="",v.style.borderColor="var(--border-color)",x.style.display="flex",g&&V.focus()}function R(g){if(g.key===Ee.Enter){g.preventDefault();const N=O(d.value);e.onItemClick({text:N,location:N}),M(!0)}}function O(g){return g.charAt(g.length-1)==="/"?g.substring(0,g.length-1):g}y=ka({url:vt,imageSize:"18px 18px"});let V=o("div",{className:"explorer-toolbar-path w-full flex",style:{height:"28px"},tabIndex:-1},[v=o("div",{className:"explorer-toolbar-path-box w-full h-full flex",style:{border:"1px solid var(--border-color)"}},[o("div",{className:"explorer-toolbar-path-icon h-full",style:{width:"32px"}},y.element),o("div",{className:"relative w-full h-full"},[o("div",{className:"absolute w-full h-full flex"},[d=o("input",{name:"path-input",autocomplete:"off",inputMode:"text",className:"explorer-toolbar-path-input w-full h-full",style:{left:0,top:0,border:0,outline:0,background:"none",color:"var(--primary-text-color)",font:"inherit"},onblur:()=>{M()},onkeydown:R}),o("div",{className:"explorer-toolbar-path-history flex-shrink-0 h-full flex items-center content-center",style:{width:"28px"},innerHTML:Hn()})]),x=o("div",{className:"explorer-toolbar-path-items w-full h-full absolute flex items-center",onclick:B,style:{left:0,top:0,zIndex:1,overflowX:"auto"}})])]),o("div",{className:"explorer-toolbar-path-refresh flex-shrink-0 flex items-center content-center",style:{width:"28px",border:"1px solid var(--border-color)",borderLeft:0},innerHTML:qs(14,2)})]);function H(g){return o("div",{className:"explorer-toolbar-path-item flex h-full flex-shrink-0",onclick:I=>{I.stopPropagation()}},[o("div",{className:"explorer-toolbar-path-item-text flex items-center",onclick:()=>{const I=O(g.location);e.onItemClick({text:I,location:I})},title:g.text},o("div",{className:"text-ellipsis"},g.text)),o("div",{className:"explorer-toolbar-path-item-icon flex items-center content-center",innerHTML:Xt})])}function T(g){if(w=g,F(g.icon)&&y.setImage(g.icon),Ke(g.path)||kt(g.path)){let N="";const I=eo(),E=g.path.replace(/\\+/g,"/").split("/").filter(C=>C!=="").map((C,k)=>{N+=C+"/";let D=C;if(k===0){const S=I.findIndex($=>$.path===N);S>-1&&(D=I[S].name)}return{text:D,location:N}}).map(C=>H(C));E.unshift(H({text:"This PC",location:"This PC"})),rt(x),Dt(x,E)}else{const N=eo(),I=g.path.replace(/\\/,"/").split("/").filter(E=>E!=="").map((E,C)=>{let k=E,D=E;const S=N.findIndex($=>$.path===(C===0?E+"/":E));return S>-1&&(k=N[S].name,D=N[S].location),{text:k,location:D}}).map(E=>H(E));rt(x),Dt(x,I)}b()}function b(){const g=x.offsetWidth;x.scrollWidth>g&&(x.scrollLeft=g+x.scrollWidth)}return{element:V,setPath:T,checkOverflow:b}}function r(d){let v,x,w,y,L=An({placeholder:"Search "}),B=m(),M="";v=o("div",{className:"explorer-toolbar-top flex items-center"},[o("div",{className:"explorer-toolbar-top-col explorer-toolbar-actions flex items-center"},[x=o("div",{className:"explorer-toolbar-actions-button",innerHTML:Os(),onclick:d.onBackward}),w=o("div",{className:"explorer-toolbar-actions-button",innerHTML:Vs(),onclick:d.onForward}),y=o("div",{className:"explorer-toolbar-actions-button",innerHTML:Us(),onclick:()=>{d.onGoUp(M)}})]),o("div",{className:"explorer-toolbar-top-col explorer-toolbar-path"},[B.element]),o("div",{className:"explorer-toolbar-top-col explorer-toolbar-search"},L.element)]);function R(V){L.setPlaceHolder(`Search ${V}`)}function O(V,H,T){const b=V.length;x.classList[H>0?"remove":"add"]("disabled"),w.classList[H>=b-1?"add":"remove"]("disabled");const g=T.split("/").filter(N=>N!=="");if(g.length>1){let N=[...g];N.pop(),M=N.join("/")}y.classList[g.length<=1?"add":"remove"]("disabled")}return{element:v,toolbarPath:B,setPlaceHolder:R,checkHistoryButtons:O}}function c(){ya({title:s,placholder:"Enter folder name",parent:e.getContainer(),onSubmit(d){ie.createFolder(s+"/"+d,v=>{v&&co({title:"",width:300,height:150,parent:e.getContainer(),content:o("div",{className:"w-full h-full flex items-center content-center"},o("div",{className:"text-ellipsis line-clamp-1"},v.message))}).focusToButton("ok")})}}),l.close()}function h(d){const v=d.currentTarget,x=[{icon:"imgs/icons/Folder.png",iconType:"image",text:"Folder",onClick:()=>{c()},disabled:!F(s)||s===""||s==="This PC"||s==="Favourites"}];l=ba({triggerElement:v,options:x})}function f(d){let v,x,w,y,L,B=!1,M=!1,R={new:{onclick:h},undo:{onclick:d.onUndo},redo:{onclick:d.onRedo},copy:{onclick:d.onCopy},cut:{onclick:d.onCut},paste:{onclick:d.onPaste},open:{onclick:d.onOpen},delete:{onclick:d.onDelete},rename:{onclick:d.onRename}};v=o("div",{className:"explorer-toolbar-bottom flex items-center"},[x=o("div",{className:"explorer-toolbar-bottom-items h-full flex items-center"},[o("div",{className:"explorer-toolbar-group"},[R.new.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:h},[o("div",{className:"explorer-toolbar-bottom-item-icon",innerHTML:io(20,1.5)}),o("div",{className:"explorer-toolbar-bottom-item-text"},"New")])]),o("div",{className:"explorer-toolbar-group"},[R.undo.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.undo.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/Undo.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Undo")]),R.redo.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.redo.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/Redo.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Redo")])]),o("div",{className:"explorer-toolbar-group"},[R.copy.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.copy.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/copy.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Copy")]),R.cut.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.cut.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/scissors.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Cut")]),R.paste.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.paste.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/clipboard.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Paste")])]),o("div",{className:"explorer-toolbar-group"},[R.open.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.open.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",innerHTML:Cs}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Open")])]),o("div",{className:"explorer-toolbar-group"},[R.delete.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.delete.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Emblems/170.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Delete")]),R.rename.elem=o("div",{className:"explorer-toolbar-bottom-item",onclick:R.rename.onclick},[o("div",{className:"explorer-toolbar-bottom-item-icon",style:{backgroundImage:"url(imgs/icons/Misc/Rename.png)"}}),o("div",{className:"explorer-toolbar-bottom-item-text"},"Rename")])])]),y=o("div",{className:"explorer-overflow-action-more",style:{width:"30px",height:"30px",display:"none",marginInline:"10px"},innerHTML:ii()},w=o("div",{className:"explorer-overflow-actions flex flex-col"})),o("div",{["drag-region"]:"drag",className:"h-full flex-1"}),L=o("label",{title:'Import files from "Local Device" to this site',className:"explorer-toolbar-bottom-item explorer-import-file-button h-full",style:{marginLeft:"auto",marginRight:"5px",padding:"0 5px"}},[o("input",{name:"file-chooser",type:"file",accept:"*",style:{display:"none"},multiple:!0,onchange:e.onImportFiles}),"Import"])]);function O(){const N=x.offsetWidth,I=[];if(x.scrollWidth>N){const E=Array.from(x.children);for(let C of E)C.offsetLeft+C.offsetWidth>N?(I.push(C.cloneNode(!0)),C.style.visibility="hidden"):C.style.visibility="visible";rt(w),I.forEach(C=>{C.style.visibility="visible",w.appendChild(C)}),B||(B=!0,M=!1,y.style.display="block")}else if(!M){M=!0,B=!1;const E=Array.from(x.children);for(let C of E)C.style.visibility="visible";y.style.display="none"}}function V(N){var I,E;for(let C of N)(E=(I=R[C])==null?void 0:I.elem)==null||E.classList.remove("disabled")}function H(N){var I,E;for(let C of N)(E=(I=R[C])==null?void 0:I.elem)==null||E.classList.add("disabled")}function T(){const N=Object.keys(R);for(let I of N)R[I].elem.classList.add("disabled")}function b(){L.classList.remove("disabled")}function g(){L.classList.add("disabled")}return{element:v,checkOverflow:O,enableButtons:V,disableButtons:H,disableAllButtons:T,enableImportButton:b,disableImportButton:g}}function u(d){s=d,Vt(s)?n.disableImportButton():n.enableImportButton()}function p(d,v){if(Vt(v))n.disableButtons(["new","copy","cut","paste","open","delete","rename"]);else{const x=d.length;x===0?(n.enableButtons(["new"]),n.disableButtons(["copy","cut","open","delete","rename"])):x===1?n.enableButtons(["new","copy","cut","open","delete","rename"]):x>1&&(n.disableButtons(["rename"]),n.enableButtons(["new","copy","cut","open","delete"]))}}return{element:t,toolbarActions:n,toolbarNavigation:i,setLocation:u,setSelectedItems:p}}const Ca=e=>({"":"",folder:"File Folder",file:e.type==="file"?jt(dt(e.text)).description:"File Folder",driver:"Local Disk"})[e.type];function La(e,t){let n,i,s,l,a=0,m=0,r={...e},c=[],h=o("div",{className:"pannel-selection",style:{display:"none",pointerEvents:"none"}}),f=!1,u,p;n=o("div",{className:"pannel w-full h-full scrollable"},[h,i=o("div",{className:"pannel-selector-handler w-full h-full",onmousedown:N}),l=v(r.view)]);function d(P){t.onChange(P)}function v(P="details"){switch(P){case"extraLargeIcons":case"largeIcons":case"mediumIcons":case"smallIcons":return x(P);case"list":return R();case"details":return M();case"tiles":return O();default:return M()}}function x(P){if(F(r.group)){let _=Ho(e.items,K=>K[r.group.by]);const U=Object.keys(_).map(K=>K).sort((K,ce)=>r.group.orderBy==="asc"?K.localeCompare(ce):ce.localeCompare(K));s=o("div",{className:"pannel-items-group-container"});const j=U.length;for(let K=0;K<j;K++){const ce=U[K];let xe=_[ce];F(r.sortBy)&&(xe=xe.sort((q,J)=>r.orderBy==="asc"?q[r.sortBy].localeCompare(J[r.sortBy]):J[r.sortBy].localeCompare(q[r.sortBy])));const De=L(ce.toFirstUpperCase()+` (${xe.length})`,y(xe,P));s.appendChild(De)}return s}let A=r.items.sort((_,U)=>{const j=U.type.localeCompare(_.type),K=_.text.localeCompare(U.text);return j||K});return F(r.sortBy)&&(A=A.sort((_,U)=>r.orderBy==="asc"?_[r.sortBy].localeCompare(U[r.sortBy]):U[r.sortBy].localeCompare(_[r.sortBy]))),s=y(A,P)}function w(P){let A=o("div",{className:"pannel-item-icon-bg"});const _=o("div",{className:"pannel-item-icon flex items-end content-center",style:{backgroundImage:`url(${P.icon})`}},A);function U(j,K){const ce=K||1;_.style.backgroundImage="none",A.style.aspectRatio=ce.toString(),ce>=1?A.style.width="100%":A.style.height="100%",A.style.backgroundImage=`url(${j})`}if(P.type==="file"){const j=dt(P.name||P.text);if(Ke(P.location)){if(Pn(j))un.getThumbnail(P.location,j,U);else if(dn(j)){const K=o("div",{className:"app-association",style:{backgroundImage:`url(${bt.mediaPlayer.icon})`}});A.appendChild(K),un.getThumbnail(P.location,j,U)}}}return _}function y(P,A){let _=P.sort((U,j)=>{const K=j.type.localeCompare(U.type),ce=U.text.localeCompare(j.text);return K||ce});return o("div",{className:"pannel-items pannel-items-thumbnail "+A},_.map(U=>{let j,K;return j=o("div",{className:"w-full h-full"},K=o("div",{className:"pannel-item flex flex-col items-center content-center",info:U,ondblclick:d.bind(null,U),onmousedown:B,ondragover(ce){t.onPannelItemDragover(ce,U),j.classList.add("pannel-item-selected")},ondragleave(){j.classList.remove("pannel-item-selected")},ondrop(ce){j.classList.remove("pannel-item-selected"),t.onPannelItemDrop(ce,U)}},[w(U),o("div",{title:U.text,className:"pannel-item-text text-center"},U.text)])),Nn(K,{type:U.type,location:U.location}),j}))}function L(P,A){return o("div",{className:"pannel-items-group"},[o("div",{className:"pannel-items-group-header flex items-center",style:{padding:"3px 5px"}},[o("div",{className:"pannel-items-group-header-icon flex-shrink-0 flex items-center content-center",innerHTML:Hn(18)}),o("div",{className:"pannel-items-group-header-label flex-shrink-0"},P),o("div",{className:"pannel-items-group-header-line w-full",style:{height:"1px",backgroundColor:"var(--border-color)",marginLeft:"5px"}})]),o("div",{className:"pannel-items-group-body"},A)])}function B(P){if(P.button!==0)return;t.onItemMouseDown();const A=P.currentTarget;if(!P.shiftKey)if(P.ctrlKey)if(A.classList.contains("pannel-item-selected")){A.classList.remove("pannel-item-selected");const _=c.findIndex(U=>U.info.location===A.info.location);_>-1&&c.splice(_,1)}else A.classList.add("pannel-item-selected"),c.push(A);else k(),A.classList.add("pannel-item-selected"),c.push(A);se(t.onSelect)&&t.onSelect(c)}function M(){let P=r.items.sort((A,_)=>{const U=_.type.localeCompare(A.type),j=A.text.localeCompare(_.text);return U||j});return o("div",{className:"pannel-detail w-full"},o("table",{},[o("thead",{},o("tr",{className:"pannel-detail-header"},[o("td",{className:"pannel-detail-header-col pannel-detail-name",colSpan:2},"Name"),o("td",{className:"pannel-detail-header-col pannel-detail-date"},"Date modified"),o("td",{className:"pannel-detail-header-col pannel-detail-type"},"Type"),o("td",{className:"pannel-detail-header-col pannel-detail-size"},"Size")])),s=o("tbody",{className:"pannel-items pannel-items-details"},P.map(A=>{let _,U="";if(A.size){const j=nn(parseInt(A.size));U=j.value+" "+j.unit}return _=o("tr",{className:"pannel-item",info:A,ondblclick:d.bind(null,A),onmousedown:B,ondragover(j){t.onPannelItemDragover(j,A),_.classList.add("pannel-item-selected")},ondragleave(){_.classList.remove("pannel-item-selected")},ondrop(j){_.classList.remove("pannel-item-selected"),t.onPannelItemDrop(j,A)}},[o("td",{className:"pannel-item-icon",style:{backgroundImage:`url(${A.icon})`}}),o("td",{className:"pannel-item-col"},o("div",{className:"text-ellipsis line-clamp-1"},A.text)),o("td",{className:"pannel-item-col pannel-item-mdate pannel-detail-date"},o("div",{className:"text-ellipsis line-clamp-1"},A.properties.mdate?g(A.properties.mdate):"")),o("td",{className:"pannel-item-col pannel-item-type pannel-detail-type"},o("div",{className:"text-ellipsis line-clamp-1"},Ca(A))),o("td",{className:"pannel-item-col pannel-item-size pannel-detail-size"},U)]),Nn(_,{type:A.type,location:A.location}),_}))]))}function R(){return o("div")}function O(){if(F(r.group)){let P=Ho(e.items,U=>U.type);const A=Object.keys(P).map(U=>U).sort((U,j)=>r.group.orderBy==="asc"?U.localeCompare(j):j.localeCompare(U));s=o("div",{className:"pannel-items-group-container"});const _=A.length;for(let U=0;U<_;U++){const j=A[U];let K=P[j];F(r.sortBy)&&(K=K.sort((xe,De)=>r.orderBy==="asc"?xe[r.sortBy].localeCompare(De[r.sortBy]):De[r.sortBy].localeCompare(xe[r.sortBy])));const ce=L(j.toFirstUpperCase()+` (${K.length})`,V(K));s.appendChild(ce)}return s}return s=V(e.items)}function V(P){return o("div",{className:"pannel-items pannel-items-tiles"},P.map(A=>{let _,U;return _=o("div",{className:"w-full h-full flex items-center content-center"},U=o("div",{className:"pannel-item flex items-center",info:A,ondblclick:d.bind(null,A),onmousedown:B,ondragover(j){t.onPannelItemDragover(j,A),_.classList.add("pannel-item-selected")},ondragleave(){_.classList.remove("pannel-item-selected")},ondrop(j){_.classList.remove("pannel-item-selected"),t.onPannelItemDrop(j,A)}},[o("div",{className:"pannel-item-icon",style:{backgroundImage:`url(${A.icon})`}}),o("div",{className:"pannel-item-info w-full"},[o("div",{className:"pannel-item-text"},A.text),o("div",{className:"pannel-item-desc"},A.type==="driver"?o("div",{className:"progress w-full"},T()):""),o("div",{className:"pannel-item-size"},A.type==="driver"?b():"")])])),Nn(U,{type:A.type,location:A.location}),_}))}function H(P){F(navigator.storage)?navigator.storage.estimate().then(({quota:A,usage:_})=>{let U=_/A*100,j=nn(A),K=nn(A-_);A>2e10&&(U=(_+2e10)/A*100,K=nn(A-2e10-_)),P({available:j,free:K,percent:U})}):P({available:{value:0,unit:"B"},free:{value:0,unit:"B"},percent:0})}function T(){const P=o("div",{className:"progress-value",style:{width:"80%"}});return H(({percent:A})=>{P.style.width=A+"%"}),P}function b(){const P=o("div",{},"4 GB free of 20 GB");return H(({available:A,free:_})=>{P.textContent=`${_.value} ${_.unit} free of ${A.value} ${A.unit}`}),P}function g(P){const A=new Date(P),_=A.getDate();return no[A.getDay()]+", "+(_<10?"0"+_:_)+"-"+Kn[A.getMonth()]+"-"+A.getFullYear()+" "+zt(A)}function N(P){P.button===0&&(P.shiftKey||k(),f=!0,u={x:P.x+n.scrollLeft,y:P.y+n.scrollTop},p=n.getBoundingClientRect(),document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",E,!1))}function I(P){const A={top:n.scrollTop,left:n.scrollLeft};if(a=Math.abs(P.x+A.left-u.x),m=Math.abs(P.y+A.top-u.y),!f||a<2&&m<2)return;let _=0,U=0,j=a,K=m;P.x+A.left>u.x?U=u.x-p.left:U=P.x-p.left+A.left,P.y+A.top>u.y?_=u.y-p.top:_=P.y-p.top+A.top,re(h,{display:"initial",top:_+"px",left:U+"px",width:j+"px",height:K+"px"}),(U+j>p.width+A.left||U<A.left)&&n.scrollTo({top:P.y-p.top,left:P.x-p.left}),C({x1:U,x2:U+j,y1:_,y2:_+K},P.shiftKey)}function E(){f=!1,document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",E,!1),re(h,{display:"none",top:0,left:0,width:0,height:0}),c=Array.from(s.getElementsByClassName("pannel-item-selected")),se(t.onSelected)&&t.onSelected(c)}function C(P,A){const _=Array.from(s.getElementsByClassName("pannel-item")).map(j=>j),U=[];for(let j of _){let K=j.offsetLeft,ce=j.offsetTop,xe=j.offsetWidth,De=j.offsetHeight;K+xe<P.x1||K>P.x2||ce+De<P.y1||ce>P.y2?A||j.classList.remove("pannel-item-selected"):(U.push(j),j.classList.add("pannel-item-selected"))}se(t.onSelect)&&t.onSelect(U)}function k(){for(let P of c)P.classList.remove("pannel-item-selected");c=[],se(t.onSelect)&&t.onSelect([])}function D(P){F(l)&&l.remove(),l=v(P),n.appendChild(l),$()}function S(){i.style.height="0px"}function $(){S(),i.style.height=n.scrollHeight+"px"}return{element:n,setView:D,updateSelectionHandler:$}}function Ta(e){let t,n,i,s,l,a;t=o("div",{className:"explorer-status-bar flex items-center flex-shrink-0"},[n=o("div",{className:"explorer-status-bar-item"},"0 items"),i=o("div",{className:"explorer-status-bar-item"}),s=o("div",{className:"explorer-status-bar-item"}),o("div",{className:"explorer-status-bar-item",style:{marginLeft:"auto",marginRight:"10px"}},[l=o("div",{className:"explorer-status-bar-view button-presentation",innerHTML:Ys(16),onclick:m.bind(null,"details")}),a=o("div",{className:"explorer-status-bar-view button-presentation",innerHTML:si(16),onclick:m.bind(null,"mediumIcons")})])]);function m(u){e.onViewChange(u)}function r(u){l.classList.remove("selected"),a.classList.remove("selected"),u==="details"?l.classList.add("selected"):u==="mediumIcons"&&a.classList.add("selected")}function c(u=0){n.textContent=u+" items"}function h(u=0){i.textContent=u>0?u+" items selected":""}function f(u){s.textContent=u}return{element:t,setItemCount:c,setSelectedItem:h,setView:r,setSize:f}}const Ti=(e,t,n=!1)=>{let i;const s=[];let l,a=[],m;const r=eo(),c=Li({onTabChange:p,onTabClose:v,onNewTabActionClick:H,onDragOut:L,onDragOver:()=>{},onDragEnd(T,b){b&&(l.content.setCurrentWindow(i),c.showNewButton())},getTabCount:u,moveWindow:f}),h=o("div",{className:"window-tabs-container explorer-tabs-container w-full"},[o("div",{className:"tabs-drag-handle w-full h-full absolute",["drag-region"]:"drag"}),c.element]);h.addEventListener("tabdragover",y,!1);function f(T,b){re(i.element,{pointerEvents:"none"}),document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",I,!1);let g;function N(E){i.checkWindowSnap({x:E.x,y:E.y}),i.setBounds({top:E.y-b.deltaTop,left:E.x-b.deltaLeft});const C=document.elementFromPoint(E.x,E.y);if(C instanceof Element){const k=C.closest(".explorer-tabs-container");F(k)&&g!==k&&(g=k,I(),i.close(),k.dispatchEvent(new CustomEvent("tabdragover",{bubbles:!0,detail:{x:E.x,dx:b.dl,y:E.y,tabId:T.id,windowId:T.windowId,icon:T.icon,text:T.text,content:l.content}})))}}function I(){i.setWindowSnap(),re(i.element,{pointerEvents:"initial"}),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",I,!1)}}function u(){return s.length}function p(T){if(m===T.id)return;m=T.id,l=d(T.id);const b=a.findLastIndex(g=>g===T.id);b>-1&&a.splice(b,1),a.unshift(T.id),c.setActiveTab(T.id),i.setContent(l.content.element),l.content.updateSelectionHandler(),w(l.id,l.text,l.icon)}function d(T){return s.find(b=>b.id===T)}function v(T,b){const g=s.findIndex(I=>I.id===T.id);c.remove(T.id),g>-1&&(b||s[g].content.dispose(),s.splice(g,1));const N=a.findIndex(I=>I===T.id);N>-1&&a.splice(N,1),s.length===0?i.close():(l=d(a[0]),c.setActiveTab(l.id),w(l.id,l.text,l.icon),i.setContent(l.content.element))}function x(T){let b=i,g,N="wtct"+pn(),I;const E=[];let C=0,k="",D=[],S;const $=X=>{S=X},P=Na({onItemClick:X=>{let ne=!(Ke(X.location)||kt(X.location));U(X,!0,ne)},onImportFiles(X){const ne=X.target;Vt(k)||oa(k,Array.from(ne.files))},history:{onBackward:K,onForward:ce,onGoUp:xe},getContainer:()=>i.element,getCurrentLocation:()=>k,actionEvents:{onDelete(){const X=D.map(ne=>{const oe={type:ne.info.type,location:ne.info.location};return ne.info.type==="file"&&(oe.size=ne.info.properties.size),oe});ia(X,k)}}}),A=xa({onChange:X=>{U(X,!0,!0)}}),_=Ta({onViewChange:X=>{g.setView(X),_.setView(X),ie.setView(k,{type:X,sortBy:"name",orderBy:"asc"})}});function U(X,ne=!0,oe=!1){var ue;if(_.setSelectedItem(0),P.setLocation(X.location),ne&&(E.splice(C+1,E.length),((ue=E[E.length-1])==null?void 0:ue.text)!==X.text&&(C=E.push(X)-1)),oe){const je=r.findIndex(te=>te.name===X.text||te.path===X.text),we=r[je];if(je>-1)if(k=we.location,P.setLocation(k),De(),we.type==="root"){const te=we.children.filter(he=>he.type==="folder").map(he=>new Promise((Ae,be)=>{ie.stats(he.location,(ae,pe)=>{ae?be(ae):Ae({...pe,location:he.location})})})),me=we.children.filter(he=>he.type!=="folder");Promise.all(te).then(he=>{const be=me.concat(he).map(ae=>({icon:ae.icon||(ae.type==="file"?jt(dt(ae.name)).icon:vt),text:ae.name,properties:{...ae},type:ae.type,location:ae.location}));de(be,{view:we.view,group:we.group,sortBy:we.sortBy,orderBy:we.orderBy})}),P.toolbarNavigation.toolbarPath.setPath({text:we.name,icon:we.icon,path:we.path,location:we.location}),P.toolbarNavigation.setPlaceHolder(we.name),se(S)&&S(T,we.name,we.icon)}else(we.type==="folder"||we.type==="driver")&&Te(we.location,we.path,{view:we.view,group:we.group,sortBy:we.sortBy,orderBy:we.orderBy});else Te(X.location)}else Te(X.location);function Te(je,we,te){ie.readFolder(je,(me,he)=>{if(me)console.log(me);else{k=je,P.setLocation(k),De();const Ae=he.map(be=>{var ae;return{icon:be.icon||(be.type==="file"?jt(dt(be.name)).icon:vt),text:be.name,properties:{...be},type:be.type,location:je+"/"+be.name,name:be.name,cdate:be.cdate.toString(),size:(ae=be.size)==null?void 0:ae.toString()}});ie.stats(je,(be,ae)=>{if(be)console.log(be);else{P.toolbarNavigation.toolbarPath.setPath({text:ae.text||ae.name,icon:ae.icon||vt,path:F(we)?we:je,location:je}),se(S)&&S(T,ae.text||ae.name,ae.icon||vt),P.toolbarNavigation.setPlaceHolder(ae.text||ae.name);let pe={};F(ae.view)?Object.assign(pe,{...ae.view,view:ae.view.type}):F(te)&&(pe=te),de(Ae,pe)}})}})}}function j(){let X=!1,ne=k;function oe(){X&&ne===k&&(U({location:k,text:k},!1),X=!1)}function Te(ue){return ue.substring(k.length+1,ue.length).split("/")}ie.addEventListener("added",N,_t(()=>{oe()},{limit:1e3,onFunction(ue){ue.includes(k)&&Te(ue).length===1&&(X||(X=!0),ne=k)}})),ie.addEventListener("modified",N,_t(()=>{oe()},{limit:1e3,onFunction(ue){ue.includes(k)&&Te(ue).length===1&&(X||(X=!0),ne=k)}})),ie.addEventListener("removed",N,_t(()=>{oe()},{limit:1e3,onFunction(ue){ue.includes(k)&&Te(ue).length===1&&(X||(X=!0),ne=k)}}))}j();function K(){C-=1,U(E[C],!1,!0)}function ce(){C+=1,U(E[C],!1,!0)}function xe(X){U({text:X,location:X})}function De(){P.toolbarNavigation.checkHistoryButtons(E,C,k)}function q(X){X.preventDefault(),Vt(k)||Cn(k,X.dataTransfer.items)}function J(X){X.preventDefault(),X.stopPropagation(),X.dataTransfer.dropEffect="copy"}function W(X,ne){X.preventDefault(),X.stopPropagation(),ne.type==="folder"||ne.type==="driver"?Cn(ne.location,X.dataTransfer.items):Vt(k)||Cn(k,X.dataTransfer.items)}function de(X,ne){setTimeout(()=>{rt(I),P.setSelectedItems([],k),_.setItemCount(X.length),_.setView(ne.view),!F(X)||(X==null?void 0:X.length)===0?I.appendChild(o("div",{style:{textAlign:"center",padding:"20px 0"}},"This folder is empty")):(g=La({selectable:!0,items:X,...ne},{onItemMouseDown(){},onChange:oe=>{if(oe.type==="folder"||oe.type==="driver")U({text:oe.location,location:oe.location},!0);else{const Te=dt(oe.text),ue=jt(Te);Fe(ue.appName,oe.location)}},onSelect(oe){if(D=oe,P.setSelectedItems(oe,k),_.setSelectedItem(oe.length),oe.length>0&&oe.every(ue=>ue.info.type==="file")){const ue=nn(ge(oe));_.setSize(ue.value+" "+ue.unit)}else _.setSize("")},onPannelItemDragover:J,onPannelItemDrop:W}),I.appendChild(g.element),g.updateSelectionHandler())},50)}function He(){b.addEventListener("resize",Ze(()=>{g.updateSelectionHandler()})),b.addEventListener("passiveResize",Ze(()=>{g.updateSelectionHandler()})),b.addEventListener("maximize",Ze(()=>{g.updateSelectionHandler()})),b.addEventListener("unmaximize",Ze(()=>{g.updateSelectionHandler()})),b.addEventListener("unSnap",Ze(()=>{g.updateSelectionHandler()})),b.addEventListener("restore",Ze(()=>{g.updateSelectionHandler()}))}function Z(){b.removeListeners("resize",Ze(()=>{})),b.removeListeners("passiveResize",Ze(()=>{})),b.removeListeners("maximize",Ze(()=>{})),b.removeListeners("unmaximize",Ze(()=>{})),b.removeListeners("unSnap",Ze(()=>{})),b.removeListeners("restore",Ze(()=>{}))}function ee(){He()}ee();function ge(X){let ne=0,oe=X.length;for(let Te=0;Te<oe;Te++){const ue=X[Te];ue.info.type==="file"&&(ne+=ue.info.properties.size)}return ne}const le=o("div",{className:"explorer-container w-full h-full relative"},[P.element,o("div",{className:"explorer-body flex flex-col w-full h-full"},[o("div",{className:"w-full flex",style:{height:"calc(100% - 25px)"}},[A.element,I=o("div",{className:"explorer-content h-full flex-1",ondragover(X){Vt(k)&&(X.dataTransfer.dropEffect="none")},ondrop:q})]),_.element])]);function ve(X){b=X,ee()}function ye(){ie.removeListeners("added",N),ie.removeListeners("modified",N),ie.removeListeners("removed",N)}return{element:le,toolbar:P,listenEvent:$,routeTo:U,listenFileChange:j,setCurrentWindow:ve,updateSelectionHandler(){g==null||g.updateSelectionHandler()},addWindowEvents:He,removeWindowEvents:Z,dispose:ye}}function w(T,b,g){i.setTitle(b),F(g)&&i.setIcon(g);const N=c.getTab(T);F(N)&&(N.setTitle(b),F(g)&&N.setIcon(g));const I=d(T);F(I)&&(I.text=b,I.icon=g)}function y(T){c.hideNewButton(),i.focus();const b=T,g={icon:b.detail.icon,text:b.detail.text,content:b.detail.content},N=c.add(g);N.triggerMouseMove(b),l={id:N.id,text:g.text,icon:g.icon,content:g.content},l.content.listenEvent((I,E,C)=>{w(N.id,E,C)}),l.content.listenFileChange(),a.unshift(N.id),s.push(l),i.setContent(g.content.element)}function L(T,b){const g=i.getBounds(),N={top:b.top-b.deltaTop,left:b.left-b.deltaLeft,width:g.width,height:g.height},I=d(T.id);I.content.listenEvent(null),I.content.removeWindowEvents(),T.content=I.content;const E=Ti(null,N,!0);E.addTabAndMoveWindow(T,{...b,windowBounds:N},E.window)}function B(T,b,g){const N=c.add(T);c.disabledScrollbar(),re(N.element,{position:"absolute",left:b.deltaLeft-b.dl+"px"}),l={id:N.id,text:T.text,icon:T.icon,content:T.content},l.content.setCurrentWindow(g),l.content.addWindowEvents(),a.unshift(N.id),m=N.id,l.content.listenEvent((I,E,C)=>{w(l.id,E,C)}),l.content.listenFileChange(),s.push(l),i.setContent(l.content.element),w(l.id,l.text,l.icon),M(T,b,N),c.hideNewButton()}function M(T,b,g){re(i.element,{pointerEvents:"none"}),document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",E,!1);let N;function I(C){i.checkWindowSnap({x:C.x,y:C.y}),i.setBounds({top:C.y-b.deltaTop,left:C.x-b.deltaLeft});const k=document.elementFromPoint(C.x,C.y);if(k instanceof Element){const D=k.closest(".explorer-tabs-container");F(D)&&N!==D&&(N=D,E(),i.close(),D.dispatchEvent(new CustomEvent("tabdragover",{bubbles:!0,detail:{x:C.x,dx:b.dl,y:C.y,tabId:T.id,windowId:T.windowId,icon:T.icon,text:T.text,content:l.content}})))}}function E(){c.enabledScrollbar(),i.setWindowSnap(),c.showNewButton(),re(i.element,{pointerEvents:"initial"}),g.element.style.removeProperty("position"),g.element.style.removeProperty("left"),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",E,!1)}}function R(T){const b={text:T,icon:"imgs/icons/Folder.png"},g=c.add(b),N=x(g.id);N.listenEvent((I,E,C)=>{w(I,E,C)}),N.routeTo({text:T,location:T},!0,!0),l={id:g.id,text:b.text,icon:b.icon,content:N},a.unshift(g.id),s.push(l),i.setContent(N.element),w(b.id,b.text,b.icon)}function O(T){const b=c.add({...T,windowId:i.id});let g=x(b.id);g.listenEvent(w),l={id:b.id,text:T.text,icon:T.icon,content:g},a.unshift(b.id),m=b.id,s.push(l),i.setContent(g.element),g.routeTo({text:T.text},!0,!0),w(T.id,T.text,T.icon)}function V(){O({text:"This PC",windowId:i.id,icon:"imgs/icons/Computer.png"})}function H(){V()}return i=ut({args:e,icon:Y.explorer.icon,hideIcon:!0,name:Y.explorer.name,title:Y.explorer.productName,hideTitle:!0,titlebarHeight:yt,titlebarContent:h,top:(t==null?void 0:t.top)||50,left:(t==null?void 0:t.left)||50,width:(t==null?void 0:t.width)||800,height:(t==null?void 0:t.height)||520,className:"explorer-app-window",transprencyContent:!0}),n||(F(e)?R(e):V()),i.addEventListener("close",()=>{for(let T=0;T<s.length;T++)s[T].content.dispose()}),i.addEventListener("secondInstance",T=>{i.isVisible()||i.show(),i.focus(),F(T)?R(T):V()}),i.addEventListener("restore",function(){i.isMaximized()||i.setTitlebarHeight(yt)}),i.addEventListener("unmaximize",function(){i.isMaximized()||i.setTitlebarHeight(yt)}),i.addEventListener("unSnap",function(){i.isMaximized()||i.setTitlebarHeight(yt)}),i.addEventListener("maximize",function(){i.setTitlebarHeight(Bt)}),{addTabAndMoveWindow:B,tabs:c,window:i}};function Ia(e){let t=ao(Y.explorer.name);F(t)?t.window.executeListeners("secondInstance",e):Ti(e)}function qe(e,t){const n=Po(50,200),i=Po(50,200);ut({icon:e.icon,name:e.name,title:e.productName,top:n,left:i,width:450,height:300,content:()=>o("div",{className:"w-full h-full flex content-center items-center"},o("h3",{},"In Progress"))})}function Sa(e,t){let n;n=o("div",{tabIndex:0,className:"menu-strip flex items-center",onfocus:t.onfocus,onblur:t.onblur});for(let l=0;l<e.length;l++){const a=e[l],m=o("div",{className:"menu-strip-item flex-shrink-0"},o("div",{className:"h-full flex items-center"},a.text));i(m,a.children),n.appendChild(m)}function i(l,a){if(F(a)){const m=o("div",{className:"context-menu"});a.forEach(r=>[s(m,r)]),l.appendChild(m)}}function s(l,a){if(a.divider){let c=o("div",{className:"menu-item-divider"});l.appendChild(c);return}const m=F(a.children)&&a.children.length>0,r=o("div",{className:"menu-item"+(a.disabled?" disabled":"")+(a.emphasis?" emphasis":"")+(a.checked?" checked":""),onclick:()=>{!a.disabled&&!m&&se(t.onItemClick)&&t.onItemClick(a)}},[o("div",{className:"menu-item-icon",innerHTML:a.checked?mi():"",style:{pointerEvents:"none"}}),o("div",{className:"menu-item-text",style:{pointerEvents:"none"}},a.text||"")]);if(a.shortcut){let c=o("div",{className:"menu-item-shortcut",style:{pointerEvents:"none"}},a.shortcut);r.appendChild(c)}if(m){let c=o("div",{className:"menu-item-arrow flex items-center",innerHTML:Xt});r.appendChild(c)}l.appendChild(r),i(r,a.children)}return n}function Ii(e,t,n=!1){let i,s;const l=[];let a,m=[],r;const c=Li({onTabChange:u,onTabClose:d,onNewTabActionClick:v,onDragOver:()=>{},onDragOut:M,onDragEnd(H,T){T&&c.showNewButton()},getTabCount:f,moveWindow:h});function h(H,T){re(s.element,{pointerEvents:"none"}),document.addEventListener("mousemove",g,!1),document.addEventListener("mouseup",N,!1);let b;function g(I){s.checkWindowSnap({x:I.x,y:I.y}),s.setBounds({top:I.y-T.deltaTop,left:I.x-T.deltaLeft});const E=document.elementFromPoint(I.x,I.y);if(E instanceof Element){const C=E.closest(".notepad-tabs-container");F(C)&&b!==C&&(b=C,N(),s.close(),C.dispatchEvent(new CustomEvent("tabdragover",{bubbles:!0,detail:{x:I.x,dx:T.dl,y:I.y,tabId:H.id,windowId:H.windowId,icon:H.icon,text:H.text,content:a.element}})))}}function N(){s.setWindowSnap(),re(s.element,{pointerEvents:"initial"}),setTimeout(()=>{a.element.input.focus()},10),document.removeEventListener("mousemove",g,!1),document.removeEventListener("mouseup",N,!1)}}function f(){return l.length}function u(H){if(r===H.id)return;r=H.id,a=p(H.id);const T=m.findLastIndex(b=>b===H.id);T>-1&&m.splice(T,1),m.unshift(H.id),c.setActiveTab(H.id),s.setContent(a.element.element),setTimeout(()=>{a.element.input.focus()},10),L(H.id,H.text,H.icon)}function p(H){return l.find(T=>T.id===H)}function d(H){const T=l.findIndex(g=>g.id===H.id);T>-1&&l.splice(T,1);const b=m.findIndex(g=>g===H.id);b>-1&&m.splice(b,1),l.length===0?s.close():(a=p(m[0]),c.setActiveTab(a.id),L(a.id,a.text),s.setContent(a.element.element))}function v(){x()}function x(){w({text:"Untitled - Notepad",icon:"imgs/icons/Apps/notepad.png"})}function w(H,T){const b=c.add({...H,windowId:s.id});let g;F(T)?g=T:g=y(),a={id:b.id,text:H.text,element:g},m.unshift(b.id),l.push(a),s.setContent(g.element),setTimeout(()=>{g.input.focus()},10),L(H.id,H.text)}function y(){let H,T,b,g;H=o("div",{className:"w-full h-full flex flex-col"},[Sa([{text:"File",children:[{text:"New",shortcut:"Ctrl+N"},{text:"Open",shortcut:"Ctrl+O"},{text:"Save",shortcut:"Ctrl+S"},{text:"SaveAs",shortcut:"Ctrl+Shift+S"},{divider:!0},{text:"Close",shortcut:"Alt+W"}]},{text:"Edit",children:[{text:"Undo",disabled:!0,shortcut:"Ctrl+Z"},{divider:!0},{text:"Cut",disabled:!0,shortcut:"Ctrl+X"},{text:"Copy",disabled:!0,shortcut:"Ctrl+C"},{text:"Paste",disabled:!0,shortcut:"Ctrl+V"},{text:"Delete",disabled:!0,shortcut:"Del"},{divider:!0},{text:"Find",shortcut:"Ctrl+F"},{text:"Replace...",shortcut:"Ctrl+H"},{divider:!0},{text:"Select All",shortcut:"Ctrl+A"}]},{text:"Format",children:[{text:"Wordwrap",checked:!0},{text:"Font..."}]},{text:"View",children:[{text:"Zoom",children:[{text:"Zoom In",shortcut:"Ctrl+Plus"},{text:"Zoom Out",shortcut:"Ctrl+Minus"},{text:"Restore Default Zoom",shortcut:"Ctrl+0"}]},{text:"Status Bar",checked:!0}]},{text:"Help",children:[{text:"View Help"},{text:"Send Feedback"},{divider:!0},{text:"About Notepad"}]}],{onItemClick(){T.focus()}}),T=o("textarea",{tabIndex:0,name:"notepad-input",className:"w-full h-full scrollable scroll-y",style:{display:"block",border:0,borderTop:"1px solid var(--border-color)",outline:0,padding:"5px",color:"var(--primary-text-color)",backgroundColor:"transparent",font:"400 14px Consolas",cursor:"default",resize:"none"},onselect(C){C.preventDefault()},onkeydown:()=>{I(),document.onkeyup=E},onmousedown:()=>{I(),E(),document.onmousemove=()=>{I(),E()},document.onmouseup=E}}),o("div",{className:"note-pad-status-bar w-full flex items-center flex-shrink-0",style:{borderTop:"1px solid var(--border-color)",minHeight:"25px",paddingInline:"10px"}},[o("div",{className:"note-pad-status-left h-full"}),o("div",{className:"note-pad-status-right flex h-full",style:{marginLeft:"auto"}},[b=o("div",{className:"note-pad-status-bar-item"}),g=o("div",{className:"note-pad-status-bar-item"}),o("div",{className:"note-pad-status-bar-item"},"100%"),o("div",{className:"note-pad-status-bar-item"},"Windows (CRLF)"),o("div",{className:"note-pad-status-bar-item"},"UTF-8")])])]),I(),E();function I(){setTimeout(()=>{const C=T.value.substring(0,T.selectionStart).split(`
`),k=C.length,D=C[C.length-1].length;g.textContent=`Ln ${k}, Col ${D}`},150)}function E(){setTimeout(()=>{const C=T.value.substring(T.selectionStart,T.selectionEnd);b.textContent=(C.length>0?C.length:0)+" selected"},100)}return{element:H,input:T}}function L(H,T,b){s.setTitle(T);const g=c.getTab(H);F(g)&&(g.setIcon(b||"imgs/icons/Apps/notepad.png"),g.setTitle(T))}function B(H){c.hideNewButton(),s.focus();const T=H,b={icon:T.detail.icon,text:T.detail.text,content:T.detail.content},g=c.add(b);g.triggerMouseMove(T),a={id:g.id,text:b.text,element:b.content},m.unshift(g.id),l.push(a),s.setContent(b.content.element),setTimeout(()=>{a.element.input.focus()},10),L(g.id,a.text)}function M(H,T){const b=s.getBounds(),g={top:T.top-T.deltaTop,left:T.left-T.deltaLeft,width:b.width,height:b.height},N=p(H.id);H.content=N.element,Ii(null,g,!0).addTabAndMoveWindow(H,{...T,windowBounds:g})}function R(H,T){const b=c.add(H);re(b.element,{position:"absolute",left:T.deltaLeft-T.dl+"px"}),a={id:b.id,text:H.text,element:H.content},m.unshift(b.id),l.push(a),s.setContent(a.element.element),setTimeout(()=>{a.element.input.focus()},10),L(b.id,H.text,H.icon),O(H,T,b),c.hideNewButton()}function O(H,T,b){re(s.element,{pointerEvents:"none"}),document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",I,!1);let g;function N(E){s.checkWindowSnap({x:E.x,y:E.y}),s.setBounds({top:E.y-T.deltaTop,left:E.x-T.deltaLeft,width:T.windowBounds.width,height:T.windowBounds.height});const C=document.elementFromPoint(E.x,E.y);if(C instanceof Element){const k=C.closest(".notepad-tabs-container");F(k)&&g!==k&&(g=k,I(),s.close(),k.dispatchEvent(new CustomEvent("tabdragover",{bubbles:!0,detail:{x:E.x,dx:T.dl,y:E.y,tabId:H.id,windowId:H.windowId,icon:H.icon,text:H.text,content:a.element}})))}}function I(){s.setWindowSnap(),c.showNewButton(),re(s.element,{pointerEvents:"initial"}),b.element.style.removeProperty("position"),b.element.style.removeProperty("left"),setTimeout(()=>{a.element.input.focus()},10),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",I,!1)}}function V(H){Qn(H,(T,b)=>{if(T)return;const g=nt(H)+" - Notepad";s.setTitle(g);const N={text:g,icon:"imgs/icons/Apps/notepad.png"},I=c.add({...N,windowId:s.id}),E=y();E.input.value=b,a={id:I.id,text:g,element:E},m.unshift(I.id),l.push(a),s.setContent(E.element),E.input.focus(),L(I.id,N.text,N.icon)})}return i=o("div",{className:"window-tabs-container notepad-tabs-container w-full"},[o("div",{className:"tabs-drag-handle w-full h-full absolute",["drag-region"]:"drag"}),c.element]),i.addEventListener("tabdragover",B,!1),s=ut({args:e,icon:Y.notepad.icon,hideIcon:!0,name:Y.notepad.name,title:Y.notepad.productName,hideTitle:!0,top:(t==null?void 0:t.top)||50,left:(t==null?void 0:t.left)||100,width:(t==null?void 0:t.width)||700,height:(t==null?void 0:t.height)||450,titlebarHeight:yt,titlebarContent:i,className:"notepad-app-window",transprencyContent:!0}),n||(F(e)?V(e):x()),s.addEventListener("customdrop",H=>{H!=null&&H.type&&H.type==="file"&&dt(H.args)===".txt"&&Qn(H.args,(T,b)=>{T||(a.element.input.value=b,s.focus(),L(a.id,nt(H.args)+" - NotePad"))})}),s.addEventListener("secondInstance",H=>{s.isVisible()||s.show(),F(H)?V(H):x(),s.focus()}),s.addEventListener("restore",()=>{s.isMaximized()||s.setTitlebarHeight(yt)}),s.addEventListener("unmaximize",()=>{s.isMaximized()||s.setTitlebarHeight(yt)}),s.addEventListener("unSnap",()=>{s.isMaximized()||s.setTitlebarHeight(yt)}),s.addEventListener("maximize",()=>{s.setTitlebarHeight(Bt)}),{addTabAndMoveWindow:R,tabs:c,window:s}}const Ea=e=>{let t=ao(Y.notepad.name);F(t)?t.window.executeListeners("secondInstance",e):Ii(e)};const En=1.7777777777777777,ln=120,ht=140,Mn=160,pt=8,Nt=48,$o=200,Ma=200,Wo=40,to=Nt,Da=60,Oo=45,Jt=4,Ba="#bbb",za=`
<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="#333" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke: var(--stroke-color)">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="12" y1="5" x2="12" y2="19" />
  <line x1="16" y1="9" x2="12" y2="5" />
  <line x1="8" y1="9" x2="12" y2="5" />
</svg>`,Ha=`
<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="#333" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke: var(--stroke-color)">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="12" y1="5" x2="12" y2="19" />
  <line x1="16" y1="15" x2="12" y2="19" />
  <line x1="8" y1="15" x2="12" y2="19" />
</svg>
`;function Vo(e,t){typeof t>"u"||t===null||(t instanceof HTMLElement?e.appendChild(t):t instanceof Array?Si(e,t):e.appendChild(document.createTextNode(t.toString())))}function Si(e,t){t instanceof Array?t.forEach(n=>{Vo(e,n)}):Vo(e,t)}function Aa(e,t){for(let n in t)n.indexOf("-")>-1?e.style.setProperty(n,t[n]):e.style[n]=t[n]}function Pe(e,t,n){let i=document.createElement(e);if(t){const s=t;for(let l in s)if(l==="style"){const a=s[l];Aa(i,a)}else if(l.indexOf("-")>-1||l.indexOf(":")>-1){const a=s[l];i.setAttribute(l,a)}else i[l]=s[l]}return n&&Si(i,n),i}function Uo(e){let t=e.firstChild;for(;t;)e.removeChild(t),t=e.firstChild}function Ei(e=0,t=[],n=4){const i=t.length;let s=[0],l=!1,a=0;function m(u=[],p=0,d=0,v=0,x){const w=t[d];if(!w)return u;const y=d+1-p,L=y>1?(y-1)*n:0;v+=w.ratio;const B=v*ht,M=(e-L)/v,R=M<=Mn+a&&M>=ln,O=e-B<=0?M/Mn:M/ln,V=Math.pow(Math.abs(O),3)*100,H=v;if(R)u.push({edge:d,badness:V,rowHeight:M,flag:1,itemCount:y,boxSpacing:n,ratio:H}),a=0,l=!1;else{if(B+L>e)return l?(a=0,u.length===0&&(M<ln||!x?u.push({edge:d,badness:V,rowHeight:M,flag:y>1?-1:0,ratio:H,itemCount:y,boxSpacing:n}):x&&u.push(x)),u):(l=!0,a=20,m(u,p,d,v-w.ratio,x));if(d===(i>1?i-1:0))return u.push({edge:d,badness:V,flag:0,rowHeight:ht,ratio:H,itemCount:y,boxSpacing:n}),u;x={edge:d,badness:V,rowHeight:M,flag:y>1?1:0,ratio:H,itemCount:y,boxSpacing:n}}return m(u,p,d+1,v,x)}let r=[];function c(){let u=s.shift();if(typeof u>"u"||u===null||!t[u])return;let p=m([],u,u),d;d=p[0];for(let x=1;x<p.length;x++){const w=p[x];w.badness<d.badness&&(d=w)}const v={flag:d.flag,row:[u,d.edge],ratio:d.ratio||En,itemCount:d.itemCount,boxSpacing:d.boxSpacing,rowHeight:d.rowHeight||ht};r.push(v),d.edge+1<=i&&s.push(d.edge+1)}for(;s.length>0;)c();let h=r.length,f=r[h-1];return h>1&&f.flag===0&&(f.rowHeight=r[h-2].rowHeight),{paths:r,rowCount:r.length}}function Pa(e=0,t=[],n=48){const i=t.length;let s=[0];function l(r=[],c=0,h=0,f=0,u=0,p){const d=t[h];if(!d)return r;u+=d.itemCount>1?(d.itemCount-1)*pt:0;const v=h+1-c,x=(v>1?(v-1)*n:0)+u;f+=d.ratio;const w=f*ht,y=(e-x)/f,L=y<=Mn&&y>=ln,B=e-w<=0?y/Mn:y/ln,M=Math.pow(Math.abs(B),3)*100;if(L)r.push({edge:h,badness:M,rowHeight:y,flag:1,itemCount:v,boxSpacing:n,ratio:f});else{if(w+x>e)return r.length===0&&(p?r.push(p):r.push({edge:h,badness:M,rowHeight:y,flag:1,itemCount:v,boxSpacing:n,ratio:f})),r;if(h===(i>1?i-1:0))return r.push({edge:h,badness:M,flag:0,rowHeight:ht,ratio:f,itemCount:v,boxSpacing:n}),r;p={edge:h,badness:M,rowHeight:ht,flag:0,itemCount:v,boxSpacing:n,ratio:f}}return l(r,c,h+1,f,u,p)}let a=[];function m(){let r=s.shift();if(typeof r>"u"||r===null||!t[r])return;const c=t[r];let h=t[r+1];if(c.rowCount>1||typeof h<"u"&&h.rowCount>1)a.push({flag:1,row:[r,r],boxSpacing:n,rowHeight:ht,ratio:c.ratio||En}),r+1<=i&&s.push(r+1);else{let f=l([],r,r,0,0),u=f[0];for(let d=1;d<f.length;d++){const v=f[d];v.badness<u.badness&&(u=v)}const p={flag:u.flag,row:[r,u.edge],rowHeight:u.rowHeight||ht,boxSpacing:u.boxSpacing,ratio:u.ratio||En};a.push(p),u.edge+1<=i&&s.push(u.edge+1)}}for(;s.length>0;)m();return{paths:a,rowCount:a.length}}function _o(e=300,t){const n=t.segments.map(c=>{const{paths:h,rowCount:f}=Ei(e,c.items),u=h[0];return{rows:h,rowCount:f,ratio:u.ratio||En,itemCount:f===1?u.row[1]+1-u.row[0]:0}}),i=n.map(({rowCount:c,ratio:h,itemCount:f})=>({rowCount:c,ratio:h,itemCount:f})),s=Pa(e,i,Nt),l={index:t.index,name:t.name,loaded:!0,left:0,width:e,height:0,segments:[],segmentInfo:[]};let a=0,m=0;for(let c=0;c<s.paths.length;c++){const h=s.paths[c],f=h.flag,u=h.row[1]+1-h.row[0];let p=0;for(let d=h.row[0];d<=h.row[1];d++){const v=n[d];var r=t.segments[d];const x={index:r.index,name:r.name,top:a,left:p,width:0,height:0,items:[],flag:f};let w=0,y=0;for(let L=0;L<v.rows.length;L++){const B=v.rows[L],M=h.rowHeight||B.rowHeight||ht,R=Math.floor(M);let O=0;for(let V=B.row[0];V<=B.row[1];V++){const H=r.items[V],T=Math.round(H.ratio*M);let b={...H,top:w+Nt,left:O,width:f===0?T:u>1?d===h.row[1]&&V===B.row[1]?e-(p+O):T:B.flag===0?T:V===B.row[1]&&B.itemCount>1?e-O:T,height:R};x.items.push(b),O+=b.width+pt}y=O-pt,w+=R+pt,p+=O-pt+Nt}x.width=v.rowCount===1?y:e,m=w-pt+to,x.height=m,d===h.row[1]&&(a+=m),l.segments.push(x),l.segmentInfo.push({index:x.index,top:x.top,height:x.height})}}return l.height=a,l}function jo(e=300,t){const n={index:t.index,name:t.name,left:0,width:e,height:0,segments:[],segmentInfo:[],loaded:!0},i=t.segments;let s=0;for(let l=0;l<i.length;l++){const a=i[l],{paths:m,rowCount:r}=Ei(e,a.items),c={index:a.index,name:a.name,top:s,left:0,width:e,height:0,items:[]};let h=0;for(let f=0;f<r;f++){const u=m[f],p=u.rowHeight,d=Math.floor(p);let v=0;for(let x=u.row[0];x<=u.row[1];x++){const w=a.items[x],y=Math.round(w.ratio*p);let L={...w,top:h+Nt,left:v,width:u.flag===0?y:x===u.row[1]&&u.itemCount>1?e-v:y,height:d+to};c.items.push(L),v+=L.width+pt}h+=d+pt+Nt}c.height=h-pt+to,s+=c.height,n.segments.push(c),n.segmentInfo.push({index:c.index,top:c.top,height:c.height})}return n.height=s,n}function Mi(e,t,n,i){let s=0;return e+t<i-$o&&(s=-1),e>i+n+$o&&(s=-1),s===0}function Ra(e=0,t=[],n,i){const s=[];for(let l=0;l<t.length;l++){const a=t[l];Mi(e+a.top,a.height,n,i)&&s.push(a.index)}return s}function yn(e,t,n,i=10,s){let l,a,m,r;return function(){const c=this,h=arguments;window.cancelAnimationFrame(r),r=window.requestAnimationFrame(()=>{typeof s=="function"&&s.apply(c,h,r)}),window.clearTimeout(m),m=window.setTimeout(()=>{typeof n=="function"&&n.apply(c,h)},i),a?(window.clearTimeout(l),l=window.setTimeout(function(){Date.now()-a>=t&&(e.apply(c,h),a=Date.now())},t-(Date.now()-a))):(e.apply(c,h),a=Date.now())}}function Fa(e=[],t,n,i={},s){var l;let a=e.length,m={position:"absolute",top:"0",bottom:"0",right:"0",width:Da+"px",height:"100%",margin:"auto",background:"none",fontFamily:"inherit",cursor:"ns-resize"};i.style&&(m={...m,...i.style});let r=[],c=48,h=(c-2)/2,f=t,u,p,d,v,x,w,y,L,B,M,R;const O=s.getBounds();let V={width:O.width,height:O.height},H=!1,T=!1,b=!1,g=!1,N=0,I=0,E=!1,C,k=!1,D=!1,S=!1;d=Pe("div",{className:"grid-scrollbar",style:m},v=Pe("div",{className:"scrollbar-wrapper w-full h-full"},[x=Pe("div",{className:"grid-scrollbar-inner w-full",style:{top:h+(i.hideButton?0:Oo)+"px",bottom:h+(i.hideButton?0:Oo)+2+"px",cursor:m.cursor},onmouseover:_,onmouseleave:U},[Pe("div",{className:"w-full h-full",onmousemove:J,onmousedown:P},[w=Pe("div",{className:"grid-scrollbar-thumb-primary"}),y=Pe("div",{className:"grid-scrollbar-thumb-secondary",tabIndex:0,style:{top:-(c/2-1)+"px",height:c+"px",cursor:m.cursor},onmouseover:_,onmouseleave:U,onkeydown:j,onclick:K},Pe("div",{className:"grid-scrollbar-thumb-secondary-inner"},[B=Pe("div",{className:"grid-scrollbar-thumb-text"}),Pe("div",{className:"grid-scrollbar-thumb-line",style:{top:h+"px"}})]))]),L=Pe("div",{className:"grid-scrollbar-parts"})]),i.hideButton?null:M=Pe("button",{className:"grid-scrollbar-button grid-scrollbar-button-up disabled",innerHTML:za}),i.hideButton?null:R=Pe("button",{className:"grid-scrollbar-button grid-scrollbar-button-down",innerHTML:Ha})])),(l=n.parentElement)==null||l.appendChild(d),$();function $(){n.scrollHeight/n.getBoundingClientRect().height<=1?d.style.display="none":d.style.display="initial"}if(de(),W(),Z(),X(0),ne(0),s.addEventListener("passiveResize",yn(xe,100),!1),s.addEventListener("resize",yn(xe,100),!1),i.autoHide){let te=function(){g=!0,v.classList.add("mouse-over"),v.classList.remove("fade-out"),v.classList.add("fade-in")},me=function(){g=!1,!T&&!k&&(v.classList.remove("fade-in"),v.classList.add("fade-out"),v.classList.remove("mouse-over"))};v.classList.add("auto-hide"),v.addEventListener("mouseover",te,!1),v.addEventListener("mouseleave",me,!1),setTimeout(()=>{n.addEventListener("scroll",ce,!1)},50)}i.hideButton||(ve(M,D,()=>{ue()}),ve(R,S,()=>{Te()}));function P(){w.style.visibility="hidden",T=!0,document.addEventListener("mousemove",J,!1),document.addEventListener("mouseup",A,!1)}function A(){w.style.visibility="visible",T=!1,document.removeEventListener("mousemove",J,!1),document.removeEventListener("mouseup",A,!1)}function _(){H=!0}function U(){H=!1}function j(te){te.key==="ArrowUp"?ue():te.key==="ArrowDown"&&Te()}function K(te){let me=te.y-u.top;oe(me),le()}function ce(){k||(setTimeout(()=>{E||(g||(v.classList.remove("fade-out"),v.classList.add("fade-in")),v.classList.add("scrolling"))},1e3),k=!0),C&&clearTimeout(C),C=setTimeout(()=>{v.classList.remove("scrolling"),g||(v.classList.add("fade-out"),v.classList.remove("fade-in"),v.classList.remove("mouse-over")),E=!1,k=!1},2e3)}function xe(){const te=s.getBounds();V.height!==te.height&&(V={width:te.width,height:te.height},de(),W(),Z(),De(!0),le(),$())}function De(te){const me=n.scrollTop/(n.scrollHeight-p.height)*u.height;X(me),(te||!H)&&ne(me),le()}function q(te=0,me=0){N=te,I=me;const he=N/(I-p.height)*u.height;X(he),H||ne(he),le()}function J(te){te.stopPropagation();let me=te.y-u.top;T?(oe(me),ne(me)):H&&ne(me)}function W(){p=n.getBoundingClientRect()}function de(){u=x.getBoundingClientRect()}function He(te,me){e=te,a=te.length,f=me,Z();const he=N/(I-p.height)*u.height;X(he),H||ne(he),$(),le()}function Z(){ee(),ge()}function ee(){let te=0,me=[];function he(ae){const pe=me[ae+1];return pe?pe.isMileStone?pe:he(ae+1):null}for(let ae=0;ae<a;ae++){const pe=e[ae];let Ct=pe.height/f*u.height;me.push({index:pe.index,name:pe.name,top:te,height:Ct,isMileStone:pe.isMileStone,year:pe.year}),te+=Ct}let Ae=-20,be=0;for(let ae=0;ae<a;ae++){const pe=me[ae];if(pe.isMileStone)pe.top+pe.height-be>=20&&(pe.visible=!1,pe.displayMileStone=!0,be=pe.top),Ae=pe.top;else{const Ct=he(ae),gn=pe.top-Ae>=10;Ct?gn&&Ct.top-pe.top>=10&&(pe.visible=!0,Ae=pe.top):gn&&(pe.visible=!0,Ae=pe.top)}}r=me}function ge(){L.innerHTML="";let te=r.length;for(let me=0;me<te;me++){const he=r[me];(he.visible||he.isMileStone)&&L.appendChild(Pe("div",{style:{position:"absolute",top:he.top+he.height-Jt+"px",right:"10px",width:Jt+"px",height:Jt+"px",display:"flex",alignItem:"center",justifyContent:"flex-end",boxSizing:"border-box"}},[he.displayMileStone?Pe("div",{className:"grid-scrollbar-point-text",style:{position:"absolute",top:"-5px",right:"-2px"}},he.year):null,he.visible?Pe("div",{style:{width:Jt+"px",height:Jt+"px",borderRadius:"100%",background:Ba,boxSizing:"border-box"}}):null]))}}function le(){i.hideButton||(N===0?(D=!0,S=!1,M.classList.add("disabled"),R.classList.remove("disabled")):N+p.height===I?(D=!1,S=!0,R.classList.add("disabled"),M.classList.remove("disabled")):(D=!1,S=!1,b||(M.classList.remove("disabled"),R.classList.remove("disabled"))))}function ve(te,me=!1,he){if(me)return;let Ae;te.addEventListener("mousedown",be,!1);function be(){b=!0,Ae=requestAnimationFrame(pe),document.addEventListener("mouseup",ae,!1)}function ae(){cancelAnimationFrame(Ae),setTimeout(()=>{cancelAnimationFrame(Ae),b=!1,le()},50),document.removeEventListener("mouseup",ae,!1)}function pe(){Ae=requestAnimationFrame(pe),typeof he=="function"&&he()}}function ye(te){B.textContent=te}function X(te=0){w.style.transform=`translate3d(0px, ${te}px, 0px)`}function ne(te=0){if(te>=0&&te<=u.height){y.style.transform=`translate3d(0px, ${te}px, 0px)`;let me,he=r.length;for(let Ae=0;Ae<he;Ae++){const be=r[Ae];te>=be.top&&te<be.top+be.height&&(me=be)}me&&ye(me.name)}}function oe(te=0){n.scroll({top:te/u.height*(n.scrollHeight-p.height)})}function Te(){n.scrollTop+=Wo}function ue(){n.scrollTop-=Wo}function je(){s.removeEventListener("resize",yn(xe,100),!1),s.removeEventListener("passiveResize",yn(xe,100),!1)}function we(){y.focus()}return{element:d,getContainerInfo:de,update:He,updateScroll:q,focus:we,destroy:je}}function $a(e,t,n,i,s,l,a,m,r){let c=0,h=[],f=[],u=0,p=0,d=i.padding||120,v=[],x=t,w,y,L,B,M=!1,R,O=0,V=0;const H=Pe("div",{className:"justified-layout w-full"},L=Pe("div",{tabIndex:-1,className:"grid-scroll-panel w-full h-full scrollable scroll-y"+(i.useNativeScrollbar?" use-native-scrollbar":""),style:{position:"relative"},onkeydown:Z=>{Z.altKey&&Z.key==="s"&&(i.useNativeScrollbar||y.focus())},onscroll:$}));e.appendChild(H),x.length===0?(r instanceof HTMLElement&&(Uo(L),L.appendChild(r)),N()):(L.appendChild(T()),b(),n!==null?(C(),N(),setTimeout(()=>{L.scrollTop=n.scrollTop,O=n.scrollTop,O===0&&K(v)},10)):g()),i.resizeSmooth?(s.addEventListener("passiveResize",k,!1),s.addEventListener("resize",k,!1)):(s.addEventListener("passiveResize",D,!1),s.addEventListener("resize",D,!1));function T(){return B=Pe("div",{className:"grid-layout-container",style:{position:"relative",marginBottom:Nt+"px"}},w=Pe("div",{className:"layout"}))}function b(){const Z=L.getBoundingClientRect();p=Z.height;let ee=Math.round(Z.width)-d;s.getBounds().width<600&&(ee=ee-ee*.2+d),u=ee-ee%2,ce(u)}function g(){I(),N(),U(),K(v),A()}function N(){i.useNativeScrollbar||(y=Fa(f,c,L,i.scrollbar,s))}function I(){const Z=[],ee=[];let ge=0;for(let le=0;le<x.length;le++){const ve=x[le],ye=i.useNavieLayout?jo(u,ve):_o(u,ve);ee.push({index:ve.index,name:ve.name,top:ge,width:u,height:ye.height,loaded:!0,isMileStone:ve.isMileStone,year:ve.year}),Z.push(ye),ge+=ye.height}h=Z,f=ee,c=ge,xe(ge)}function E(){typeof m=="function"&&m({layoutHeight:c,scrollTop:O,loadedSections:h,sectionBounds:f,lastSectionInViewport:v})}function C(){c=n.layoutHeight,h=n.loadedSections,f=n.sectionBounds,v=n.lastSectionInViewport,xe(c)}function k(){x.length!==0&&(R&&cancelAnimationFrame(R),R=requestAnimationFrame(()=>{S()}))}function D(){x.length!==0&&(R&&clearTimeout(R),R=setTimeout(()=>{S()},50))}function S(){De(),b(),I(),i.useNativeScrollbar||y.update(f,c),U(),K(v),A()}function $(){M||(requestAnimationFrame(()=>{O=L.scrollTop,V=L.scrollHeight,P(),i.useNativeScrollbar||y.updateScroll(O,V),M=!1,setTimeout(()=>{A()},Ma)}),M=!0)}function P(){U(),K(v)}function A(){E(),_()}function _(){const Z=U(!0),ee=Z.map(le=>le.index).toString(),ge=v.map(le=>le.index).toString();ee!==ge&&(v=Z,A())}function U(Z){const ee=[];let ge=f.length;for(let le=0;le<ge;le++){const ve=f[le];Mi(ve.top,ve.height,p,O)&&ee.push(ve)}return Z||(v=ee),ee}function j(Z){let ee=w.querySelector(`.grid-section[data-index="${Z.index}"]`);if(ee||(ee=Pe("div",{className:"grid-section",sectionIndex:Z.index,"data-index":Z.index,style:{top:Z.top+"px",height:Z.height+"px"}}),w.appendChild(ee)),Z.loaded){const ge=h[Z.index],le=Ra(Z.top,ge.segmentInfo,p,O),ve=[...ee.getElementsByClassName("grid-segment")];for(let ye=0;ye<ve.length;ye++){const X=ve[ye];let ne=!1;for(let oe=0;oe<le.length;oe++){const Te=le[oe];if(parseInt(X.dataset.index||"")===Te){ne=!0;break}}ne||X.remove()}for(let ye=0;ye<le.length;ye++){const X=le[ye],ne=ge.segments[X];if(!ee.querySelector(`.grid-segment[data-index="${X}"]`)){const oe=Pe("div",{className:"grid-segment",segmentIndex:X,"data-index":X,style:{top:ne.top+"px",left:ne.left+"px",width:ne.width+"px",height:ne.height+"px"}},a(ne)),Te=ne.items.length;for(let ue=0;ue<Te;ue++){const je=ne.items[ue];let we=l(je);oe.appendChild(we)}ee.appendChild(oe)}}}}function K(Z=[]){const ee=[...w.getElementsByClassName("grid-section")];for(let ge=0;ge<ee.length;ge++){const le=ee[ge];let ve=!1;for(let ye=0;ye<Z.length;ye++){const X=Z[ye];if(parseInt(le.dataset.index||"")===X.index){ve=!0;break}}ve||le.remove()}for(let ge=0;ge<Z.length;ge++){const le=Z[ge];j(le)}}function ce(Z=0){B.style.width=Z+"px"}function xe(Z=0){w.style.height=Z+"px"}function De(){w.innerHTML=""}function q(){x=[],h=[],f=[],i.useNativeScrollbar||y.update(f,0)}function J(Z){Z.length>0?(Uo(L),L.appendChild(T()),x=Z,S(),i.useNativeScrollbar||(y.getContainerInfo(),y.update(f,c)),L.scrollTop=O):(q(),L.innerHTML="",r instanceof HTMLElement&&L.appendChild(r),xe(p-Nt),i.useNativeScrollbar||y.update([],0))}function W(Z){const{sectionName:ee,sections:ge}=Z;x=ge;const le=f.find(oe=>oe.name===ee);if(!le)return;let ve;i.useNavieLayout?ve=jo(u,x[le.index]):ve=_o(u,x[le.index]);let ye=le.height-ve.height;f[le.index].height=ve.height,h[le.index]=ve;let X=f.length;for(let oe=le.index+1;oe<X;oe++)f[oe].top-=ye;c-=ye,xe(c),U();let ne=v.length;for(let oe=0;oe<ne;oe++){const Te=v[oe];let ue=w.querySelector(`.grid-section[data-index="${Te.index}"]`);ue instanceof HTMLElement&&ue.remove()}K(v),i.useNativeScrollbar||(y.getContainerInfo(),y.update(f,c))}function de(){i.useNativeScrollbar||y.destroy(),i.resizeSmooth?s.removeEventListener("resize",k,!1):s.removeEventListener("resize",D,!1)}function He(){i.useNativeScrollbar||y.getContainerInfo()}return{element:H,update:J,updateItem:W,recalculateLayout:S,updateScrollbar:He,destroy:de}}function mn(e){let t,n,i,s=!1,l=e.options.find(x=>x.value===e.value),a=[];function m(x){l=x,t.textContent=x.text,e.onChange&&e.onChange(x),p(),h()}const r=e.value&&F(l)?l.text:"Select",c=e.options.map(x=>{const w=x.value===e.value,y=o("div",{className:"select-option"+(w?" selected":""),onclick:m.bind(null,x)},[o("div",{className:"select-option-decorator"}),o("div",{className:"select-option-label"},x.text)]);return a.push({id:x.value,element:y}),y});n=o("div",{className:"select-options"},c);function h(){n.classList.remove("show"),s=!1,i.classList.remove("show"),document.removeEventListener("click",f,!1),window.removeEventListener("touchstart",u,!1)}function f(x){x.target!==i&&!i.contains(x.target)&&h()}function u(x){x.target!==i&&!i.contains(x.target)&&h()}function p(){a.forEach(x=>{x.element.classList.remove("selected"),l&&x.id===l.value&&x.element.classList.add("selected")})}function d(){s=!s,i.classList[s?"add":"remove"]("show"),s&&(p(),document.addEventListener("mousedown",f,!1),window.addEventListener("touchstart",u,!1)),n.classList.toggle("show")}i=o("div",{className:"select"+(e.noBackground?" no-background":"")},[o("div",{className:"select-placeholder flex items-center",onclick:d},[t=o("div",{className:"select-placeholder-text flex-1"},r),o("div",{className:"select-placeholder-icon",innerHTML:ni})]),n=o("div",{className:"select-options"},c)]);function v(x){const w=e.options.find(y=>y.value===x);w&&m(w)}return{element:i,setValue:v}}const Di="imgs/apps/photos/",Wa=Di+"Thumbnails/",Oa=e=>{if(F(e)){n(e);return}const t=i=>{const s=window.photoData;let l,a,m,r;a=o("div",{className:"app-photos w-full h-full standard-content"},o("div",{className:"w-full h-full flex flex-col"},[o("div",{className:"photos-app-toolbar flex items-center"},[o("div",{className:"photos-app-toolbar-col flex-1"},[o("div",{className:"photos-app-toolbar-nav flex items-center"},[o("div",{className:"photos-app-toolbar-nav-item active"},"Collection"),o("div",{className:"photos-app-toolbar-nav-item"},"Albums"),o("div",{className:"photos-app-toolbar-nav-item"},"Folders")])]),o("div",{className:"photos-app-toolbar-col flex-1 flex content-center"},An({placeholder:"Search photos or things..."}).element),o("div",{className:"photos-app-toolbar-col photos-app-toolbar-actions flex-1 flex content-end"},[o("div",{className:"photos-app-toolbar-action flex items-center"},[o("div",{className:"photos-app-toolbar-action-icon",innerHTML:Xs(20)}),o("div",{className:"photos-app-toolbar-action-text"},"New")]),o("div",{className:"photos-app-toolbar-action flex items-center"},[o("div",{className:"photos-app-toolbar-action-icon",innerHTML:_s(20)}),o("div",{className:"photos-app-toolbar-action-text"},"Select")]),o("div",{className:"photos-app-toolbar-action flex items-center"},[o("div",{className:"photos-app-toolbar-action-icon",innerHTML:js(20)}),o("div",{className:"photos-app-toolbar-action-text"},"Import")])])]),m=o("div",{className:"photos-app-content w-full"})])),i.addEventListener("secondInstance",u=>{i.isVisible()||i.show(),i.focus(),n(u)}),i.addEventListener("dragend",()=>{F(l)&&l.updateScrollbar()}),i.addEventListener("ready",()=>{lt(m,c()),l=$a(r,s,null,{},i,h,f,()=>{})}),i.addEventListener("restore",()=>{l.recalculateLayout()}),i.addEventListener("snap",()=>{l.recalculateLayout()});function c(){return o("div",{className:"w-full h-full"},[o("div",{className:"photos-app-grid-header flex items-center w-full"},[o("div",{className:"flex items-center flex-1"},[o("div",{className:"flex-shrink-0",style:{marginRight:"10px"}},"View By"),mn({value:"datetaken",options:[{text:"Date taken",value:"datetaken"},{text:"Recently added",value:"recentlyadded"}]}).element]),o("div",{className:"flex items-center flex-1"})]),r=o("div",{className:"photos-app-grid w-full"})])}function h(u){const p=window.encodeURI(Wa+u.name),d=window.encodeURI(Di+u.name);let v={};return u.name&&(v.backgroundImage=`url('${p}')`),o("div",{title:u.name,className:"grid-item",style:{top:u.top+"px",left:u.left+"px",width:u.width+"px",height:u.height+"px"}},[o("div",{className:"grid-item-content w-full h-full",style:v,onclick:()=>{n(d)}})])}function f(u){return o("div",{className:"segment-heading flex items-center"},o("div",{className:"segment-heading-inner flex items-center full-height"},o("div",{title:u.name,className:"segment-heading-text text-ellipsis line-clamp-1"},u.name)))}return a};function n(i){F(i)&&Fe("photoViewer",i)}ut({args:e,icon:Y.photos.icon,hideIcon:!0,name:Y.photos.name,title:Y.photos.productName,top:100,left:100,width:980,height:585,center:!0,fluidContent:!0,singleInstance:!0,transprencyContent:!0,content:t})},fn={system:{icon:"imgs/icons/Desktop.png",iconType:"image",text:"System",items:{display:{icon:"",text:"Display",desc:"Monitors, brightness, nightlight, display profile"},sound:{icon:"",text:"Sound",desc:"Volume levels, ouput, input sound devices"},noitification:{icon:"",text:"Noitification",desc:"Alerts from apps and system"},focusAssist:{icon:"",text:"Focus Assist",desc:"Notifications, automatic rules"},powerAndBatery:{icon:"",text:"Power & batery",desc:"Sleep, batery usage, batery saver"},storage:{icon:"",text:"Storage",desc:"View storage usage on driver"},troubleshoot:{icon:"",text:"Troubleshoot",desc:"Recommended troubleshooters, preferences, history"},recovery:{icon:"",text:"Recovery",desc:"Reset, advanced startup, go back"}}},bluetoothAndDevice:{icon:"imgs/icons/Misc/Bluetooth.png",text:"Bluetooth & Devices"},networkAndInternet:{icon:"imgs/icons/Misc/wifi.png",text:"Network & Intenet"},personalization:{icon:"imgs/icons/Personalization.png",iconType:"image",text:"Personalization",items:{background:{icon:"",text:"Background",desc:"Change desktop background image"},colors:{icon:"",text:"Colors",desc:"Accent color, transparency, dark theme"},lockScreen:{icon:"",text:"Lock Screen",desc:"Background image, notifications"},theme:{icon:"",text:"Themes",desc:"Customize window theme"},font:{icon:"",text:"Fonts",desc:"Browser installed fonts or install new fonts"},start:{icon:"",text:"Start",desc:"Pinned apps, remommended"},taskbar:{icon:"",text:"Taskbar",desc:"Taskbar arrangement, position"}}},apps:{icon:"imgs/icons/Misc/15.png",text:"Apps"},accounts:{icon:"imgs/icons/Users.png",iconType:"image",text:"Accounts"},timeAndLanguage:{icon:"imgs/icons/Misc/Time And Language.png",text:"Time & Language"},gaming:{icon:"imgs/icons/Misc/Gaming.png",text:"Gaming"},accessibility:{icon:"imgs/icons/Help.png",text:"Accessibility"},privacyAndSecurity:{icon:"imgs/icons/Security.png",text:"Privacy & Security"},windowUpdate:{icon:"imgs/icons/Emblems/1401.png",text:"Window Update"}},Xo=Object.keys(fn).map((e,t)=>{const n=fn[e];let i=Object.create(null);return i={name:e,icon:n.icon,text:n.text},t===0&&(i.active=!0),i});function Va(e){return o("label",{className:"button "+(e.className||"")},[o("input",{type:"file",accept:e.accept||"",className:"button "+(e.className||""),style:{display:"none"},onchange:e.onChange}),e.children])}function gt(e){return o("div",{className:"setting-nav-row flex flex-wrap"+(e.hasIcon?" has-icon":"")},[o("div",{className:"setting-nav-row-left flex-1"+(F(e.contentCenter)||F(e.itemsCenter)?" flex":"")+(e.contentCenter?" content-center":"")+(e.itemsCenter?" items-center":"")},e==null?void 0:e.contentLeft),o("div",{className:"setting-nav-row-right flex-shrink-0"},e==null?void 0:e.contentRight)])}function tt(e,t){let n=!1,i,s,l;function a(){if(e.isNav){t(e.path);return}n=!n,i.classList[n?"add":"remove"]("expanded"),s.classList[n?"add":"remove"]("show"),l.classList[n?"add":"remove"]("rotate"),s.scrollIntoView()}i=o("div",{className:"setting-nav-item"+(e.isNav?"":" no-hover"),onclick:e.isNav?t.bind(null,e.path):null},[o("div",{className:"setting-nav-item-header flex"},[e.icon?o("div",{className:"setting-nav-item-icon flex items-center content-center flex-shrink-0",innerHTML:e.icon}):null,o("div",{className:"setting-nav-item-info flex-1 flex flex-col content-center"},[o("div",{className:"setting-nav-item-name flex items-center"},e.text),e.desc?o("div",{className:"setting-nav-item-desc flex items-center"},e.desc):null]),e.control?o("div",{className:"setting-nav-item-control flex items-center"},e.control):null,l=o("div",{className:"setting-nav-item-icon setting-nav-item-icon-more flex items-center content-center flex-shrink-0",innerHTML:Xt,onclick:r=>{r.stopPropagation(),a()}})]),e.isNav?null:s=o("div",{className:"setting-nav-item-content"},e.content)]),e.expanded&&a();function m(r){rt(s),Dt(s,r)}return{element:i,setContent:m}}function po(e,t){return o("div",{className:"setting-nav-list"},e.map(n=>tt(n,t).element))}function Ua(e,t,n){return o("div",{className:"setting-group"},[o("div",{className:"setting-label"},e),o("div",{className:"setting-items"},po(t,n))])}function _a(e){let t,n,i=[];function s(a){e(a)}t=o("div",{className:"settings-recent-images-container"},[o("div",{className:"settings-recent-images-header"},"Recent Images"),n=o("div",{className:"settings-recent-images flex flex-wrap"},l())]);function l(){return fe.getState("recentImages").recentImages.map((m,r)=>{let c=o("div",{key:r,className:"settings-recent-image",onclick:s.bind(null,m)},o("div",{className:"settings-recent-image-inner",style:{myBackgroundImage:m.thumbnailPath}}));return i.push({id:m.path,element:c}),c})}return Me(G.backgroundImageChange,"settingRecentImage",()=>{rt(n),Dt(n,l())}),t}function Bi(e){const{themes:t,themeIndex:n,customTheme:i}=fe.getState(["themes","themeIndex","customTheme"]),l=(n>-1?t[n]:i).backgroundImageStyle,a={};F(e.backgroundImage)&&(a.myBackgroundImage=e.backgroundImage);let m=o("div",{className:"settings-screen-preview",style:a},o("div",{className:"settings-screen-preview-inner"},[o("div",{className:"settings-screen-preview-taskbar"}),o("div",{className:"settings-screen-preview-card"},[o("div",{className:"settings-screen-preview-card-placeholder"},[o("div",{className:"settings-screen-preview-card-placeholder-line"}),o("div",{className:"settings-screen-preview-card-placeholder-line"}),o("div",{className:"settings-screen-preview-card-placeholder-line"}),o("div",{className:"settings-screen-preview-card-placeholder-line half"})]),o("div",{className:"settings-screen-preview-card-button"})])]));Gn(m,l);function r(h){m.style.myBackgroundImage=h}function c(h){Gn(m,h)}return{element:m,changeBackground:r,setBackgroundStyle:c}}function ja(){const{themeIndex:e,themes:t,customTheme:n}=fe.getState(["themeIndex","themes","customTheme"]),s=(e>-1?t[e]:n).background,l=Bi({});let a,m;a=mn({options:[{id:"solid",text:"Solid Color",value:"solid"},{id:"slideshow",text:"Slideshow",value:"slideshow"},{id:"picture",text:"Picture",value:"picture"}],value:"picture",onChange:d=>{m.setContent(h(d.value))}});function r(d){const x=d.target.files[0];if(!x)return;const w=URL.createObjectURL(x),y=at.getState("USER_HOME").USER_HOME+"/AppData/Microsoft/Windows/Desktop/Background/",L=y+x.name,B=y+"Thumbnails/"+x.name;ie.writeFile(y+x.name,x,M=>{M||uo(w,(R,O)=>{ie.writeFile(B,O,V=>{if(!V){const H={name:x.name,path:L,thumbnailPath:B};Ve.setBackgroundImage(H),l.changeBackground(R)}})})})}function c(){const{themeIndex:d,themes:v,customTheme:x}=fe.getState(["themeIndex","themes","customTheme"]),y=(d>-1?v[d]:x).backgroundImageStyle;return[gt({contentLeft:_a(p)}),gt({contentLeft:"Choose a photo",contentRight:Va({accept:"image/png, image/jpeg",children:"Choose a photo",onChange:r}),itemsCenter:!0}),gt({contentLeft:"Choose a fit for your desktop image",contentRight:mn({options:[{id:"fill",text:"Fill",value:"fill"},{id:"fit",text:"Fit",value:"fit"},{id:"stretch",text:"Stretch",value:"stretch"},{id:"center",text:"Center",value:"center"},{id:"tile",text:"Tile",value:"tile"},{id:"span",text:"Span",value:"span"}],value:y.toLowerCase(),onChange:L=>{l.setBackgroundStyle(L.value),Ve.setBackgroundStyle(L.value),wt({backgroundImageStyle:L.text})}}).element,itemsCenter:!0})]}function h(d){switch(d){case"solid":return gt({contentLeft:"Solid Color"});case"slideshow":return gt({contentLeft:"Slideshow"});case"picture":return c()}return""}m=tt({name:"background",text:"Personalize your Background",icon:"",desc:"A picture background applies to your current desktop. Solid color or slideshow background apply to all your desktops.",path:"background",control:a.element,expanded:!0,content:c()});let f=o("div",{className:"setting-system flex flex-wrap"},[o("div",{className:"w-full background-selector"},[l.element,m.element,Ua("Related Settings",[{name:"contras theme",text:"Contrast Theme",icon:"",desc:"Color themes for low vision light sensitvity",path:"contras theme"}])])]);u(s);function u(d){l.changeBackground(d.thumbnailPath)}function p(d){u(d),Ve.setBackgroundImage(d)}return{element:f,dispose:()=>{}}}function _n(e,t,n){let i,s;function l(c){const h=c.target;typeof n=="function"&&n(h.checked),a(h.checked)}function a(c){m.classList[c?"add":"remove"]("checked"),s.innerHTML=c?Bs:""}const m=o("div",{className:"checkbox"},o("label",{className:"flex items-center"},[i=o("input",{type:"checkbox",style:{display:"none"},checked:t,onchange:l}),s=o("div",{className:"checkbox-mark flex items-center content-center"}),o("div",{className:"checkbox-label"},e)]));a(t);function r(c){i.checked=c,a(c)}return{element:m,setChecked:r}}function Xa(e){let t,n,i,s=0;function l(p){i=t.getBoundingClientRect(),s=f(p.clientX),u(s),document.addEventListener("mousemove",m,!1),document.addEventListener("mouseup",c,!1),e!=null&&e.onChange&&e.onChange(s),e!=null&&e.onDidChange&&e.onDidChange(s)}function a(p){i=t.getBoundingClientRect(),s=f(p.touches[0].clientX),u(s),window.addEventListener("touchmove",r,!1),window.addEventListener("touchend",h,!1),e!=null&&e.onChange&&e.onChange(s),e!=null&&e.onDidChange&&e.onDidChange(s)}function m(p){p.clientX<i.left||p.clientX>i.left+i.width||(s=f(p.clientX),u(s),e!=null&&e.onChange&&e.onChange(s))}function r(p){const d=p.touches[0];d.clientX<i.left||d.clientX>i.left+i.width||(s=f(d.clientX),u(s),e!=null&&e.onChange&&e.onChange(s))}function c(){e!=null&&e.onDidChange&&e.onDidChange(s),document.removeEventListener("mousemove",m,!1),document.removeEventListener("mouseup",c,!1)}function h(){e!=null&&e.onDidChange&&e.onDidChange(s),window.removeEventListener("touchmove",r,!1),window.removeEventListener("touchend",h,!1)}t=o("div",{className:"hue-picker",style:{position:"relative",width:"360px",height:"30px"},onmousedown:l,ontouchstart:a},n=o("div",{className:"hue-picker-mark"}));function f(p=0){return p-i.left}function u(p=0){n.style.left=p-1+"px"}return{element:t,setValue:u}}function hn(e){let t=!1,n;n=o("div",{className:"toggle",onclick:()=>{i(),e.onChange&&e.onChange(t)}},[o("div",{className:"toggle-button"}),o("div",{className:"toggle-indicator"}),e.showLabel?o("div",{className:"toggle-label"},e.label):null]),s(e.checked);function i(){t=!t,n.classList.toggle("checked",t)}function s(l){t=l,n.classList.toggle("checked",t)}return{element:n,get checked(){return t},set checked(l){s(l)}}}const bn="setting-color";function qa(){let{themes:e,themeIndex:t,customTheme:n}=fe.getState(["themes","themeIndex","customTheme"]);const i=t>-1?e[t]:n,{useTitleBarAccentColor:s,useTaskbarAndStartMenuAccentColor:l,useWindowBorderAccentColor:a,accentColor:m,transparency:r,dark:c}=i;let h=hn({label:"Dark Theme",checked:c,onChange:w=>{mo(w)}}),f=hn({label:"Dark Theme",checked:r,onChange:w=>{fo(w)}}),u=Xa({onChange:d,onDidChange:v}),p=o("div",{className:"setting-personalization-colors"},[tt({name:"darktheme",text:"Dark Theme",icon:"",desc:"Dark theme for all windows",path:"personalization/colors/darktheme",control:h.element}).element,tt({name:"transparency",text:"Transparency",icon:"",desc:"Transparency for all windows",path:"personalization/colors/transparency",control:f.element}).element,tt({name:"accentColor",text:"Accent Color",icon:"",desc:"Choose your accent color",path:"personalization/colors/accentColor",expanded:!0,content:gt({contentLeft:o("div",null,u.element)})}).element,tt({name:"showAccentColor",text:"Show Accent Color",icon:"",expanded:!0,desc:"Show accent color on the following surfaces",path:"personalization/colors/showAccentColor",content:gt({contentLeft:[o("div",null,_n("Window Titlebar",s,w=>{Ut("use-titlebar-accent-color",w),wt({useTitleBarAccentColor:w})}).element),o("div",null,_n("Start menu, Taskbar,...",l,w=>{Ut("use-startmenu-and-taskbar-accent-color",w),wt({useTaskbarAndStartMenuAccentColor:w})}).element),o("div",null,_n("Window Borders",a,w=>{Ut("use-window-border-accent-color",w),wt({useWindowBorderAccentColor:w})}).element)]})}).element]);u.setValue(m.h);function d(w){xi({h:w,s:i.dark?100:70,l:i.dark?60:50},!1)}function v(w){wt({accentColor:{h:w,s:i.dark?100:70,l:i.dark?60:50}})}Me(G.themeChange,bn,w=>{h.checked=w}),Me(G.transparentChange,bn,w=>{f.checked=w});function x(){p.remove(),p=null,an(G.themeChange,bn),an(G.nightLightChange,bn)}return{element:p,dispose:x}}function Ka(e){const{themes:t,themeIndex:n}=fe.getState(["themes","themeIndex"]);let i=n,s;function l(a,m,r){const{themeIndex:c}=fe.getState(["themeIndex"]);c>-1&&r===i||(i=r,Array.from(s.children).forEach(h=>{h.classList.remove("selected-item")}),a.classList.add("selected-item"),e(m,r))}return Me(G.customThemeChange,"quicktheme",()=>{Array.from(s.children).forEach(a=>{a.classList.remove("selected-item")})}),s=o("div",{className:"setting-quick-theme flex",onBeforeRemove(){an(G.customThemeChange,"quicktheme")}},t.map((a,m)=>o("div",{className:"setting-quick-theme-item"+(m===i?" active selected-item":""),onclick:r=>{l(r.currentTarget,a,m)}},o("div",{className:"setting-quick-theme-item-inner"},[o("div",{className:"setting-quick-theme-item-image",style:{backgroundImage:`url("${a.background.thumbnailPath}")`}}),o("div",{className:"setting-quick-theme-item-color flex items-end content-center",style:{backgroundColor:a.dark?"#333":"#f8f8f8"}},o("div",{className:"setting-quick-theme-item-color-accent",style:{backgroundColor:`hsl(${a.accentColor.h},${a.accentColor.s}%,${a.accentColor.l}%)`}}))])))),s}function Ya(e){let t=fn.personalization.items,n;n=Object.keys(t).map(v=>{const x=t[v];return{isNav:!0,name:v,text:x.text,icon:x.icon,desc:x.desc,path:"personalization/"+v}});const{roundedCorner:i,useBorder:s,themes:l,themeIndex:a,customTheme:m}=fe.getState(["roundedCorner","useBorder","backgroundImage","themes","themeIndex","customTheme"]),r=a>-1?l[a]:m;Jn(i);const c={isNav:!1,name:"roundedCorner",icon:"",text:"Rounded Corner",desc:"Atjust window and controls corner radius",path:"personalization/roundedCorner",control:hn({label:"Rounded Corner",checked:i,onChange:v=>{Jn(v),fe.setState({roundedCorner:v})}}).element},h={isNav:!1,name:"useBorder",icon:"",text:"Window Border",desc:"Show window border",path:"personalization/useBorder",control:hn({checked:s,onChange:v=>{wi(v),fe.setState({useBorder:v})}}).element},f=Bi({});function u(v,x,w=!0){bi(v),d(v.background),w&&fe.setState({themeIndex:x})}let p=o("div",{className:"setting-personalization"},[o("div",{className:"w-full flex flex-wrap"},[o("div",{style:{marginTop:"28px",marginRight:"40px"}},f.element),o("div",{className:"flex-1"},[o("div",{style:{height:"26px",fontWeight:"bold",fontSize:"14px"}},"Select a theme to apply"),Ka(u)])]),po(n,e),tt(c,e).element,tt(h,e).element]);d(r.background);function d(v){f.changeBackground(v.thumbnailPath)}return{element:p,dispose:()=>{}}}function zi(e){return e?o("div",{className:"setting-help flex-shrink-0"},[e.relates&&o("div",{className:"setting-system-help-items"},e.relates.map(t=>{var n;return o("div",{className:"setting-system-help-item",onclick:(n=t.onClick)==null?void 0:n.bind(null,t.name)},[o("div",{className:"setting-system-help-item-label"},t.text),o("div",{className:"setting-system-help-item-content"},t.desc)])})),e.actions&&o("div",{className:"setting-system-help-actions"},[o("div",{className:"setting-system-help-item-label"},"Have a question?"),o("div",{className:"setting-system-help-actions-list"},e.actions.map(t=>{var n;return o("div",{onclick:(n=t.onClick)==null?void 0:n.bind(null,t.name),className:"setting-system-help-item-link"},t.text)}))])]):null}function Za(){const e=()=>"settings/system/",{nightlight:t,scale:n}=fe.getState(["nightlight","scale"]),i=hn({checked:t,onChange:()=>{cn.toogleNightLight()}}),s=mn({options:[{text:"50%",value:"0.5"},{text:"60%",value:"0.6"},{text:"70%",value:"0.7"},{text:"80%",value:"0.8"},{text:"90%",value:"0.9"},{text:"100%",value:"1"},{text:"120%",value:"1.2"},{text:"150%",value:"1.5"}],value:n,onChange(f){vi(f.value),fe.setState({scale:f.value})}});Me(G.nightLightChange,"settings-display-nightlight",f=>{i.checked=f});const l=[{path:"",text:"Night light",desc:"Use warmer colors to help block blue light",icon:"",name:"nightlight",control:i.element,content:gt({itemsCenter:!0,contentLeft:"Atjust the color of the screen to help block blue light"})},{path:"",text:"Scale",desc:"Make your display easier to see",icon:"",name:"scale",content:gt({itemsCenter:!0,contentLeft:"Select value",contentRight:s.element}),expanded:!0},{path:"",text:"HDR",desc:"More about HDR",icon:"",name:"nightlight"}],a=tt(l[0]),m=tt(l[1]),r=tt(l[2]);let c=o("div",{className:"setting-system-display flex flex-wrap",onBeforeRemove(){an(G.nightLightChange,"settings-display-nightlight")}},[o("div",{className:"flex-1"},o("div",{className:"setting-system-main-content"},[a.element,ki()?m.element:null,r.element])),zi({relates:[{name:e()+"nightlight",text:"Sleep better",desc:"Nightlight can help you get to sleep by displaying warmer colors at night. Select Night light settings to set things up."}],actions:[{name:"",text:"Changing screen brightness",desc:""},{name:"",text:"Adjusting font size",desc:""}]})]);function h(){c.remove(),c=null}return{element:c,dispose:h}}function Ga(e){return o("button",{className:"button "+(e.className||""),onclick:e.onclick},e.children)}function Ja(){let e=o("div",{className:"setting-recovery"},[o("div",{},"If you're having problems with your PC or want to reset it, these recovery options might help"),o("div",{},[tt({path:"",text:"Reset this PC",desc:"Choose or keep your personal files, then reinstall Windows",icon:"",name:"recovery",control:Ga({children:"Reset PC",onclick(){ta()}})}).element])]);function t(){e=null}return{element:e,dispose:t}}function Qa(){const{themes:e,themeIndex:t,customTheme:n}=fe.getState(["themes","themeIndex","customTheme"]),s=(t>-1?e[t]:n).background;let l;const{USER_NAME:a}=at.getState("USER_NAME");let m=o("div",{className:"setting-system-overall",onBeforeRemove(){an(G.backgroundImageChange,"setting-system")}},[o("div",{className:"flex"},[o("div",{className:"setting-system-desktop relative"},l=o("div",{className:"setting-system-desktop-inner image-cover"})),o("div",{className:"setting-system-info"},[o("div",{className:"setting-system-info-name"},`${a}`),o("div",{className:"setting-system-info-role"},"Administrator"),o("div",{className:"setting-system-info-action"},"Rename")])]),o("div",{className:"setting-system-office flex"},[o("div",{className:"setting-system-office-onedrive flex"},[o("div",{className:"setting-system-office-onedrive-icon flex items-center content-center"}),o("div",{className:"setting-system-office-onedrive-info"},[o("div",{className:"setting-system-office-onedrive-info-name"},"OneDrive"),o("div",{className:"setting-system-office-onedrive-info-action"},"Manage")])])])]);s&&r(s.path),Me(G.backgroundImageChange,"setting-system",c=>{r(c.path)});function r(c){l.style.myBackgroundImage=c}return m}function er(e){let t=fn.system.items,n;n=Object.keys(t).map(l=>{const a=t[l];return{isNav:!0,name:l,text:a.text,icon:a.icon,iconType:a.iconType,desc:a.desc,path:"system/"+l}});let i=o("div",{className:"setting-system flex flex-wrap"},[o("div",{className:"flex-1"},o("div",{className:"setting-system-main-content"},[Qa(),po(n,e)])),zi()]);function s(){i.remove(),i=null}return{element:i,dispose:s}}function Re(){let e=o("div",{},"In progress");function t(){e.remove(),e=null}return{element:e,dispose:t}}const tr={system:{content:er,children:{display:{content:Za},sound:{content:Re},noitification:{content:Re},focusAssist:{content:Re},powerAndBatery:{content:Re},storage:{content:Re},troubleshoot:{content:Re},recovery:{content:Ja}}},bluetoothAndDevice:{content:Re},networkAndInternet:{content:Re},personalization:{content:Ya,children:{background:{content:ja},colors:{content:qa},lockScreen:{content:Re},theme:{content:Re},font:{content:Re},start:{content:Re},taskbar:{content:Re}}},apps:{content:Re},accounts:{content:Re},timeAndLanguage:{content:Re},gaming:{content:Re},accessibility:{content:Re},privacyAndSecurity:{content:Re},windowUpdate:{content:Re}};function nr(e,t,n){let i=o("div",{className:"setting-sidebar-nav-item flex items-center"+(e.active?" active":""),onclick:()=>n(e,i,t)},[o("div",{className:"setting-sidebar-nav-item-icon flex-shrink-0",style:{backgroundImage:`url("${e.icon}")`}}),o("div",{className:"setting-sidebar-nav-item-text"},e.text)]);return i}function or(e){const t=Xo.map((r,c)=>nr(r,c,a));let n=0,i=t[0];i.classList.add("active");let s=An({placeholder:"Find a Setting"}),l=o("div",{className:"setting-sidebar h-full flex-shrink-0"},o("div",{className:"setting-sidebar-inner standard-content w-full h-full"},o("div",{className:"w-full h-full flex flex-col"},[o("div",{className:"setting-sidebar-heading"},s.element),o("div",{tabIndex:0,className:"setting-sidebar-nav scrollable scroll-y"},t)])));function a(r,c,h){h!==n&&(i.classList.remove("active"),c.classList.add("active"),n=h,i=c,e(r.name))}function m(r){const c=r.split("/")[0];if(c){const h=Xo.findIndex(f=>f.name===c);if(h>-1){i.classList.remove("active");let f=t[h];n=h,f.classList.add("active"),i=f}}}return{element:l,setRoute:m}}function ir(e){let t;const n=o("div",{className:"setting-content-heading flex-shrink-0 flex items-center"},t=o("div",{className:"setting-content-heading-item"},"System"));function i(s){const l=o("div",{className:"w-full flex items-center"},s.map((a,m)=>{let r=o("div",{className:"setting-content-heading-route flex items-center"+(m===s.length-1&&m>0?" disabled":""),onclick:s.length-1?e.bind(null,a.path):null},a.text);return m>0&&r.prepend(o("div",{className:"setting-content-heading-route-divider flex-center",innerHTML:Xt})),r}));t.innerHTML="",t.appendChild(l)}return{element:n,setRoute:i}}function sr(e){let t;const n=ir(e);let i,s=o("div",{className:"setting-content w-full h-full"},o("div",{className:"setting-content-inner standard-content w-full h-full flex flex-col"},[n.element,i=o("div",{tabIndex:0,className:"setting-content-main scrollable scroll-y"})]));function l(a){const m=a.split("/"),r=m.length;if(r===0)return;let c=tr[m[0]];if(!c)return;t&&t.dispose();let h;r===1?h=c.content(e):r===2&&(h=c.children[m[1]].content(e)),t=h;const f=m.reduce((u,p,d)=>(u.path+=p,u.currentSetting=d===0?fn[p]:u.currentSetting.items[p],u.routes.push({text:u.currentSetting.text,path:u.path}),d<r-1&&(u.path+="/"),u),{routes:[],path:"",currentSetting:Object.create(null)});n.setRoute(f.routes),rt(i),i.scrollTop=0,i.appendChild(h.element)}return{element:s,update:l}}const lr=e=>{const t=function(i){let s=or(m),l=sr(m);function a(r){s.setRoute(r),l.update(r)}e?a(e):l.update("system"),i.addEventListener("secondInstance",r=>{i.isVisible()||i.show(),i.focus(),r&&a(r)});function m(r){l.update(r)}return o("div",{className:"app-settings w-full h-full"},o("div",{className:"setting-inner flex w-full h-full"},[s.element,l.element]))},n=o("div",{className:"w-full h-full flex items-center"},[o("div",{["drag-region"]:"drag",className:"flex-1 h-full"}),o("div",{className:"setting-user-info-avatar",style:{padding:"6px"}},o("div",{className:"setting-user-info-avatar-image w-full h-full",style:{marginLeft:"auto",backgroundImage:`url("${ks}")`,backgroundSize:"cover"}}))]);ut({args:e,icon:Y.settings.icon,name:Y.settings.name,title:Y.settings.productName,singleInstance:!0,titlebarHeight:36,titlebarContent:n,top:200,left:300,minWidth:700,minHeight:400,width:1e3,height:540,center:!0,fluidContent:!0,transprencyContent:!0,content:t})};function ar(e){const s=so("calculator",{top:50,left:ke.width-380-50});let{top:l,left:a}=s.getState();l>ke.height-We-Bt&&(l=50),a>ke.width-380-50&&(a=ke.width-380-50);let m,r;const c=mn({options:[{id:"standard",value:"standard",text:"Standard"},{id:"scientific",value:"scientific",text:"Scientific"},{id:"programmer",value:"programmer",text:"Programmer"}],value:"standard",noBackground:!0,onChange(v){h(v.value),m.setContent(r)}});m=ut({icon:Y.calculator.icon,name:Y.calculator.name,title:Y.calculator.productName,titlebarHeight:36,titlebarContent:c.element,top:l,left:a,width:380,height:500,disableResize:!0,disableMaximize:!0,transprencyContent:!0}),m.addEventListener("dragend",v=>{s.setState({top:v.top,left:v.left})}),m.addEventListener("focus",()=>{r.focus()}),h("standard"),m.setContent(r);function h(v){switch(v){case"standard":r=u();break;case"scientific":r=p();break;case"programmer":r=d();break;default:r=u();break}}function f(v,x){const w={};return v.type==="command"&&v.value==="="&&(w.color="var(--accent-color)"),o("div",{className:"calculator-button flex flex-1 items-center content-center"+(v.type==="number"?" emphasis":""),onclick:x.bind(null,v.type,v.value),innerHTML:v.content,style:w})}function u(){let v,x,w,y="",L="",B="",M=48;function R(){let C;const k=parseFloat(y);let D=parseFloat(L);if(!(isNaN(k)||isNaN(D))){switch(B){case"+":C=k+D;break;case"-":C=k-D;break;case"*":case"x":C=k*D;break;case"/":C=k/D;break}L=C.toString(),B=null,y=""}}function O(){y="",B="",V()}function V(){L="0",x.style.removeProperty("font-size")}function H(C){const k=C.toString(),D=parseFloat(k.split(".")[0]),S=k.split(".")[1];let $;return isNaN(D)?$="":$=D.toLocaleString("en",{maximumFractionDigits:0}),S!=null?`${$}.${S}`:$}function T(C){C==="."&&L.includes(".")||(L=L.toString()+C.toString())}function b(C){L!==""&&(y!==""&&R(),B=C,y=L,L="")}function g(C){x.scrollWidth>x.offsetWidth&&(C-=2,x.style.fontSize=C+"px",g(C))}function N(){v.textContent=H(parseFloat(L)),g(M),F(B)?w.textContent=`${H(parseFloat(y))} ${B}`:w.textContent=""}function I(C,k){if(C==="number")T(k),N();else if(C==="operator")b(k),N();else if(C==="command"){switch(k){case"c":O();break;case"ce":V();break;case"=":R();break;case"sqrt":L=Math.sqrt(parseFloat(L)).toString();break;case"negative":L=(parseFloat(L)*-1).toString();break}N()}}function E(C){let k=/[0-9]/g,D=/[+\-*\/]/g;C.key.match(k)&&(C.preventDefault(),T(C.key),N()),C.key==="."&&(C.preventDefault(),T(C.key),N()),C.key.match(D)&&(C.preventDefault(),b(C.key),N()),(C.key==="Enter"||C.key==="=")&&(C.preventDefault(),R(),N()),C.key==="Backspace"&&(C.preventDefault(),V(),N()),C.key==="Delete"&&(C.preventDefault(),O(),N())}return o("div",{tabIndex:-1,className:"w-full h-full flex flex-col",onkeydown:E},[o("div",{className:"w-full calculator-display flex flex-col"},[w=o("div",{className:"calculator-display-input flex items-center content-end"}),x=o("div",{className:"calculator-display-result flex-1 flex items-center content-end no-scrollbar"},v=o("div",{className:"w-full"},"0"))]),o("div",{className:"w-full h-full calculator-buttons flex flex-col"},[o("div",{className:"w-full calculator-buttons-row flex flex-1"},[f({type:"command",value:"sqrt",content:'<svg class="svg-icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M277.7 843.7h-35.6L93.6 483.2h-76V445h105.6l132.6 330.4 159.6-635.1h37.8L277.7 843.7zM831.6 773.7L697.7 578.8 563.4 773.7h-45.1l155.4-223.6-148.1-212.5h46.8l125.3 183.7 124.9-183.7h47.2L722.2 549.2l157.1 224.4h-47.7z"  /><path d="M984.5 176h-568v-37.1h568V176z"  /></svg>'},I),f({type:"command",value:"ce",content:"CE"},I),f({type:"command",value:"c",content:"C"},I),f({type:"operator",value:"/",content:"/"},I)]),o("div",{className:"w-full calculator-buttons-row flex flex-1"},[f({type:"number",value:"7",content:"7"},I),f({type:"number",value:"8",content:"8"},I),f({type:"number",value:"9",content:"9"},I),f({type:"operator",value:"x",content:"&#215;"},I)]),o("div",{className:"w-full calculator-buttons-row flex flex-1"},[f({type:"number",value:"4",content:"4"},I),f({type:"number",value:"5",content:"5"},I),f({type:"number",value:"6",content:"6"},I),f({type:"operator",value:"-",content:"&#8722;"},I)]),o("div",{className:"w-full calculator-buttons-row flex flex-1"},[f({type:"number",value:"1",content:"1"},I),f({type:"number",value:"2",content:"2"},I),f({type:"number",value:"3",content:"3"},I),f({type:"operator",value:"+",content:"+"},I)]),o("div",{className:"w-full calculator-buttons-row flex flex-1"},[f({type:"command",value:"negative",content:"+/-"},I),f({type:"number",value:"0",content:"0"},I),f({type:"number",value:".",content:"."},I),f({type:"command",value:"=",content:"="},I)])])])}function p(){return o("div",{className:"w-full h-full flex content-center items-center"},o("h1",{},"Scientific Calculator"))}function d(){return o("div",{className:"w-full h-full flex content-center items-center"},o("h1",{},"Programmer Calculator"))}}var rr=o("canvas"),Dn=rr.getContext("2d");const Ge=[{x:0,y:100},{x:100,y:10},{x:200,y:100},{x:300,y:60},{x:400,y:100}];Dn.moveTo(Ge[0].x,Ge[0].y);for(var et=1;et<Ge.length-2;et++){var cr=(Ge[et].x+Ge[et+1].x)/2,dr=(Ge[et].y+Ge[et+1].y)/2;Dn.quadraticCurveTo(Ge[et].x,Ge[et].y,cr,dr),Dn.quadraticCurveTo(Ge[et].x,Ge[et].y,Ge[et+1].x,Ge[et+1].y)}Dn.stroke();const Hi="10.0.24223.355",qo={RESET:"\x1B[0m",BLACK:"\x1B[30m",RED:"\x1B[31m",GREEN:"\x1B[32m",LIGHT_YELLOW:"\x1B[93m",YELLOW:"\x1B[33m",YELLOW_BACKGROUND:"\x1B[43m",BLUE:"\x1B[34m",PURPLE:"\x1B[35m",CYAN:"\x1B[36m",WHITE:"\x1B[37m",BOLD:"\x1B[1m",UNBOLD:"\x1B[21m",UNDERLINE:"\x1B[4m",STOP_UNDERLINE:"\x1B[24m",BLINK:"\x1B[5m"};function ur(e){const t=n=>{const i=at.getState("USER_HOME").USER_HOME;let s=i,l="",a=0,m="",r=navigator.clipboard,c="",h=0,f=[],u=0;function p(g){s=g.replace(/\\+/g,"/"),l=s+">",a=l.length}p(i),F(e)&&p(e),ie.readFile(i+"/.cmdHistory",(g,N)=>{!g&&F(N)&&N.text().then(I=>{try{f=JSON.parse(I),u=f.length-1}catch{}})});const d=new ls.Terminal({cursorBlink:!0,cursorStyle:"underline",allowTransparency:!0,fontFamily:"Consolas"}),v=new as.FitAddon;d.loadAddon(v);let x;x=o("div",{className:"w-full h-full",onmousedown:V}),d.open(x);const w={cls:"Clears the screen.",dir:"Displays a list of files and subdirectories in a directory.",cd:"Displays the name of or changes the current directory.",mkdir:"Creates a directory.",rm:"Removes a directory.",print:"Prints a text file.",help:"Provides Help information for Windows commands.",exit:"Quits"};function y(){Object.keys(w).forEach(g=>{d.write(`\r
`+g+"	"+w[g])}),d.write(`\r
`),M()}const L=`[Version ${Hi}]`;function B(){return qo.GREEN+l+qo.WHITE}function M(){d.write(`\r
`+B())}L.split(`
`).map(g=>d.writeln(g)),M(),d.onKey(({key:g,domEvent:N})=>{const I=N.key;if(!/^(?!F[0-9]).*/g.test(I))return;const E=!N.altKey&&!N.ctrlKey&&!N.metaKey;if(N.ctrlKey){const C=I.toLowerCase();C==="l"?d.clear():C==="a"?d.selectAll():C==="c"?d.hasSelection()?R():(c="",M()):C==="v"&&O();return}if(I===Ee.ArrowLeft)d.buffer.active.cursorX>a&&d.write("\x1B[1D");else if(I===Ee.ArrowRight)d.buffer.active.cursorX<c.length+a&&d.write("\x1B[1C");else if(I===Ee.ArrowUp)f.length>0&&(c=f[u],d.write("\x1B[2K\r"+B()+c),u>0&&(u-=1));else if(I===Ee.ArrowDown)u+1<f.length&&(u+=1,c=f[u],d.write("\x1B[2K\r"+B()+c));else if(I===Ee.BackSpace){if(d.buffer.active.cursorX>a)if(d.buffer.active.cursorX===a+c.length)c=c.slice(0,-1),d.write("\b \b");else{const C=c.slice(0,d.buffer.active.cursorX-a-1),k=c.slice(d.buffer.active.cursorX-a);c=C+k,h=a+c.length-d.buffer.active.cursorX+1,d.write("\x1B[2K\r"+B()+c+"\x1B["+h+"D")}}else if(I===Ee.Delete){if(d.buffer.active.cursorX>=a&&d.buffer.active.cursorX<a+c.length){const C=l+c,k=C.slice(a,d.buffer.active.cursorX),D=C.slice(d.buffer.active.cursorX+1,C.length);c=k+D,h=a+c.length-d.buffer.active.cursorX,d.write("\x1B[2K\r"+B()+c+(D.length>0?"\x1B["+h+"D":""))}}else if(I===Ee.Home)d.buffer.active.cursorX>a&&(h=d.buffer.active.cursorX-a,d.write("\x1B["+h+"D"));else if(I===Ee.End){const C=l+c;d.buffer.active.cursorX<C.length&&(h=C.length-d.buffer.active.cursorX,d.write("\x1B["+h+"C"))}else{if(I===Ee.Insert)return;if(I===Ee.Enter)c.replace(/^\s+|\s+$/g,"").length!=0?T(c):M(),c="";else{if(I===Ee.Tab)return;if(E){if(d.buffer.active.cursorX===a+c.length)c+=g,d.write(g);else if(d.buffer.active.cursorX<a+c.length){const C=l+c,k=C.slice(a,d.buffer.active.cursorX),D=C.slice(d.buffer.active.cursorX,C.length);c=k+g+D,h=a+c.length-d.buffer.active.cursorX-1,d.write("\x1B[2K\r"+B()+c+(D.length>0?"\x1B["+h+"D":""))}}}}});function R(){m=d.getSelection(),r.writeText(m)}function O(){r.readText().then(g=>{if(d.buffer.active.cursorX===a+c.length)d.write(g),c=c+g;else if(d.buffer.active.cursorX<a+c.length){const N=l+c,I=N.slice(a,d.buffer.active.cursorX),E=N.slice(d.buffer.active.cursorX,N.length);c=I+g+E,h=a+c.length-d.buffer.active.cursorX,d.write("\x1B[2K\r"+B()+c+(E.length>0?"\x1B["+h+"D":""))}})}function V(g){g.button===2&&(d.hasSelection()?(R(),d.clearSelection()):O())}function H(g){const N=g.replace(/\\+/g,"/").replace(/\/+/g,"/").split("/").filter(E=>E!=="");let I=s.split("/").filter(E=>E!=="");for(let E of N)E==="~"?I=i.split("/").filter(C=>C!==""):E===".."?I.length-1>0&&I.splice(I.length-1,1):I.push(E);return I.join("/")}function T(g){v.fit(),u=f.push(g)-1,ie.writeFile(i+"/.cmdHistory",new Blob([JSON.stringify(f)]));let N=[];if(g.indexOf('"')>-1?N=g.split('"'):g.indexOf("'")>-1?N=g.split("'"):N=g.split(" "),N=N.filter(C=>C!==""),!N.length)return;const I=N[0].replace(/\s+/g,"");let E=N[1];if(F(w[I])){if(I==="dir"){let C=function(){d.write(`\r
The system cannot find the path specified.
`),M()},k=function(D){ie.readFolder(D,(S,$)=>{if(S)b(S);else{d.write(`\r
Directory of `+D+`
`);const P=$.some(j=>j.type!=="folder"),A=$.some(j=>j.type==="folder"),_=$.every(j=>j.type!=="folder"),U=$.every(j=>j.type==="folder");$.forEach(j=>{const K=new Date(j.mdate);d.write(`\r
`+Yn(K)+"  "+zt(K)+"	"+(P&&A?(j.type==="folder"?"<DIR> 	 	":" 	")+(Zn(j.size)?j.size.toPrecision()+"	":""):(U&&j.type==="folder"?"<DIR>	":"")+(_&&Zn(j.size)?j.size.toPrecision()+"		":""))+j.name)}),d.write(`\r
`),M()}})};if(E||(E=s),Ke(E)||kt(E))k(E);else if(Zt(E)){const D=H(E);k(D)}else C()}else if(I==="exit")M(),setTimeout(()=>{n.close()},200);else if(I==="cls")d.clear(),c="",d.write("\x1B[2K\r"+B());else if(I==="help")y();else if(I==="cd"){let C=function(){d.write(`\r
The system cannot find the path specified.
`),M()};if(!E)C();else if(Ke(E)||kt(E))ie.stats(E,k=>{k?(d.write(`\r
`+k.message),C()):(p(E),M())});else if(Zt(E)){const k=H(E);ie.stats(k,D=>{D?C():(p(k),M())})}else C()}else if(I==="mkdir"){let C=function(k){k?d.write(`\r
`+k+`
`):d.write(`\r
The system cannot find the path specified.
`),M()};if(!E)C();else if(Ke(E))ie.createFolder(E,k=>{k?C(k.message):M()});else if(Zt(E)){const k=H(E);ie.createFolder(k,D=>{D?C(D.message):M()})}else kt(E)?(d.write(`\r
Folder already exisist!`),M()):C()}else if(I==="rm"){let C=function(k){k?d.write(`\r
`+k+`
`):d.write(`\r
The system cannot find the path specified.
`),M()};if(!E)C();else{let k=function(D,S,$=0){const P=S[$];if(!F(P)){M();return}ie.unlink(D+"/"+P.name,A=>{A?(C(A.message),M()):k(D,S,$+1)})};if(E=E.trim(),E==="*")ie.readFolder(s,(D,S)=>{D?(C(D.message),M()):k(s,S),M()});else if(Ke(E)){const D=E.replace(/\\+/g,"/").replace(/\/+/g,"/");if(s.indexOf(D)>-1){C("Can not execute this action!");return}ie.unlink(D,S=>{S?C(S.message):M()})}else if(Zt(E)){const D=H(E);if(s.indexOf(D)>-1){C("Can not execute this action!");return}ie.unlink(D,S=>{S?C(S.message):M()})}else C()}}else if(I==="print"){let C=function(D){D?d.write(`\r
`+D+`
`):d.write(`\r
The system cannot find the path specified.
`),M()},k=function(D){if(s.indexOf(D)>-1){C("Can not execute this action!");return}ie.readFile(D,(S,$)=>{S?C(S.message):F($)?$.size>1e4?(d.write(`\r
Name: `+($.name||nt(D))+" Size: "+$.size),M()):$.text().then(P=>{const A=P.split(`
`);for(let _ of A)d.write(`\r
`+_);d.write(`\r
`),M()}):C()})};if(!E)C();else if(Ke(E)){const D=E.replace(/\\+/g,"/").replace(/\/+/g,"/");k(D)}else if(Zt(E)){const D=H(E);k(D)}else C()}}else F(Bn[I])?(M(),Bn[I](E)):(d.write(`\r
"`+I+`" is not recognized as an internal or external command, operable program or batch file.
`),d.write(`\r
Type "help" for available commands
`),M())}function b(g){d.write(`\r
`+g.message+`
`),M()}return n.addEventListener("focus",()=>{d.focus()}),n.addEventListener("close",()=>{d.dispose()}),n.addEventListener("passiveResize",ca(()=>{v.fit()},200)),n.addEventListener("ready",()=>{v.fit()}),x};ut({icon:Y.cmd.icon,name:Y.cmd.name,title:Y.cmd.productName,top:100,left:100,width:800,height:450,center:!0,content:t,className:"cmd-app",extendContextMenu:[{divider:!0},{text:"Properties"}]})}function mr(e){ut({args:e,icon:bt.mediaPlayer.icon,hideIcon:!0,name:bt.mediaPlayer.name,title:bt.mediaPlayer.productName,autoHideTitleBar:!0,top:50,left:50,width:800,height:480,minWidth:300,minHeight:100,center:!0,singleInstance:!0,content:t=>{let n,i,s;function l(a){F(s)&&en.removeController(s);const m=dt(a);if(dn(m)){const r=o("div",{className:"w-full h-full relative"},i=o("video",{className:"w-full h-full",controls:!0,autoplay:!0,style:{objectFit:"contain"},mySrc:a}));return s=en.addController(i),t.setSize({width:800,height:480}),t.setTitle(nt(a)),r}if(zo(m)){const r=o("div",{className:"w-full h-full relative p-20"},i=o("audio",{className:"w-full h-full",controls:!0,autoplay:!0,mySrc:a}));return s=en.addController(i),t.setSize({width:500,height:300}),t.setTitle(nt(a)),r}return o("div",{},"Not supported file")}return t.addEventListener("secondInstance",a=>{n=l(a),t.setContent(n),t.isVisible()||t.show(),t.focus()}),t.addEventListener("ready",()=>{n=l(e),t.setContent(n)}),t.addEventListener("close",()=>{F(s)&&en.removeController(s)}),t.addEventListener("customdrop",a=>{const m=dt(a.location);a.type==="file"&&(dn(m)||zo(m))&&(n=l(a.location),t.setContent(n))}),null}})}function fr(e){if(!F(e)){Fe("photos");return}ut({args:e,icon:bt.photoViewer.icon,hideIcon:!0,name:bt.photoViewer.name,title:bt.photoViewer.productName,hideTitle:!0,top:50,left:50,width:800,height:480,minWidth:580,minHeight:200,center:!0,singleInstance:!0,titlebarHeight:40,stretchTitlebarContent:!0,transprencyContent:!0,content:t=>{let n,i,s,l,a,m,r,c,h=0,f=0,u=0,p=0,d=0,v=0,x=0,w=0,y,L=0,B=0,M=0,R=0,O,V;i=o("div",{className:"photo-viewer-titlebar-content w-full h-full flex items-center"},[o("div",{className:"flex items-center flex-1 h-full"},[o("div",{className:"photo-viewer-titlebar-home flex items-center content-center flex-shrink-0",style:{width:"40px",height:"40px"},innerHTML:si(20),onclick(){Fe("photos")}}),o("div",{["drag-region"]:"drag",className:"w-full h-full flex items-center",style:{padding:"0 10px"}},s=o("div",{className:"text-ellipsis line-clamp-1"}))]),o("div",{className:"flex items-center content-center h-full"},[o("div",{title:"Edit Image",className:"photo-viewer-titlebar-content-button",innerHTML:Ks()}),o("div",{title:"Rotate",className:"photo-viewer-titlebar-content-button",innerHTML:Ss}),o("div",{title:"Delete",className:"photo-viewer-titlebar-content-button",innerHTML:tl()}),o("div",{title:"Add to favorites",className:"photo-viewer-titlebar-content-button",innerHTML:nl()}),o("div",{title:"Print",className:"photo-viewer-titlebar-content-button",innerHTML:ol()}),o("div",{title:"Share",className:"photo-viewer-titlebar-content-button",innerHTML:il()}),o("div",{title:"More options",className:"photo-viewer-titlebar-content-button",innerHTML:ii(),onclick(q){const J=q.currentTarget,W=J.getBoundingClientRect();qt({top:W.top+W.height,left:W.left},J,[{text:"Set as desktop wallpaper",onClick(){Ke(c)?ho(c,(He,Z)=>{He||de(URL.createObjectURL(Z))}):de(c);function de(He){uo(He,(Z,ee)=>{const ge=nt(c),ve=at.getState("USER_HOME").USER_HOME+"/AppData/Microsoft/Windows/Desktop/Background/"+"Thumbnails/"+ge;ie.writeFile(ve,ee,()=>{Ve.setBackgroundImage({name:ge,path:c,thumbnailPath:ve})})})}t.focus()}},{text:"Resize image",onClick(){t.focus()}},{text:"Copy as path",onClick(){t.focus()}},{text:"Settings",onClick(){t.focus()}}],!1)}})]),o("div",{["drag-region"]:"drag",className:"flex items-center flex-1 h-full"})]),t.titlebar.setTitlebarContent(i),n=o("div",{className:"w-full h-full",style:{position:"relative",paddingBottom:"40px"}},[a=o("div",{className:"w-full h-full flex items-center content-center",style:{position:"relative",overflow:"hidden"},onwheel:C,ontouchstart:b},l=o("div",{className:"photo-viewer-container w-full h-full",onmousedown:T})),o("div",{className:"photo-viewer-bottom flex items-center"},[o("div",{}),o("div",{className:"flex items-center",style:{marginLeft:"auto"}},[m=o("div",{style:{paddingRight:"10px"}}),o("div",{title:"Zoom out",className:"photo-viewer-bottom-button",innerHTML:Gs(18),onclick:()=>{U(-1)}}),o("div",{title:"Zoom in",className:"photo-viewer-bottom-button",innerHTML:Zs(18),onclick:()=>{U(1)}}),o("div",{title:"Zoom to fit",className:"photo-viewer-bottom-button",innerHTML:Js(18),onclick:A}),o("div",{title:"Zoom to actual size",className:"photo-viewer-bottom-button",innerHTML:Qs(18),onclick:_}),o("div",{title:"Fullscreen",className:"photo-viewer-bottom-button",innerHTML:el(14),onclick:()=>{t.toggleFullscreen()}})])])]);function H(q){const J=dt(q);if(!Pn(J)){l.textContent="Not supported file";return}Zl(q,de=>{F(de)&&(c=q,l.textContent="",l.style.myBackgroundImage=q,y=de,$(),(y.width>r.width||y.height>r.height)&&A(),y.width<r.width&&y.height<r.height&&P())});const W=nt(q);t.setTitle(W),s.textContent=W}function T(q){q.button===0&&(q.preventDefault(),M=q.clientX,R=q.clientY,document.onmouseup=E,document.onmousemove=g)}function b(q){q.touches.length===1?(q.preventDefault(),M=q.touches[0].clientX,R=q.touches[0].clientY,window.addEventListener("touchmove",N,!1),window.addEventListener("touchend",E,!1)):q.touches.length===2&&(q.preventDefault(),O=q.touches[0],V=q.touches[1],window.addEventListener("touchmove",k,!1),window.addEventListener("touchend",D,!1))}function g(q){L=M-q.clientX,B=R-q.clientY,M=q.clientX,R=q.clientY,I()}function N(q){const J=q.touches[0];L=M-J.clientX,B=R-J.clientY,M=J.clientX,R=J.clientY,I()}function I(){const q=l.offsetTop-B,J=l.offsetLeft-L;u>r.width&&(J>0?f=0:J+u<r.width?f=r.width-u:f=J,l.style.left=f+"px"),p>r.height&&(q>0?h=0:q+p<r.height?h=r.height-p:h=q,l.style.top=h+"px")}function E(){document.onmouseup=null,document.onmousemove=null,window.removeEventListener("touchmove",N,!1),window.removeEventListener("touchend",E,!1)}function C(q){let J=q.deltaY>0?-1:1;x=q.offsetX,w=q.offsetY,U(J)}function k(q){const J=q.touches[0],W=q.touches[1],de=l.getBoundingClientRect();let He=Math.abs(W.clientX-J.clientX)-Math.abs(V.clientX-O.clientX),Z=Math.abs(W.clientY-J.clientY)-Math.abs(V.clientY-O.clientY),ee=He>0||Z>0?1:-1;O.clientX===J.clientX?x=O.clientX-de.x:V.clientX===W.clientX?x=V.clientX-de.x:x=W.clientX-J.clientX-de.x,O.clientY===J.clientY?w=O.clientY-de.y:V.clientY===W.clientY?w=V.clientY-de.y:w=W.clientY-J.clientY-de.y,U(ee,He)}function D(){window.removeEventListener("touchmove",k,!1),window.removeEventListener("touchend",D,!1)}function S(){r={width:a.offsetWidth,height:a.offsetHeight}}function $(){if(ce())v=100;else{const q=r.width/r.height;let J=0;q<y.ratio?J=r.width:J=r.height*y.ratio,v=J/y.width*100}}function P(){h=(r.height-y.height)/2,f=(r.width-y.width)/2,u=y.width,p=y.height,v=100,d=100,re(l,{top:h+"px",left:f+"px",width:u+"px",height:p+"px"}),K()}function A(){S();const q=r.width/r.height,J={};if(q<y.ratio){const W=r.width/y.ratio;h=(r.height-W)/2,f=0,u=r.width,p=W}else{const W=r.height*y.ratio,de=(r.width-W)/2;h=0,f=de,u=W,p=r.height}d=u/y.width*100,u<r.width&&p<r.height?v=100:v=d,J.top=h+"px",J.left=f+"px",J.width=u+"px",J.height=p+"px",K(),re(l,J)}function _(){j(100)}function U(q,J){u<r.width&&(x=u/2),p<r.height&&(w=p/2);let W=u;F(J)?W=u+u*.01*q:W=u+u*.1*q,(u<y.width&&y.width<W||u>y.width&&y.width>W)&&(W=y.width);let de=x/u,He=w/p,Z=W/y.width*100;Z<v&&(Z=v,W=Z*y.width/100),Z>5e3&&(Z=5e3,W=Z*y.width/100),d=Z,u=W,p=u/y.ratio;let ee=de*u-x,ge=He*p-w;f-=ee,h-=ge,q===-1&&(u>r.width?(f>0&&(f=0),f+u<r.width&&(f=r.width-u)):f=(r.width-u)/2,p>r.height?(h>0&&(h=0),h+p<r.height&&(h=r.height-p)):h=(r.height-p)/2),u<r.width&&p<r.height&&(h=(r.height-p)/2,f=(r.width-u)/2),re(l,{width:u+"px",height:p+"px",top:h+"px",left:f+"px"}),K()}function j(q){const J=q*y.width/100,W=J/y.ratio,de=.5*J-u/2,He=.5*W-p/2;d=q,h-=He,f-=de,u=J,p=W,re(l,{top:h+"px",left:f+"px",width:u+"px",height:p+"px"}),K()}function K(){m.textContent=Math.round(d)+" %"}function ce(){return S(),y.width<r.width&&y.height<r.height}function xe(){d===v?ce()?P():A():d>v&&($(),f>0&&(f=0,l.style.left=f+"px"),u+f<r.width&&(f=(r.width-u)/2,l.style.left=f+"px"),h>0&&(h=0,l.style.top=h+"px"),p+h<r.height&&(h=(r.height-p)/2,l.style.top=h+"px"))}function De(){setTimeout(()=>{xe()},250)}return t.addEventListener("resize",Ze(()=>{xe()},50)),t.addEventListener("maximize",()=>{De()}),t.addEventListener("unmaximize",()=>{De()}),t.addEventListener("snap",()=>{De()}),t.addEventListener("unSnap",()=>{De()}),t.addEventListener("restore",()=>{De()}),t.addEventListener("fullscreen",()=>{De()}),t.addEventListener("secondInstance",q=>{t.isVisible()||t.show(),t.focus(),H(q)}),t.addEventListener("ready",()=>{t.setContent(n),H(e)}),null}})}const Bn={settings:lr,explorer:Ia,notepad:Ea,word:()=>{qe(Y.word)},powerpoint:()=>{qe(Y.powerpoint)},onenote:()=>{qe(Y.onenote)},mail:()=>{qe(Y.mail)},todo:()=>{qe(Y.todo)},store:()=>{qe(Y.store)},photos:Oa,photoViewer:fr,mediaPlayer:mr,yourphone:()=>{qe(Y.yourphone)},whiteboard:()=>{qe(Y.whiteboard)},calculator:ar,spotify:()=>{qe(Y.spotify)},twitter:()=>{qe(Y.twitter)},vscode:()=>{qe(Y.vscode)},terminal:()=>{qe(Y.terminal)},cmd:ur,github:()=>{qe(Y.github)},discord:()=>{qe(Y.discord)}};const Ai=ki();String.prototype.toFirstUpperCase=function(){return this.charAt(0).toUpperCase()+this.substring(1,this.length)};const hr=localStorage.getItem("OS_VERSION");F(hr)||(fe.reset(),localStorage.setItem("OS_VERSION",Hi));aa&&document.documentElement.classList.add("isWebkit");Ai&&document.documentElement.classList.add("isMobile");document.documentElement.style.setProperty("--taskbar-height",We.toString()+"px");document.addEventListener("dragover",e=>{e.preventDefault()});document.addEventListener("drop",e=>{e.preventDefault()});document.addEventListener("contextmenu",e=>{e.preventDefault()});const Ye=fe.getState();Ye.recentImages||(Ye.recentImages=[Ue[15],Ue[9],Ue[21],Ue[0],Ue[8]]);let zn=Ye.themeIndex>-1?Ye.themes[Ye.themeIndex]:Ye.customTheme;F(zn)||(zn=Ye.themes[0],fe.setState({themeIndex:0}));F(Ye.brightness)&&cn.setBrightness(Ye.brightness);Ye.nightlight&&cn.setNightLight(Ye.nightlight);vi(Ye.scale);Jn(Ye.roundedCorner);wi(Ye.useBorder);bi(zn);yi(zn.background.thumbnailPath);Ai&&document.body.appendChild(o("div",{style:{position:"absolute",zIndex:"-100",width:"100%",height:window.innerHeight+50+"px"}}));function Ln(e,t){const n=Bn[e];F(n)?Bn[e](t):sa()}function pr(e){if(e.type==="link")window.open(e.args,"_blank");else if(e.type==="app")Ln(e.name,e.args);else if(e.type==="file"){const t=jt(ra(e.args));Ln(t.appName,e.args)}else e.type==="folder"&&Ln(Y.explorer.name,e.args)}Me(G.createWindow,"index",({appName:e,args:t})=>{Ln(e,t)});Me(G.startProcess,"index",e=>{pr(e)});Me(G.backgroundImageChange,"index",e=>{yi(e.thumbnailPath)});ie.addEventListener("ready","index",()=>{ie.addEventListener("removed","index",e=>{un.removeThumbnail(e)})});
